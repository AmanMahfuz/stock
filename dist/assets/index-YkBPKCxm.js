function C0(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function A0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ka(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var N0={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ya=Symbol.for("react.element"),Km=Symbol.for("react.portal"),Ym=Symbol.for("react.fragment"),Zm=Symbol.for("react.strict_mode"),Qm=Symbol.for("react.profiler"),Jm=Symbol.for("react.provider"),eg=Symbol.for("react.context"),tg=Symbol.for("react.forward_ref"),rg=Symbol.for("react.suspense"),ng=Symbol.for("react.memo"),ig=Symbol.for("react.lazy"),rf=Symbol.iterator;function ag(t){return t===null||typeof t!="object"?null:(t=rf&&t[rf]||t["@@iterator"],typeof t=="function"?t:null)}var I0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O0=Object.assign,T0={};function Bi(t,e,r){this.props=t,this.context=e,this.refs=T0,this.updater=r||I0}Bi.prototype.isReactComponent={};Bi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function k0(){}k0.prototype=Bi.prototype;function kc(t,e,r){this.props=t,this.context=e,this.refs=T0,this.updater=r||I0}var Rc=kc.prototype=new k0;Rc.constructor=kc;O0(Rc,Bi.prototype);Rc.isPureReactComponent=!0;var nf=Array.isArray,R0=Object.prototype.hasOwnProperty,Pc={current:null},P0={key:!0,ref:!0,__self:!0,__source:!0};function D0(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)R0.call(e,n)&&!P0.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Ya,type:t,key:a,ref:o,props:i,_owner:Pc.current}}function og(t,e){return{$$typeof:Ya,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ya}function sg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var af=/\/+/g;function xl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sg(""+t.key):e.toString(36)}function Fo(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ya:case Km:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+xl(o,0):n,nf(i)?(r="",t!=null&&(r=t.replace(af,"$&/")+"/"),Fo(i,e,r,"",function(u){return u})):i!=null&&(Dc(i)&&(i=og(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(af,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",nf(t))for(var s=0;s<t.length;s++){a=t[s];var l=n+xl(a,s);o+=Fo(a,e,r,l,i)}else if(l=ag(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=n+xl(a,s++),o+=Fo(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function so(t,e,r){if(t==null)return t;var n=[],i=0;return Fo(t,n,"","",function(a){return e.call(r,a,i++)}),n}function lg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},Uo={transition:null},ug={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Uo,ReactCurrentOwner:Pc};function M0(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:so,forEach:function(t,e,r){so(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return so(t,function(){e++}),e},toArray:function(t){return so(t,function(e){return e})||[]},only:function(t){if(!Dc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Bi;re.Fragment=Ym;re.Profiler=Qm;re.PureComponent=kc;re.StrictMode=Zm;re.Suspense=rg;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ug;re.act=M0;re.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=O0({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Pc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)R0.call(e,l)&&!P0.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:Ya,type:t.type,key:i,ref:a,props:n,_owner:o}};re.createContext=function(t){return t={$$typeof:eg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jm,_context:t},t.Consumer=t};re.createElement=D0;re.createFactory=function(t){var e=D0.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:tg,render:t}};re.isValidElement=Dc;re.lazy=function(t){return{$$typeof:ig,_payload:{_status:-1,_result:t},_init:lg}};re.memo=function(t,e){return{$$typeof:ng,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Uo.transition;Uo.transition={};try{t()}finally{Uo.transition=e}};re.unstable_act=M0;re.useCallback=function(t,e){return wt.current.useCallback(t,e)};re.useContext=function(t){return wt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};re.useEffect=function(t,e){return wt.current.useEffect(t,e)};re.useId=function(){return wt.current.useId()};re.useImperativeHandle=function(t,e,r){return wt.current.useImperativeHandle(t,e,r)};re.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return wt.current.useMemo(t,e)};re.useReducer=function(t,e,r){return wt.current.useReducer(t,e,r)};re.useRef=function(t){return wt.current.useRef(t)};re.useState=function(t){return wt.current.useState(t)};re.useSyncExternalStore=function(t,e,r){return wt.current.useSyncExternalStore(t,e,r)};re.useTransition=function(){return wt.current.useTransition()};re.version="18.3.1";N0.exports=re;var A=N0.exports;const f=A0(A),cg=C0({__proto__:null,default:f},[A]);var L0={exports:{}},Ut={},B0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,F){var H=D.length;D.push(F);e:for(;0<H;){var ee=H-1>>>1,ve=D[ee];if(0<i(ve,F))D[ee]=F,D[H]=ve,H=ee;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var F=D[0],H=D.pop();if(H!==F){D[0]=H;e:for(var ee=0,ve=D.length,br=ve>>>1;ee<br;){var Sr=2*(ee+1)-1,Zt=D[Sr],Qt=Sr+1,Gn=D[Qt];if(0>i(Zt,H))Qt<ve&&0>i(Gn,Zt)?(D[ee]=Gn,D[Qt]=H,ee=Qt):(D[ee]=Zt,D[Sr]=H,ee=Sr);else if(Qt<ve&&0>i(Gn,H))D[ee]=Gn,D[Qt]=H,ee=Qt;else break e}}return F}function i(D,F){var H=D.sortIndex-F.sortIndex;return H!==0?H:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,d=null,h=3,p=!1,v=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var F=r(u);F!==null;){if(F.callback===null)n(u);else if(F.startTime<=D)n(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=r(u)}}function _(D){if(g=!1,x(D),!v)if(r(l)!==null)v=!0,P(b);else{var F=r(u);F!==null&&Z(_,F.startTime-D)}}function b(D,F){v=!1,g&&(g=!1,m(T),T=-1),p=!0;var H=h;try{for(x(F),d=r(l);d!==null&&(!(d.expirationTime>F)||D&&!R());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,h=d.priorityLevel;var ve=ee(d.expirationTime<=F);F=t.unstable_now(),typeof ve=="function"?d.callback=ve:d===r(l)&&n(l),x(F)}else n(l);d=r(l)}if(d!==null)var br=!0;else{var Sr=r(u);Sr!==null&&Z(_,Sr.startTime-F),br=!1}return br}finally{d=null,h=H,p=!1}}var S=!1,C=null,T=-1,L=5,I=-1;function R(){return!(t.unstable_now()-I<L)}function B(){if(C!==null){var D=t.unstable_now();I=D;var F=!0;try{F=C(!0,D)}finally{F?j():(S=!1,C=null)}}else S=!1}var j;if(typeof y=="function")j=function(){y(B)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,M=X.port2;X.port1.onmessage=B,j=function(){M.postMessage(null)}}else j=function(){w(B,0)};function P(D){C=D,S||(S=!0,j())}function Z(D,F){T=w(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(b))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var H=h;h=F;try{return D()}finally{h=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var H=h;h=D;try{return F()}finally{h=H}},t.unstable_scheduleCallback=function(D,F,H){var ee=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ee+H:ee):H=ee,D){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=H+ve,D={id:c++,callback:F,priorityLevel:D,startTime:H,expirationTime:ve,sortIndex:-1},H>ee?(D.sortIndex=H,e(u,D),r(l)===null&&D===r(u)&&(g?(m(T),T=-1):g=!0,Z(_,H-ee))):(D.sortIndex=ve,e(l,D),v||p||(v=!0,P(b))),D},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(D){var F=h;return function(){var H=h;h=F;try{return D.apply(this,arguments)}finally{h=H}}}})(z0);B0.exports=z0;var dg=B0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg=A,Ft=dg;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F0=new Set,Ia={};function Hn(t,e){Ni(t,e),Ni(t+"Capture",e)}function Ni(t,e){for(Ia[t]=e,t=0;t<e.length;t++)F0.add(e[t])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uu=Object.prototype.hasOwnProperty,hg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,of={},sf={};function pg(t){return uu.call(sf,t)?!0:uu.call(of,t)?!1:hg.test(t)?sf[t]=!0:(of[t]=!0,!1)}function vg(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mg(t,e,r,n){if(e===null||typeof e>"u"||vg(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _t(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new _t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new _t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new _t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new _t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new _t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new _t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new _t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new _t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new _t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mc=/[\-:]([a-z])/g;function Lc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mc,Lc);st[e]=new _t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mc,Lc);st[e]=new _t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mc,Lc);st[e]=new _t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new _t(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new _t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bc(t,e,r,n){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mg(e,r,i,n)&&(r=null),n||i===null?pg(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Mr=fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lo=Symbol.for("react.element"),ri=Symbol.for("react.portal"),ni=Symbol.for("react.fragment"),zc=Symbol.for("react.strict_mode"),cu=Symbol.for("react.profiler"),U0=Symbol.for("react.provider"),j0=Symbol.for("react.context"),Fc=Symbol.for("react.forward_ref"),du=Symbol.for("react.suspense"),fu=Symbol.for("react.suspense_list"),Uc=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),$0=Symbol.for("react.offscreen"),lf=Symbol.iterator;function Qi(t){return t===null||typeof t!="object"?null:(t=lf&&t[lf]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,wl;function ua(t){if(wl===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);wl=e&&e[1]||""}return`
`+wl+t}var _l=!1;function El(t,e){if(!t||_l)return"";_l=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{_l=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ua(t):""}function gg(t){switch(t.tag){case 5:return ua(t.type);case 16:return ua("Lazy");case 13:return ua("Suspense");case 19:return ua("SuspenseList");case 0:case 2:case 15:return t=El(t.type,!1),t;case 11:return t=El(t.type.render,!1),t;case 1:return t=El(t.type,!0),t;default:return""}}function hu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ni:return"Fragment";case ri:return"Portal";case cu:return"Profiler";case zc:return"StrictMode";case du:return"Suspense";case fu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case j0:return(t.displayName||"Context")+".Consumer";case U0:return(t._context.displayName||"Context")+".Provider";case Fc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uc:return e=t.displayName||null,e!==null?e:hu(t.type)||"Memo";case $r:e=t._payload,t=t._init;try{return hu(t(e))}catch{}}return null}function yg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hu(e);case 8:return e===zc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function V0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xg(t){var e=V0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uo(t){t._valueTracker||(t._valueTracker=xg(t))}function H0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=V0(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function as(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pu(t,e){var r=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function uf(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=cn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function W0(t,e){e=e.checked,e!=null&&Bc(t,"checked",e,!1)}function vu(t,e){W0(t,e);var r=cn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mu(t,e.type,r):e.hasOwnProperty("defaultValue")&&mu(t,e.type,cn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cf(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function mu(t,e,r){(e!=="number"||as(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ca=Array.isArray;function xi(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+cn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function df(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(z(92));if(ca(r)){if(1<r.length)throw Error(z(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:cn(r)}}function G0(t,e){var r=cn(e.value),n=cn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function ff(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var co,X0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(co=co||document.createElement("div"),co.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=co.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oa(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wg=["Webkit","ms","Moz","O"];Object.keys(ya).forEach(function(t){wg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ya[e]=ya[t]})});function K0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ya.hasOwnProperty(t)&&ya[t]?(""+e).trim():e+"px"}function Y0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=K0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var _g=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xu(t,e){if(e){if(_g[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function wu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _u=null;function jc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Eu=null,wi=null,_i=null;function hf(t){if(t=Ja(t)){if(typeof Eu!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Zs(e),Eu(t.stateNode,t.type,e))}}function Z0(t){wi?_i?_i.push(t):_i=[t]:wi=t}function Q0(){if(wi){var t=wi,e=_i;if(_i=wi=null,hf(t),e)for(t=0;t<e.length;t++)hf(e[t])}}function J0(t,e){return t(e)}function e1(){}var bl=!1;function t1(t,e,r){if(bl)return t(e,r);bl=!0;try{return J0(t,e,r)}finally{bl=!1,(wi!==null||_i!==null)&&(e1(),Q0())}}function Ta(t,e){var r=t.stateNode;if(r===null)return null;var n=Zs(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(z(231,e,typeof r));return r}var bu=!1;if(kr)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){bu=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{bu=!1}function Eg(t,e,r,n,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var xa=!1,os=null,ss=!1,Su=null,bg={onError:function(t){xa=!0,os=t}};function Sg(t,e,r,n,i,a,o,s,l){xa=!1,os=null,Eg.apply(bg,arguments)}function Cg(t,e,r,n,i,a,o,s,l){if(Sg.apply(this,arguments),xa){if(xa){var u=os;xa=!1,os=null}else throw Error(z(198));ss||(ss=!0,Su=u)}}function Wn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function r1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pf(t){if(Wn(t)!==t)throw Error(z(188))}function Ag(t){var e=t.alternate;if(!e){if(e=Wn(t),e===null)throw Error(z(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return pf(i),t;if(a===n)return pf(i),e;a=a.sibling}throw Error(z(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(z(189))}}if(r.alternate!==n)throw Error(z(190))}if(r.tag!==3)throw Error(z(188));return r.stateNode.current===r?t:e}function n1(t){return t=Ag(t),t!==null?i1(t):null}function i1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=i1(t);if(e!==null)return e;t=t.sibling}return null}var a1=Ft.unstable_scheduleCallback,vf=Ft.unstable_cancelCallback,Ng=Ft.unstable_shouldYield,Ig=Ft.unstable_requestPaint,Me=Ft.unstable_now,Og=Ft.unstable_getCurrentPriorityLevel,$c=Ft.unstable_ImmediatePriority,o1=Ft.unstable_UserBlockingPriority,ls=Ft.unstable_NormalPriority,Tg=Ft.unstable_LowPriority,s1=Ft.unstable_IdlePriority,qs=null,xr=null;function kg(t){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(qs,t,void 0,(t.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:Dg,Rg=Math.log,Pg=Math.LN2;function Dg(t){return t>>>=0,t===0?32:31-(Rg(t)/Pg|0)|0}var fo=64,ho=4194304;function da(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function us(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var s=o&~i;s!==0?n=da(s):(a&=o,a!==0&&(n=da(a)))}else o=r&~i,o!==0?n=da(o):a!==0&&(n=da(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-cr(e),i=1<<r,n|=t[r],e&=~i;return n}function Mg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lg(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-cr(a),s=1<<o,l=i[o];l===-1?(!(s&r)||s&n)&&(i[o]=Mg(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function Cu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function l1(){var t=fo;return fo<<=1,!(fo&4194240)&&(fo=64),t}function Sl(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Za(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cr(e),t[e]=r}function Bg(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-cr(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function Vc(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-cr(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var fe=0;function u1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var c1,Hc,d1,f1,h1,Au=!1,po=[],Qr=null,Jr=null,en=null,ka=new Map,Ra=new Map,Wr=[],zg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mf(t,e){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":ka.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ra.delete(e.pointerId)}}function ea(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ja(e),e!==null&&Hc(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Fg(t,e,r,n,i){switch(e){case"focusin":return Qr=ea(Qr,t,e,r,n,i),!0;case"dragenter":return Jr=ea(Jr,t,e,r,n,i),!0;case"mouseover":return en=ea(en,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return ka.set(a,ea(ka.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Ra.set(a,ea(Ra.get(a)||null,t,e,r,n,i)),!0}return!1}function p1(t){var e=Tn(t.target);if(e!==null){var r=Wn(e);if(r!==null){if(e=r.tag,e===13){if(e=r1(r),e!==null){t.blockedOn=e,h1(t.priority,function(){d1(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Nu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);_u=n,r.target.dispatchEvent(n),_u=null}else return e=Ja(r),e!==null&&Hc(e),t.blockedOn=r,!1;e.shift()}return!0}function gf(t,e,r){jo(t)&&r.delete(e)}function Ug(){Au=!1,Qr!==null&&jo(Qr)&&(Qr=null),Jr!==null&&jo(Jr)&&(Jr=null),en!==null&&jo(en)&&(en=null),ka.forEach(gf),Ra.forEach(gf)}function ta(t,e){t.blockedOn===e&&(t.blockedOn=null,Au||(Au=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,Ug)))}function Pa(t){function e(i){return ta(i,t)}if(0<po.length){ta(po[0],t);for(var r=1;r<po.length;r++){var n=po[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Qr!==null&&ta(Qr,t),Jr!==null&&ta(Jr,t),en!==null&&ta(en,t),ka.forEach(e),Ra.forEach(e),r=0;r<Wr.length;r++)n=Wr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Wr.length&&(r=Wr[0],r.blockedOn===null);)p1(r),r.blockedOn===null&&Wr.shift()}var Ei=Mr.ReactCurrentBatchConfig,cs=!0;function jg(t,e,r,n){var i=fe,a=Ei.transition;Ei.transition=null;try{fe=1,Wc(t,e,r,n)}finally{fe=i,Ei.transition=a}}function $g(t,e,r,n){var i=fe,a=Ei.transition;Ei.transition=null;try{fe=4,Wc(t,e,r,n)}finally{fe=i,Ei.transition=a}}function Wc(t,e,r,n){if(cs){var i=Nu(t,e,r,n);if(i===null)Dl(t,e,n,ds,r),mf(t,n);else if(Fg(i,t,e,r,n))n.stopPropagation();else if(mf(t,n),e&4&&-1<zg.indexOf(t)){for(;i!==null;){var a=Ja(i);if(a!==null&&c1(a),a=Nu(t,e,r,n),a===null&&Dl(t,e,n,ds,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Dl(t,e,n,null,r)}}var ds=null;function Nu(t,e,r,n){if(ds=null,t=jc(n),t=Tn(t),t!==null)if(e=Wn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=r1(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ds=t,null}function v1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Og()){case $c:return 1;case o1:return 4;case ls:case Tg:return 16;case s1:return 536870912;default:return 16}default:return 16}}var Kr=null,Gc=null,$o=null;function m1(){if($o)return $o;var t,e=Gc,r=e.length,n,i="value"in Kr?Kr.value:Kr.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return $o=i.slice(t,1<n?1-n:void 0)}function Vo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vo(){return!0}function yf(){return!1}function jt(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?vo:yf,this.isPropagationStopped=yf,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=vo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=vo)},persist:function(){},isPersistent:vo}),e}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qc=jt(zi),Qa=ke({},zi,{view:0,detail:0}),Vg=jt(Qa),Cl,Al,ra,Xs=ke({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ra&&(ra&&t.type==="mousemove"?(Cl=t.screenX-ra.screenX,Al=t.screenY-ra.screenY):Al=Cl=0,ra=t),Cl)},movementY:function(t){return"movementY"in t?t.movementY:Al}}),xf=jt(Xs),Hg=ke({},Xs,{dataTransfer:0}),Wg=jt(Hg),Gg=ke({},Qa,{relatedTarget:0}),Nl=jt(Gg),qg=ke({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Xg=jt(qg),Kg=ke({},zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yg=jt(Kg),Zg=ke({},zi,{data:0}),wf=jt(Zg),Qg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ty(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ey[t])?!!e[t]:!1}function Xc(){return ty}var ry=ke({},Qa,{key:function(t){if(t.key){var e=Qg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Jg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(t){return t.type==="keypress"?Vo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ny=jt(ry),iy=ke({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_f=jt(iy),ay=ke({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),oy=jt(ay),sy=ke({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ly=jt(sy),uy=ke({},Xs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cy=jt(uy),dy=[9,13,27,32],Kc=kr&&"CompositionEvent"in window,wa=null;kr&&"documentMode"in document&&(wa=document.documentMode);var fy=kr&&"TextEvent"in window&&!wa,g1=kr&&(!Kc||wa&&8<wa&&11>=wa),Ef=" ",bf=!1;function y1(t,e){switch(t){case"keyup":return dy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ii=!1;function hy(t,e){switch(t){case"compositionend":return x1(e);case"keypress":return e.which!==32?null:(bf=!0,Ef);case"textInput":return t=e.data,t===Ef&&bf?null:t;default:return null}}function py(t,e){if(ii)return t==="compositionend"||!Kc&&y1(t,e)?(t=m1(),$o=Gc=Kr=null,ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return g1&&e.locale!=="ko"?null:e.data;default:return null}}var vy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vy[t.type]:e==="textarea"}function w1(t,e,r,n){Z0(n),e=fs(e,"onChange"),0<e.length&&(r=new qc("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var _a=null,Da=null;function my(t){k1(t,0)}function Ks(t){var e=si(t);if(H0(e))return t}function gy(t,e){if(t==="change")return e}var _1=!1;if(kr){var Il;if(kr){var Ol="oninput"in document;if(!Ol){var Cf=document.createElement("div");Cf.setAttribute("oninput","return;"),Ol=typeof Cf.oninput=="function"}Il=Ol}else Il=!1;_1=Il&&(!document.documentMode||9<document.documentMode)}function Af(){_a&&(_a.detachEvent("onpropertychange",E1),Da=_a=null)}function E1(t){if(t.propertyName==="value"&&Ks(Da)){var e=[];w1(e,Da,t,jc(t)),t1(my,e)}}function yy(t,e,r){t==="focusin"?(Af(),_a=e,Da=r,_a.attachEvent("onpropertychange",E1)):t==="focusout"&&Af()}function xy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ks(Da)}function wy(t,e){if(t==="click")return Ks(e)}function _y(t,e){if(t==="input"||t==="change")return Ks(e)}function Ey(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:Ey;function Ma(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!uu.call(e,i)||!fr(t[i],e[i]))return!1}return!0}function Nf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function If(t,e){var r=Nf(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nf(r)}}function b1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?b1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function S1(){for(var t=window,e=as();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=as(t.document)}return e}function Yc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function by(t){var e=S1(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&b1(r.ownerDocument.documentElement,r)){if(n!==null&&Yc(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=If(r,a);var o=If(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sy=kr&&"documentMode"in document&&11>=document.documentMode,ai=null,Iu=null,Ea=null,Ou=!1;function Of(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ou||ai==null||ai!==as(n)||(n=ai,"selectionStart"in n&&Yc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ea&&Ma(Ea,n)||(Ea=n,n=fs(Iu,"onSelect"),0<n.length&&(e=new qc("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ai)))}function mo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var oi={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionend:mo("Transition","TransitionEnd")},Tl={},C1={};kr&&(C1=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function Ys(t){if(Tl[t])return Tl[t];if(!oi[t])return t;var e=oi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in C1)return Tl[t]=e[r];return t}var A1=Ys("animationend"),N1=Ys("animationiteration"),I1=Ys("animationstart"),O1=Ys("transitionend"),T1=new Map,Tf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fn(t,e){T1.set(t,e),Hn(e,[t])}for(var kl=0;kl<Tf.length;kl++){var Rl=Tf[kl],Cy=Rl.toLowerCase(),Ay=Rl[0].toUpperCase()+Rl.slice(1);fn(Cy,"on"+Ay)}fn(A1,"onAnimationEnd");fn(N1,"onAnimationIteration");fn(I1,"onAnimationStart");fn("dblclick","onDoubleClick");fn("focusin","onFocus");fn("focusout","onBlur");fn(O1,"onTransitionEnd");Ni("onMouseEnter",["mouseout","mouseover"]);Ni("onMouseLeave",["mouseout","mouseover"]);Ni("onPointerEnter",["pointerout","pointerover"]);Ni("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ny=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function kf(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Cg(n,e,void 0,t),t.currentTarget=null}function k1(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;kf(i,s,u),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;kf(i,s,u),a=l}}}if(ss)throw t=Su,ss=!1,Su=null,t}function xe(t,e){var r=e[Du];r===void 0&&(r=e[Du]=new Set);var n=t+"__bubble";r.has(n)||(R1(e,t,2,!1),r.add(n))}function Pl(t,e,r){var n=0;e&&(n|=4),R1(r,t,n,e)}var go="_reactListening"+Math.random().toString(36).slice(2);function La(t){if(!t[go]){t[go]=!0,F0.forEach(function(r){r!=="selectionchange"&&(Ny.has(r)||Pl(r,!1,t),Pl(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[go]||(e[go]=!0,Pl("selectionchange",!1,e))}}function R1(t,e,r,n){switch(v1(e)){case 1:var i=jg;break;case 4:i=$g;break;default:i=Wc}r=i.bind(null,e,r,t),i=void 0,!bu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Dl(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Tn(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}t1(function(){var u=a,c=jc(r),d=[];e:{var h=T1.get(t);if(h!==void 0){var p=qc,v=t;switch(t){case"keypress":if(Vo(r)===0)break e;case"keydown":case"keyup":p=ny;break;case"focusin":v="focus",p=Nl;break;case"focusout":v="blur",p=Nl;break;case"beforeblur":case"afterblur":p=Nl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=oy;break;case A1:case N1:case I1:p=Xg;break;case O1:p=ly;break;case"scroll":p=Vg;break;case"wheel":p=cy;break;case"copy":case"cut":case"paste":p=Yg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_f}var g=(e&4)!==0,w=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var y=u,x;y!==null;){x=y;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,m!==null&&(_=Ta(y,m),_!=null&&g.push(Ba(y,_,x)))),w)break;y=y.return}0<g.length&&(h=new p(h,v,null,r,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==_u&&(v=r.relatedTarget||r.fromElement)&&(Tn(v)||v[Rr]))break e;if((p||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?Tn(v):null,v!==null&&(w=Wn(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(g=xf,_="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=_f,_="onPointerLeave",m="onPointerEnter",y="pointer"),w=p==null?h:si(p),x=v==null?h:si(v),h=new g(_,y+"leave",p,r,c),h.target=w,h.relatedTarget=x,_=null,Tn(c)===u&&(g=new g(m,y+"enter",v,r,c),g.target=x,g.relatedTarget=w,_=g),w=_,p&&v)t:{for(g=p,m=v,y=0,x=g;x;x=Xn(x))y++;for(x=0,_=m;_;_=Xn(_))x++;for(;0<y-x;)g=Xn(g),y--;for(;0<x-y;)m=Xn(m),x--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Xn(g),m=Xn(m)}g=null}else g=null;p!==null&&Rf(d,h,p,g,!1),v!==null&&w!==null&&Rf(d,w,v,g,!0)}}e:{if(h=u?si(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var b=gy;else if(Sf(h))if(_1)b=_y;else{b=xy;var S=yy}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=wy);if(b&&(b=b(t,u))){w1(d,b,r,c);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&mu(h,"number",h.value)}switch(S=u?si(u):window,t){case"focusin":(Sf(S)||S.contentEditable==="true")&&(ai=S,Iu=u,Ea=null);break;case"focusout":Ea=Iu=ai=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,Of(d,r,c);break;case"selectionchange":if(Sy)break;case"keydown":case"keyup":Of(d,r,c)}var C;if(Kc)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ii?y1(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(g1&&r.locale!=="ko"&&(ii||T!=="onCompositionStart"?T==="onCompositionEnd"&&ii&&(C=m1()):(Kr=c,Gc="value"in Kr?Kr.value:Kr.textContent,ii=!0)),S=fs(u,T),0<S.length&&(T=new wf(T,t,null,r,c),d.push({event:T,listeners:S}),C?T.data=C:(C=x1(r),C!==null&&(T.data=C)))),(C=fy?hy(t,r):py(t,r))&&(u=fs(u,"onBeforeInput"),0<u.length&&(c=new wf("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:u}),c.data=C))}k1(d,e)})}function Ba(t,e,r){return{instance:t,listener:e,currentTarget:r}}function fs(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Ta(t,r),a!=null&&n.unshift(Ba(t,a,i)),a=Ta(t,e),a!=null&&n.push(Ba(t,a,i))),t=t.return}return n}function Xn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rf(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=Ta(r,a),l!=null&&o.unshift(Ba(r,l,s))):i||(l=Ta(r,a),l!=null&&o.push(Ba(r,l,s)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Iy=/\r\n?/g,Oy=/\u0000|\uFFFD/g;function Pf(t){return(typeof t=="string"?t:""+t).replace(Iy,`
`).replace(Oy,"")}function yo(t,e,r){if(e=Pf(e),Pf(t)!==e&&r)throw Error(z(425))}function hs(){}var Tu=null,ku=null;function Ru(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pu=typeof setTimeout=="function"?setTimeout:void 0,Ty=typeof clearTimeout=="function"?clearTimeout:void 0,Df=typeof Promise=="function"?Promise:void 0,ky=typeof queueMicrotask=="function"?queueMicrotask:typeof Df<"u"?function(t){return Df.resolve(null).then(t).catch(Ry)}:Pu;function Ry(t){setTimeout(function(){throw t})}function Ml(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Pa(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Pa(e)}function tn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Fi=Math.random().toString(36).slice(2),gr="__reactFiber$"+Fi,za="__reactProps$"+Fi,Rr="__reactContainer$"+Fi,Du="__reactEvents$"+Fi,Py="__reactListeners$"+Fi,Dy="__reactHandles$"+Fi;function Tn(t){var e=t[gr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Rr]||r[gr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Mf(t);t!==null;){if(r=t[gr])return r;t=Mf(t)}return e}t=r,r=t.parentNode}return null}function Ja(t){return t=t[gr]||t[Rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function si(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Zs(t){return t[za]||null}var Mu=[],li=-1;function hn(t){return{current:t}}function Ee(t){0>li||(t.current=Mu[li],Mu[li]=null,li--)}function ge(t,e){li++,Mu[li]=t.current,t.current=e}var dn={},ht=hn(dn),It=hn(!1),Fn=dn;function Ii(t,e){var r=t.type.contextTypes;if(!r)return dn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ot(t){return t=t.childContextTypes,t!=null}function ps(){Ee(It),Ee(ht)}function Lf(t,e,r){if(ht.current!==dn)throw Error(z(168));ge(ht,e),ge(It,r)}function P1(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(z(108,yg(t)||"Unknown",i));return ke({},r,n)}function vs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dn,Fn=ht.current,ge(ht,t),ge(It,It.current),!0}function Bf(t,e,r){var n=t.stateNode;if(!n)throw Error(z(169));r?(t=P1(t,e,Fn),n.__reactInternalMemoizedMergedChildContext=t,Ee(It),Ee(ht),ge(ht,t)):Ee(It),ge(It,r)}var Nr=null,Qs=!1,Ll=!1;function D1(t){Nr===null?Nr=[t]:Nr.push(t)}function My(t){Qs=!0,D1(t)}function pn(){if(!Ll&&Nr!==null){Ll=!0;var t=0,e=fe;try{var r=Nr;for(fe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Nr=null,Qs=!1}catch(i){throw Nr!==null&&(Nr=Nr.slice(t+1)),a1($c,pn),i}finally{fe=e,Ll=!1}}return null}var ui=[],ci=0,ms=null,gs=0,Vt=[],Ht=0,Un=null,Ir=1,Or="";function En(t,e){ui[ci++]=gs,ui[ci++]=ms,ms=t,gs=e}function M1(t,e,r){Vt[Ht++]=Ir,Vt[Ht++]=Or,Vt[Ht++]=Un,Un=t;var n=Ir;t=Or;var i=32-cr(n)-1;n&=~(1<<i),r+=1;var a=32-cr(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ir=1<<32-cr(e)+i|r<<i|n,Or=a+t}else Ir=1<<a|r<<i|n,Or=t}function Zc(t){t.return!==null&&(En(t,1),M1(t,1,0))}function Qc(t){for(;t===ms;)ms=ui[--ci],ui[ci]=null,gs=ui[--ci],ui[ci]=null;for(;t===Un;)Un=Vt[--Ht],Vt[Ht]=null,Or=Vt[--Ht],Vt[Ht]=null,Ir=Vt[--Ht],Vt[Ht]=null}var zt=null,Bt=null,Ce=!1,sr=null;function L1(t,e){var r=Wt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function zf(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Bt=tn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Un!==null?{id:Ir,overflow:Or}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Wt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,zt=t,Bt=null,!0):!1;default:return!1}}function Lu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bu(t){if(Ce){var e=Bt;if(e){var r=e;if(!zf(t,e)){if(Lu(t))throw Error(z(418));e=tn(r.nextSibling);var n=zt;e&&zf(t,e)?L1(n,r):(t.flags=t.flags&-4097|2,Ce=!1,zt=t)}}else{if(Lu(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ce=!1,zt=t}}}function Ff(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function xo(t){if(t!==zt)return!1;if(!Ce)return Ff(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ru(t.type,t.memoizedProps)),e&&(e=Bt)){if(Lu(t))throw B1(),Error(z(418));for(;e;)L1(t,e),e=tn(e.nextSibling)}if(Ff(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Bt=tn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=zt?tn(t.stateNode.nextSibling):null;return!0}function B1(){for(var t=Bt;t;)t=tn(t.nextSibling)}function Oi(){Bt=zt=null,Ce=!1}function Jc(t){sr===null?sr=[t]:sr.push(t)}var Ly=Mr.ReactCurrentBatchConfig;function na(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(z(309));var n=r.stateNode}if(!n)throw Error(z(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(z(284));if(!r._owner)throw Error(z(290,t))}return t}function wo(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uf(t){var e=t._init;return e(t._payload)}function z1(t){function e(m,y){if(t){var x=m.deletions;x===null?(m.deletions=[y],m.flags|=16):x.push(y)}}function r(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function n(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=on(m,y),m.index=0,m.sibling=null,m}function a(m,y,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<y?(m.flags|=2,y):x):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function s(m,y,x,_){return y===null||y.tag!==6?(y=Vl(x,m.mode,_),y.return=m,y):(y=i(y,x),y.return=m,y)}function l(m,y,x,_){var b=x.type;return b===ni?c(m,y,x.props.children,_,x.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$r&&Uf(b)===y.type)?(_=i(y,x.props),_.ref=na(m,y,x),_.return=m,_):(_=Yo(x.type,x.key,x.props,null,m.mode,_),_.ref=na(m,y,x),_.return=m,_)}function u(m,y,x,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Hl(x,m.mode,_),y.return=m,y):(y=i(y,x.children||[]),y.return=m,y)}function c(m,y,x,_,b){return y===null||y.tag!==7?(y=Ln(x,m.mode,_,b),y.return=m,y):(y=i(y,x),y.return=m,y)}function d(m,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Vl(""+y,m.mode,x),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case lo:return x=Yo(y.type,y.key,y.props,null,m.mode,x),x.ref=na(m,null,y),x.return=m,x;case ri:return y=Hl(y,m.mode,x),y.return=m,y;case $r:var _=y._init;return d(m,_(y._payload),x)}if(ca(y)||Qi(y))return y=Ln(y,m.mode,x,null),y.return=m,y;wo(m,y)}return null}function h(m,y,x,_){var b=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:s(m,y,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case lo:return x.key===b?l(m,y,x,_):null;case ri:return x.key===b?u(m,y,x,_):null;case $r:return b=x._init,h(m,y,b(x._payload),_)}if(ca(x)||Qi(x))return b!==null?null:c(m,y,x,_,null);wo(m,x)}return null}function p(m,y,x,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(x)||null,s(y,m,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case lo:return m=m.get(_.key===null?x:_.key)||null,l(y,m,_,b);case ri:return m=m.get(_.key===null?x:_.key)||null,u(y,m,_,b);case $r:var S=_._init;return p(m,y,x,S(_._payload),b)}if(ca(_)||Qi(_))return m=m.get(x)||null,c(y,m,_,b,null);wo(y,_)}return null}function v(m,y,x,_){for(var b=null,S=null,C=y,T=y=0,L=null;C!==null&&T<x.length;T++){C.index>T?(L=C,C=null):L=C.sibling;var I=h(m,C,x[T],_);if(I===null){C===null&&(C=L);break}t&&C&&I.alternate===null&&e(m,C),y=a(I,y,T),S===null?b=I:S.sibling=I,S=I,C=L}if(T===x.length)return r(m,C),Ce&&En(m,T),b;if(C===null){for(;T<x.length;T++)C=d(m,x[T],_),C!==null&&(y=a(C,y,T),S===null?b=C:S.sibling=C,S=C);return Ce&&En(m,T),b}for(C=n(m,C);T<x.length;T++)L=p(C,m,T,x[T],_),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?T:L.key),y=a(L,y,T),S===null?b=L:S.sibling=L,S=L);return t&&C.forEach(function(R){return e(m,R)}),Ce&&En(m,T),b}function g(m,y,x,_){var b=Qi(x);if(typeof b!="function")throw Error(z(150));if(x=b.call(x),x==null)throw Error(z(151));for(var S=b=null,C=y,T=y=0,L=null,I=x.next();C!==null&&!I.done;T++,I=x.next()){C.index>T?(L=C,C=null):L=C.sibling;var R=h(m,C,I.value,_);if(R===null){C===null&&(C=L);break}t&&C&&R.alternate===null&&e(m,C),y=a(R,y,T),S===null?b=R:S.sibling=R,S=R,C=L}if(I.done)return r(m,C),Ce&&En(m,T),b;if(C===null){for(;!I.done;T++,I=x.next())I=d(m,I.value,_),I!==null&&(y=a(I,y,T),S===null?b=I:S.sibling=I,S=I);return Ce&&En(m,T),b}for(C=n(m,C);!I.done;T++,I=x.next())I=p(C,m,T,I.value,_),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?T:I.key),y=a(I,y,T),S===null?b=I:S.sibling=I,S=I);return t&&C.forEach(function(B){return e(m,B)}),Ce&&En(m,T),b}function w(m,y,x,_){if(typeof x=="object"&&x!==null&&x.type===ni&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case lo:e:{for(var b=x.key,S=y;S!==null;){if(S.key===b){if(b=x.type,b===ni){if(S.tag===7){r(m,S.sibling),y=i(S,x.props.children),y.return=m,m=y;break e}}else if(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$r&&Uf(b)===S.type){r(m,S.sibling),y=i(S,x.props),y.ref=na(m,S,x),y.return=m,m=y;break e}r(m,S);break}else e(m,S);S=S.sibling}x.type===ni?(y=Ln(x.props.children,m.mode,_,x.key),y.return=m,m=y):(_=Yo(x.type,x.key,x.props,null,m.mode,_),_.ref=na(m,y,x),_.return=m,m=_)}return o(m);case ri:e:{for(S=x.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){r(m,y.sibling),y=i(y,x.children||[]),y.return=m,m=y;break e}else{r(m,y);break}else e(m,y);y=y.sibling}y=Hl(x,m.mode,_),y.return=m,m=y}return o(m);case $r:return S=x._init,w(m,y,S(x._payload),_)}if(ca(x))return v(m,y,x,_);if(Qi(x))return g(m,y,x,_);wo(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(r(m,y.sibling),y=i(y,x),y.return=m,m=y):(r(m,y),y=Vl(x,m.mode,_),y.return=m,m=y),o(m)):r(m,y)}return w}var Ti=z1(!0),F1=z1(!1),ys=hn(null),xs=null,di=null,ed=null;function td(){ed=di=xs=null}function rd(t){var e=ys.current;Ee(ys),t._currentValue=e}function zu(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function bi(t,e){xs=t,ed=di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(ed!==t)if(t={context:t,memoizedValue:e,next:null},di===null){if(xs===null)throw Error(z(308));di=t,xs.dependencies={lanes:0,firstContext:t}}else di=di.next=t;return e}var kn=null;function nd(t){kn===null?kn=[t]:kn.push(t)}function U1(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,nd(e)):(r.next=i.next,i.next=r),e.interleaved=r,Pr(t,n)}function Pr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Vr=!1;function id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ae&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Pr(t,r)}return i=n.interleaved,i===null?(e.next=e,nd(n)):(e.next=i.next,i.next=e),n.interleaved=e,Pr(t,r)}function Ho(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Vc(t,r)}}function jf(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ws(t,e,r,n){var i=t.updateQueue;Vr=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;o=0,c=u=l=null,s=a;do{var h=s.lane,p=s.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=t,g=s;switch(h=e,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){d=v.call(p,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,h=typeof v=="function"?v.call(p,d,h):v,h==null)break e;d=ke({},d,h);break e;case 2:Vr=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);$n|=o,t.lanes=o,t.memoizedState=d}}function $f(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(z(191,i));i.call(n)}}}var eo={},wr=hn(eo),Fa=hn(eo),Ua=hn(eo);function Rn(t){if(t===eo)throw Error(z(174));return t}function ad(t,e){switch(ge(Ua,e),ge(Fa,t),ge(wr,eo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yu(e,t)}Ee(wr),ge(wr,e)}function ki(){Ee(wr),Ee(Fa),Ee(Ua)}function $1(t){Rn(Ua.current);var e=Rn(wr.current),r=yu(e,t.type);e!==r&&(ge(Fa,t),ge(wr,r))}function od(t){Fa.current===t&&(Ee(wr),Ee(Fa))}var Ie=hn(0);function _s(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bl=[];function sd(){for(var t=0;t<Bl.length;t++)Bl[t]._workInProgressVersionPrimary=null;Bl.length=0}var Wo=Mr.ReactCurrentDispatcher,zl=Mr.ReactCurrentBatchConfig,jn=0,Oe=null,Ve=null,Ze=null,Es=!1,ba=!1,ja=0,By=0;function lt(){throw Error(z(321))}function ld(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!fr(t[r],e[r]))return!1;return!0}function ud(t,e,r,n,i,a){if(jn=a,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wo.current=t===null||t.memoizedState===null?jy:$y,t=r(n,i),ba){a=0;do{if(ba=!1,ja=0,25<=a)throw Error(z(301));a+=1,Ze=Ve=null,e.updateQueue=null,Wo.current=Vy,t=r(n,i)}while(ba)}if(Wo.current=bs,e=Ve!==null&&Ve.next!==null,jn=0,Ze=Ve=Oe=null,Es=!1,e)throw Error(z(300));return t}function cd(){var t=ja!==0;return ja=0,t}function vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Oe.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function Yt(){if(Ve===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=Ze===null?Oe.memoizedState:Ze.next;if(e!==null)Ze=e,Ve=t;else{if(t===null)throw Error(z(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Ze===null?Oe.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function $a(t,e){return typeof e=="function"?e(t):e}function Fl(t){var e=Yt(),r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var n=Ve,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,u=a;do{var c=u.lane;if((jn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,Oe.lanes|=c,$n|=c}u=u.next}while(u!==null&&u!==a);l===null?o=n:l.next=s,fr(n,e.memoizedState)||(Nt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,Oe.lanes|=a,$n|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ul(t){var e=Yt(),r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);fr(a,e.memoizedState)||(Nt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function V1(){}function H1(t,e){var r=Oe,n=Yt(),i=e(),a=!fr(n.memoizedState,i);if(a&&(n.memoizedState=i,Nt=!0),n=n.queue,dd(q1.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Ze!==null&&Ze.memoizedState.tag&1){if(r.flags|=2048,Va(9,G1.bind(null,r,n,i,e),void 0,null),Je===null)throw Error(z(349));jn&30||W1(r,e,i)}return i}function W1(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function G1(t,e,r,n){e.value=r,e.getSnapshot=n,X1(e)&&K1(t)}function q1(t,e,r){return r(function(){X1(e)&&K1(t)})}function X1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!fr(t,r)}catch{return!0}}function K1(t){var e=Pr(t,1);e!==null&&dr(e,t,1,-1)}function Vf(t){var e=vr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t},e.queue=t,t=t.dispatch=Uy.bind(null,Oe,t),[e.memoizedState,t]}function Va(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Y1(){return Yt().memoizedState}function Go(t,e,r,n){var i=vr();Oe.flags|=t,i.memoizedState=Va(1|e,r,void 0,n===void 0?null:n)}function Js(t,e,r,n){var i=Yt();n=n===void 0?null:n;var a=void 0;if(Ve!==null){var o=Ve.memoizedState;if(a=o.destroy,n!==null&&ld(n,o.deps)){i.memoizedState=Va(e,r,a,n);return}}Oe.flags|=t,i.memoizedState=Va(1|e,r,a,n)}function Hf(t,e){return Go(8390656,8,t,e)}function dd(t,e){return Js(2048,8,t,e)}function Z1(t,e){return Js(4,2,t,e)}function Q1(t,e){return Js(4,4,t,e)}function J1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ep(t,e,r){return r=r!=null?r.concat([t]):null,Js(4,4,J1.bind(null,e,t),r)}function fd(){}function tp(t,e){var r=Yt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ld(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function rp(t,e){var r=Yt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ld(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function np(t,e,r){return jn&21?(fr(r,e)||(r=l1(),Oe.lanes|=r,$n|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=r)}function zy(t,e){var r=fe;fe=r!==0&&4>r?r:4,t(!0);var n=zl.transition;zl.transition={};try{t(!1),e()}finally{fe=r,zl.transition=n}}function ip(){return Yt().memoizedState}function Fy(t,e,r){var n=an(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ap(t))op(e,r);else if(r=U1(t,e,r,n),r!==null){var i=xt();dr(r,t,n,i),sp(r,e,n)}}function Uy(t,e,r){var n=an(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ap(t))op(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,fr(s,o)){var l=e.interleaved;l===null?(i.next=i,nd(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=U1(t,e,i,n),r!==null&&(i=xt(),dr(r,t,n,i),sp(r,e,n))}}function ap(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function op(t,e){ba=Es=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function sp(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Vc(t,r)}}var bs={readContext:Kt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},jy={readContext:Kt,useCallback:function(t,e){return vr().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:Hf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Go(4194308,4,J1.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Go(4194308,4,t,e)},useInsertionEffect:function(t,e){return Go(4,2,t,e)},useMemo:function(t,e){var r=vr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=vr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Fy.bind(null,Oe,t),[n.memoizedState,t]},useRef:function(t){var e=vr();return t={current:t},e.memoizedState=t},useState:Vf,useDebugValue:fd,useDeferredValue:function(t){return vr().memoizedState=t},useTransition:function(){var t=Vf(!1),e=t[0];return t=zy.bind(null,t[1]),vr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Oe,i=vr();if(Ce){if(r===void 0)throw Error(z(407));r=r()}else{if(r=e(),Je===null)throw Error(z(349));jn&30||W1(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,Hf(q1.bind(null,n,a,t),[t]),n.flags|=2048,Va(9,G1.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=vr(),e=Je.identifierPrefix;if(Ce){var r=Or,n=Ir;r=(n&~(1<<32-cr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ja++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=By++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$y={readContext:Kt,useCallback:tp,useContext:Kt,useEffect:dd,useImperativeHandle:ep,useInsertionEffect:Z1,useLayoutEffect:Q1,useMemo:rp,useReducer:Fl,useRef:Y1,useState:function(){return Fl($a)},useDebugValue:fd,useDeferredValue:function(t){var e=Yt();return np(e,Ve.memoizedState,t)},useTransition:function(){var t=Fl($a)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:V1,useSyncExternalStore:H1,useId:ip,unstable_isNewReconciler:!1},Vy={readContext:Kt,useCallback:tp,useContext:Kt,useEffect:dd,useImperativeHandle:ep,useInsertionEffect:Z1,useLayoutEffect:Q1,useMemo:rp,useReducer:Ul,useRef:Y1,useState:function(){return Ul($a)},useDebugValue:fd,useDeferredValue:function(t){var e=Yt();return Ve===null?e.memoizedState=t:np(e,Ve.memoizedState,t)},useTransition:function(){var t=Ul($a)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:V1,useSyncExternalStore:H1,useId:ip,unstable_isNewReconciler:!1};function nr(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Fu(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ke({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var el={isMounted:function(t){return(t=t._reactInternals)?Wn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=xt(),i=an(t),a=Tr(n,i);a.payload=e,r!=null&&(a.callback=r),e=rn(t,a,i),e!==null&&(dr(e,t,i,n),Ho(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=xt(),i=an(t),a=Tr(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=rn(t,a,i),e!==null&&(dr(e,t,i,n),Ho(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=xt(),n=an(t),i=Tr(r,n);i.tag=2,e!=null&&(i.callback=e),e=rn(t,i,n),e!==null&&(dr(e,t,n,r),Ho(e,t,n))}};function Wf(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Ma(r,n)||!Ma(i,a):!0}function lp(t,e,r){var n=!1,i=dn,a=e.contextType;return typeof a=="object"&&a!==null?a=Kt(a):(i=Ot(e)?Fn:ht.current,n=e.contextTypes,a=(n=n!=null)?Ii(t,i):dn),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=el,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Gf(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&el.enqueueReplaceState(e,e.state,null)}function Uu(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},id(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Kt(a):(a=Ot(e)?Fn:ht.current,i.context=Ii(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Fu(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&el.enqueueReplaceState(i,i.state,null),ws(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ri(t,e){try{var r="",n=e;do r+=gg(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function jl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function ju(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Hy=typeof WeakMap=="function"?WeakMap:Map;function up(t,e,r){r=Tr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Cs||(Cs=!0,Zu=n),ju(t,e)},r}function cp(t,e,r){r=Tr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){ju(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){ju(t,e),typeof n!="function"&&(nn===null?nn=new Set([this]):nn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function qf(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Hy;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=ix.bind(null,t,e,r),e.then(t,t))}function Xf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Kf(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Tr(-1,1),e.tag=2,rn(r,e,1))),r.lanes|=1),t)}var Wy=Mr.ReactCurrentOwner,Nt=!1;function yt(t,e,r,n){e.child=t===null?F1(e,null,r,n):Ti(e,t.child,r,n)}function Yf(t,e,r,n,i){r=r.render;var a=e.ref;return bi(e,i),n=ud(t,e,r,n,a,i),r=cd(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dr(t,e,i)):(Ce&&r&&Zc(e),e.flags|=1,yt(t,e,n,i),e.child)}function Zf(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!wd(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,dp(t,e,a,n,i)):(t=Yo(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Ma,r(o,n)&&t.ref===e.ref)return Dr(t,e,i)}return e.flags|=1,t=on(a,n),t.ref=e.ref,t.return=e,e.child=t}function dp(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(Ma(a,n)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,Dr(t,e,i)}return $u(t,e,r,n,i)}function fp(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(hi,Dt),Dt|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(hi,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,ge(hi,Dt),Dt|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,ge(hi,Dt),Dt|=n;return yt(t,e,i,r),e.child}function hp(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function $u(t,e,r,n,i){var a=Ot(r)?Fn:ht.current;return a=Ii(e,a),bi(e,i),r=ud(t,e,r,n,a,i),n=cd(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dr(t,e,i)):(Ce&&n&&Zc(e),e.flags|=1,yt(t,e,r,i),e.child)}function Qf(t,e,r,n,i){if(Ot(r)){var a=!0;vs(e)}else a=!1;if(bi(e,i),e.stateNode===null)qo(t,e),lp(e,r,n),Uu(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Kt(u):(u=Ot(r)?Fn:ht.current,u=Ii(e,u));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&Gf(e,o,n,u),Vr=!1;var h=e.memoizedState;o.state=h,ws(e,n,o,i),l=e.memoizedState,s!==n||h!==l||It.current||Vr?(typeof c=="function"&&(Fu(e,r,c,n),l=e.memoizedState),(s=Vr||Wf(e,r,s,n,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,j1(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:nr(e.type,s),o.props=u,d=e.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Kt(l):(l=Ot(r)?Fn:ht.current,l=Ii(e,l));var p=r.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||h!==l)&&Gf(e,o,n,l),Vr=!1,h=e.memoizedState,o.state=h,ws(e,n,o,i);var v=e.memoizedState;s!==d||h!==v||It.current||Vr?(typeof p=="function"&&(Fu(e,r,p,n),v=e.memoizedState),(u=Vr||Wf(e,r,u,n,h,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),o.props=n,o.state=v,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Vu(t,e,r,n,a,i)}function Vu(t,e,r,n,i,a){hp(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Bf(e,r,!1),Dr(t,e,a);n=e.stateNode,Wy.current=e;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ti(e,t.child,null,a),e.child=Ti(e,null,s,a)):yt(t,e,s,a),e.memoizedState=n.state,i&&Bf(e,r,!0),e.child}function pp(t){var e=t.stateNode;e.pendingContext?Lf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lf(t,e.context,!1),ad(t,e.containerInfo)}function Jf(t,e,r,n,i){return Oi(),Jc(i),e.flags|=256,yt(t,e,r,n),e.child}var Hu={dehydrated:null,treeContext:null,retryLane:0};function Wu(t){return{baseLanes:t,cachePool:null,transitions:null}}function vp(t,e,r){var n=e.pendingProps,i=Ie.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ge(Ie,i&1),t===null)return Bu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=nl(o,n,0,null),t=Ln(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Wu(r),e.memoizedState=Hu,t):hd(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Gy(t,e,o,n,s,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=on(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=on(s,a):(a=Ln(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Wu(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Hu,n}return a=t.child,t=a.sibling,n=on(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function hd(t,e){return e=nl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _o(t,e,r,n){return n!==null&&Jc(n),Ti(e,t.child,null,r),t=hd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gy(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=jl(Error(z(422))),_o(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=nl({mode:"visible",children:n.children},i,0,null),a=Ln(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Ti(e,t.child,null,o),e.child.memoizedState=Wu(o),e.memoizedState=Hu,a);if(!(e.mode&1))return _o(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(z(419)),n=jl(a,n,void 0),_o(t,e,o,n)}if(s=(o&t.childLanes)!==0,Nt||s){if(n=Je,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Pr(t,i),dr(n,t,i,-1))}return xd(),n=jl(Error(z(421))),_o(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ax.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Bt=tn(i.nextSibling),zt=e,Ce=!0,sr=null,t!==null&&(Vt[Ht++]=Ir,Vt[Ht++]=Or,Vt[Ht++]=Un,Ir=t.id,Or=t.overflow,Un=e),e=hd(e,n.children),e.flags|=4096,e)}function eh(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),zu(t.return,e,r)}function $l(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function mp(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(yt(t,e,n.children,r),n=Ie.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eh(t,r,e);else if(t.tag===19)eh(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ge(Ie,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&_s(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),$l(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_s(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}$l(e,!0,r,null,a);break;case"together":$l(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),$n|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,r=on(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=on(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function qy(t,e,r){switch(e.tag){case 3:pp(e),Oi();break;case 5:$1(e);break;case 1:Ot(e.type)&&vs(e);break;case 4:ad(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ge(ys,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ge(Ie,Ie.current&1),e.flags|=128,null):r&e.child.childLanes?vp(t,e,r):(ge(Ie,Ie.current&1),t=Dr(t,e,r),t!==null?t.sibling:null);ge(Ie,Ie.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return mp(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(Ie,Ie.current),n)break;return null;case 22:case 23:return e.lanes=0,fp(t,e,r)}return Dr(t,e,r)}var gp,Gu,yp,xp;gp=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Gu=function(){};yp=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Rn(wr.current);var a=null;switch(r){case"input":i=pu(t,i),n=pu(t,n),a=[];break;case"select":i=ke({},i,{value:void 0}),n=ke({},n,{value:void 0}),a=[];break;case"textarea":i=gu(t,i),n=gu(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=hs)}xu(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ia.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&xe("scroll",t),a||s===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};xp=function(t,e,r,n){r!==n&&(e.flags|=4)};function ia(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Xy(t,e,r){var n=e.pendingProps;switch(Qc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Ot(e.type)&&ps(),ut(e),null;case 3:return n=e.stateNode,ki(),Ee(It),Ee(ht),sd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(xo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sr!==null&&(ec(sr),sr=null))),Gu(t,e),ut(e),null;case 5:od(e);var i=Rn(Ua.current);if(r=e.type,t!==null&&e.stateNode!=null)yp(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(z(166));return ut(e),null}if(t=Rn(wr.current),xo(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[gr]=e,n[za]=a,t=(e.mode&1)!==0,r){case"dialog":xe("cancel",n),xe("close",n);break;case"iframe":case"object":case"embed":xe("load",n);break;case"video":case"audio":for(i=0;i<fa.length;i++)xe(fa[i],n);break;case"source":xe("error",n);break;case"img":case"image":case"link":xe("error",n),xe("load",n);break;case"details":xe("toggle",n);break;case"input":uf(n,a),xe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},xe("invalid",n);break;case"textarea":df(n,a),xe("invalid",n)}xu(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&yo(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&yo(n.textContent,s,t),i=["children",""+s]):Ia.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&xe("scroll",n)}switch(r){case"input":uo(n),cf(n,a,!0);break;case"textarea":uo(n),ff(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=hs)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[gr]=e,t[za]=n,gp(t,e,!1,!1),e.stateNode=t;e:{switch(o=wu(r,n),r){case"dialog":xe("cancel",t),xe("close",t),i=n;break;case"iframe":case"object":case"embed":xe("load",t),i=n;break;case"video":case"audio":for(i=0;i<fa.length;i++)xe(fa[i],t);i=n;break;case"source":xe("error",t),i=n;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=n;break;case"details":xe("toggle",t),i=n;break;case"input":uf(t,n),i=pu(t,n),xe("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ke({},n,{value:void 0}),xe("invalid",t);break;case"textarea":df(t,n),i=gu(t,n),xe("invalid",t);break;default:i=n}xu(r,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?Y0(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X0(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Oa(t,l):typeof l=="number"&&Oa(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ia.hasOwnProperty(a)?l!=null&&a==="onScroll"&&xe("scroll",t):l!=null&&Bc(t,a,l,o))}switch(r){case"input":uo(t),cf(t,n,!1);break;case"textarea":uo(t),ff(t);break;case"option":n.value!=null&&t.setAttribute("value",""+cn(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?xi(t,!!n.multiple,a,!1):n.defaultValue!=null&&xi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hs)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)xp(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(z(166));if(r=Rn(Ua.current),Rn(wr.current),xo(e)){if(n=e.stateNode,r=e.memoizedProps,n[gr]=e,(a=n.nodeValue!==r)&&(t=zt,t!==null))switch(t.tag){case 3:yo(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yo(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[gr]=e,e.stateNode=n}return ut(e),null;case 13:if(Ee(Ie),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Bt!==null&&e.mode&1&&!(e.flags&128))B1(),Oi(),e.flags|=98560,a=!1;else if(a=xo(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(z(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(z(317));a[gr]=e}else Oi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),a=!1}else sr!==null&&(ec(sr),sr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?qe===0&&(qe=3):xd())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return ki(),Gu(t,e),t===null&&La(e.stateNode.containerInfo),ut(e),null;case 10:return rd(e.type._context),ut(e),null;case 17:return Ot(e.type)&&ps(),ut(e),null;case 19:if(Ee(Ie),a=e.memoizedState,a===null)return ut(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)ia(a,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_s(t),o!==null){for(e.flags|=128,ia(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ge(Ie,Ie.current&1|2),e.child}t=t.sibling}a.tail!==null&&Me()>Pi&&(e.flags|=128,n=!0,ia(a,!1),e.lanes=4194304)}else{if(!n)if(t=_s(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ia(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ce)return ut(e),null}else 2*Me()-a.renderingStartTime>Pi&&r!==1073741824&&(e.flags|=128,n=!0,ia(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Me(),e.sibling=null,r=Ie.current,ge(Ie,n?r&1|2:r&1),e):(ut(e),null);case 22:case 23:return yd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Dt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function Ky(t,e){switch(Qc(e),e.tag){case 1:return Ot(e.type)&&ps(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ki(),Ee(It),Ee(ht),sd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return od(e),null;case 13:if(Ee(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ie),null;case 4:return ki(),null;case 10:return rd(e.type._context),null;case 22:case 23:return yd(),null;case 24:return null;default:return null}}var Eo=!1,dt=!1,Yy=typeof WeakSet=="function"?WeakSet:Set,$=null;function fi(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Re(t,e,n)}else r.current=null}function qu(t,e,r){try{r()}catch(n){Re(t,e,n)}}var th=!1;function Zy(t,e){if(Tu=cs,t=S1(),Yc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var p;d!==r||i!==0&&d.nodeType!==3||(s=o+i),d!==a||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===r&&++u===i&&(s=o),h===a&&++c===n&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ku={focusedElem:t,selectionRange:r},cs=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,w=v.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:nr(e.type,g),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(_){Re(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return v=th,th=!1,v}function Sa(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&qu(e,r,a)}i=i.next}while(i!==n)}}function tl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Xu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function wp(t){var e=t.alternate;e!==null&&(t.alternate=null,wp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gr],delete e[za],delete e[Du],delete e[Py],delete e[Dy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _p(t){return t.tag===5||t.tag===3||t.tag===4}function rh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_p(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ku(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=hs));else if(n!==4&&(t=t.child,t!==null))for(Ku(t,e,r),t=t.sibling;t!==null;)Ku(t,e,r),t=t.sibling}function Yu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Yu(t,e,r),t=t.sibling;t!==null;)Yu(t,e,r),t=t.sibling}var it=null,ar=!1;function Fr(t,e,r){for(r=r.child;r!==null;)Ep(t,e,r),r=r.sibling}function Ep(t,e,r){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(qs,r)}catch{}switch(r.tag){case 5:dt||fi(r,e);case 6:var n=it,i=ar;it=null,Fr(t,e,r),it=n,ar=i,it!==null&&(ar?(t=it,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):it.removeChild(r.stateNode));break;case 18:it!==null&&(ar?(t=it,r=r.stateNode,t.nodeType===8?Ml(t.parentNode,r):t.nodeType===1&&Ml(t,r),Pa(t)):Ml(it,r.stateNode));break;case 4:n=it,i=ar,it=r.stateNode.containerInfo,ar=!0,Fr(t,e,r),it=n,ar=i;break;case 0:case 11:case 14:case 15:if(!dt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&qu(r,e,o),i=i.next}while(i!==n)}Fr(t,e,r);break;case 1:if(!dt&&(fi(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Re(r,e,s)}Fr(t,e,r);break;case 21:Fr(t,e,r);break;case 22:r.mode&1?(dt=(n=dt)||r.memoizedState!==null,Fr(t,e,r),dt=n):Fr(t,e,r);break;default:Fr(t,e,r)}}function nh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Yy),e.forEach(function(n){var i=ox.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function er(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:it=s.stateNode,ar=!1;break e;case 3:it=s.stateNode.containerInfo,ar=!0;break e;case 4:it=s.stateNode.containerInfo,ar=!0;break e}s=s.return}if(it===null)throw Error(z(160));Ep(a,o,i),it=null,ar=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Re(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bp(e,t),e=e.sibling}function bp(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(er(e,t),pr(t),n&4){try{Sa(3,t,t.return),tl(3,t)}catch(g){Re(t,t.return,g)}try{Sa(5,t,t.return)}catch(g){Re(t,t.return,g)}}break;case 1:er(e,t),pr(t),n&512&&r!==null&&fi(r,r.return);break;case 5:if(er(e,t),pr(t),n&512&&r!==null&&fi(r,r.return),t.flags&32){var i=t.stateNode;try{Oa(i,"")}catch(g){Re(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&W0(i,a),wu(s,o);var u=wu(s,a);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Y0(i,d):c==="dangerouslySetInnerHTML"?X0(i,d):c==="children"?Oa(i,d):Bc(i,c,d,u)}switch(s){case"input":vu(i,a);break;case"textarea":G0(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?xi(i,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?xi(i,!!a.multiple,a.defaultValue,!0):xi(i,!!a.multiple,a.multiple?[]:"",!1))}i[za]=a}catch(g){Re(t,t.return,g)}}break;case 6:if(er(e,t),pr(t),n&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(g){Re(t,t.return,g)}}break;case 3:if(er(e,t),pr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Pa(e.containerInfo)}catch(g){Re(t,t.return,g)}break;case 4:er(e,t),pr(t);break;case 13:er(e,t),pr(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(md=Me())),n&4&&nh(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(dt=(u=dt)||c,er(e,t),dt=u):er(e,t),pr(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for($=t,c=t.child;c!==null;){for(d=$=c;$!==null;){switch(h=$,p=h.child,h.tag){case 0:case 11:case 14:case 15:Sa(4,h,h.return);break;case 1:fi(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){Re(n,r,g)}}break;case 5:fi(h,h.return);break;case 22:if(h.memoizedState!==null){ah(d);continue}}p!==null?(p.return=h,$=p):ah(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=K0("display",o))}catch(g){Re(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Re(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:er(e,t),pr(t),n&4&&nh(t);break;case 21:break;default:er(e,t),pr(t)}}function pr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(_p(r)){var n=r;break e}r=r.return}throw Error(z(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Oa(i,""),n.flags&=-33);var a=rh(t);Yu(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=rh(t);Ku(t,s,o);break;default:throw Error(z(161))}}catch(l){Re(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qy(t,e,r){$=t,Sp(t)}function Sp(t,e,r){for(var n=(t.mode&1)!==0;$!==null;){var i=$,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Eo;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||dt;s=Eo;var u=dt;if(Eo=o,(dt=l)&&!u)for($=i;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?oh(i):l!==null?(l.return=o,$=l):oh(i);for(;a!==null;)$=a,Sp(a),a=a.sibling;$=i,Eo=s,dt=u}ih(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,$=a):ih(t)}}function ih(t){for(;$!==null;){var e=$;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||tl(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!dt)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:nr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&$f(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}$f(e,o,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Pa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}dt||e.flags&512&&Xu(e)}catch(h){Re(e,e.return,h)}}if(e===t){$=null;break}if(r=e.sibling,r!==null){r.return=e.return,$=r;break}$=e.return}}function ah(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var r=e.sibling;if(r!==null){r.return=e.return,$=r;break}$=e.return}}function oh(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{tl(4,e)}catch(l){Re(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Re(e,i,l)}}var a=e.return;try{Xu(e)}catch(l){Re(e,a,l)}break;case 5:var o=e.return;try{Xu(e)}catch(l){Re(e,o,l)}}}catch(l){Re(e,e.return,l)}if(e===t){$=null;break}var s=e.sibling;if(s!==null){s.return=e.return,$=s;break}$=e.return}}var Jy=Math.ceil,Ss=Mr.ReactCurrentDispatcher,pd=Mr.ReactCurrentOwner,qt=Mr.ReactCurrentBatchConfig,ae=0,Je=null,Fe=null,ot=0,Dt=0,hi=hn(0),qe=0,Ha=null,$n=0,rl=0,vd=0,Ca=null,St=null,md=0,Pi=1/0,Ar=null,Cs=!1,Zu=null,nn=null,bo=!1,Yr=null,As=0,Aa=0,Qu=null,Xo=-1,Ko=0;function xt(){return ae&6?Me():Xo!==-1?Xo:Xo=Me()}function an(t){return t.mode&1?ae&2&&ot!==0?ot&-ot:Ly.transition!==null?(Ko===0&&(Ko=l1()),Ko):(t=fe,t!==0||(t=window.event,t=t===void 0?16:v1(t.type)),t):1}function dr(t,e,r,n){if(50<Aa)throw Aa=0,Qu=null,Error(z(185));Za(t,r,n),(!(ae&2)||t!==Je)&&(t===Je&&(!(ae&2)&&(rl|=r),qe===4&&Gr(t,ot)),Tt(t,n),r===1&&ae===0&&!(e.mode&1)&&(Pi=Me()+500,Qs&&pn()))}function Tt(t,e){var r=t.callbackNode;Lg(t,e);var n=us(t,t===Je?ot:0);if(n===0)r!==null&&vf(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&vf(r),e===1)t.tag===0?My(sh.bind(null,t)):D1(sh.bind(null,t)),ky(function(){!(ae&6)&&pn()}),r=null;else{switch(u1(n)){case 1:r=$c;break;case 4:r=o1;break;case 16:r=ls;break;case 536870912:r=s1;break;default:r=ls}r=Rp(r,Cp.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Cp(t,e){if(Xo=-1,Ko=0,ae&6)throw Error(z(327));var r=t.callbackNode;if(Si()&&t.callbackNode!==r)return null;var n=us(t,t===Je?ot:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ns(t,n);else{e=n;var i=ae;ae|=2;var a=Np();(Je!==t||ot!==e)&&(Ar=null,Pi=Me()+500,Mn(t,e));do try{rx();break}catch(s){Ap(t,s)}while(!0);td(),Ss.current=a,ae=i,Fe!==null?e=0:(Je=null,ot=0,e=qe)}if(e!==0){if(e===2&&(i=Cu(t),i!==0&&(n=i,e=Ju(t,i))),e===1)throw r=Ha,Mn(t,0),Gr(t,n),Tt(t,Me()),r;if(e===6)Gr(t,n);else{if(i=t.current.alternate,!(n&30)&&!ex(i)&&(e=Ns(t,n),e===2&&(a=Cu(t),a!==0&&(n=a,e=Ju(t,a))),e===1))throw r=Ha,Mn(t,0),Gr(t,n),Tt(t,Me()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(z(345));case 2:bn(t,St,Ar);break;case 3:if(Gr(t,n),(n&130023424)===n&&(e=md+500-Me(),10<e)){if(us(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Pu(bn.bind(null,t,St,Ar),e);break}bn(t,St,Ar);break;case 4:if(Gr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-cr(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=Me()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Jy(n/1960))-n,10<n){t.timeoutHandle=Pu(bn.bind(null,t,St,Ar),n);break}bn(t,St,Ar);break;case 5:bn(t,St,Ar);break;default:throw Error(z(329))}}}return Tt(t,Me()),t.callbackNode===r?Cp.bind(null,t):null}function Ju(t,e){var r=Ca;return t.current.memoizedState.isDehydrated&&(Mn(t,e).flags|=256),t=Ns(t,e),t!==2&&(e=St,St=r,e!==null&&ec(e)),t}function ec(t){St===null?St=t:St.push.apply(St,t)}function ex(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!fr(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(t,e){for(e&=~vd,e&=~rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-cr(e),n=1<<r;t[r]=-1,e&=~n}}function sh(t){if(ae&6)throw Error(z(327));Si();var e=us(t,0);if(!(e&1))return Tt(t,Me()),null;var r=Ns(t,e);if(t.tag!==0&&r===2){var n=Cu(t);n!==0&&(e=n,r=Ju(t,n))}if(r===1)throw r=Ha,Mn(t,0),Gr(t,e),Tt(t,Me()),r;if(r===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bn(t,St,Ar),Tt(t,Me()),null}function gd(t,e){var r=ae;ae|=1;try{return t(e)}finally{ae=r,ae===0&&(Pi=Me()+500,Qs&&pn())}}function Vn(t){Yr!==null&&Yr.tag===0&&!(ae&6)&&Si();var e=ae;ae|=1;var r=qt.transition,n=fe;try{if(qt.transition=null,fe=1,t)return t()}finally{fe=n,qt.transition=r,ae=e,!(ae&6)&&pn()}}function yd(){Dt=hi.current,Ee(hi)}function Mn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Ty(r)),Fe!==null)for(r=Fe.return;r!==null;){var n=r;switch(Qc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ps();break;case 3:ki(),Ee(It),Ee(ht),sd();break;case 5:od(n);break;case 4:ki();break;case 13:Ee(Ie);break;case 19:Ee(Ie);break;case 10:rd(n.type._context);break;case 22:case 23:yd()}r=r.return}if(Je=t,Fe=t=on(t.current,null),ot=Dt=e,qe=0,Ha=null,vd=rl=$n=0,St=Ca=null,kn!==null){for(e=0;e<kn.length;e++)if(r=kn[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}kn=null}return t}function Ap(t,e){do{var r=Fe;try{if(td(),Wo.current=bs,Es){for(var n=Oe.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Es=!1}if(jn=0,Ze=Ve=Oe=null,ba=!1,ja=0,pd.current=null,r===null||r.return===null){qe=1,Ha=e,Fe=null;break}e:{var a=t,o=r.return,s=r,l=e;if(e=ot,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Xf(o);if(p!==null){p.flags&=-257,Kf(p,o,s,a,e),p.mode&1&&qf(a,u,e),e=p,l=u;var v=e.updateQueue;if(v===null){var g=new Set;g.add(l),e.updateQueue=g}else v.add(l);break e}else{if(!(e&1)){qf(a,u,e),xd();break e}l=Error(z(426))}}else if(Ce&&s.mode&1){var w=Xf(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Kf(w,o,s,a,e),Jc(Ri(l,s));break e}}a=l=Ri(l,s),qe!==4&&(qe=2),Ca===null?Ca=[a]:Ca.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=up(a,l,e);jf(a,m);break e;case 1:s=l;var y=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(nn===null||!nn.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e;var _=cp(a,s,e);jf(a,_);break e}}a=a.return}while(a!==null)}Op(r)}catch(b){e=b,Fe===r&&r!==null&&(Fe=r=r.return);continue}break}while(!0)}function Np(){var t=Ss.current;return Ss.current=bs,t===null?bs:t}function xd(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||!($n&268435455)&&!(rl&268435455)||Gr(Je,ot)}function Ns(t,e){var r=ae;ae|=2;var n=Np();(Je!==t||ot!==e)&&(Ar=null,Mn(t,e));do try{tx();break}catch(i){Ap(t,i)}while(!0);if(td(),ae=r,Ss.current=n,Fe!==null)throw Error(z(261));return Je=null,ot=0,qe}function tx(){for(;Fe!==null;)Ip(Fe)}function rx(){for(;Fe!==null&&!Ng();)Ip(Fe)}function Ip(t){var e=kp(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?Op(t):Fe=e,pd.current=null}function Op(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Ky(r,e),r!==null){r.flags&=32767,Fe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Fe=null;return}}else if(r=Xy(r,e,Dt),r!==null){Fe=r;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);qe===0&&(qe=5)}function bn(t,e,r){var n=fe,i=qt.transition;try{qt.transition=null,fe=1,nx(t,e,r,n)}finally{qt.transition=i,fe=n}return null}function nx(t,e,r,n){do Si();while(Yr!==null);if(ae&6)throw Error(z(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(Bg(t,a),t===Je&&(Fe=Je=null,ot=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||bo||(bo=!0,Rp(ls,function(){return Si(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=qt.transition,qt.transition=null;var o=fe;fe=1;var s=ae;ae|=4,pd.current=null,Zy(t,r),bp(r,t),by(ku),cs=!!Tu,ku=Tu=null,t.current=r,Qy(r),Ig(),ae=s,fe=o,qt.transition=a}else t.current=r;if(bo&&(bo=!1,Yr=t,As=i),a=t.pendingLanes,a===0&&(nn=null),kg(r.stateNode),Tt(t,Me()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Cs)throw Cs=!1,t=Zu,Zu=null,t;return As&1&&t.tag!==0&&Si(),a=t.pendingLanes,a&1?t===Qu?Aa++:(Aa=0,Qu=t):Aa=0,pn(),null}function Si(){if(Yr!==null){var t=u1(As),e=qt.transition,r=fe;try{if(qt.transition=null,fe=16>t?16:t,Yr===null)var n=!1;else{if(t=Yr,Yr=null,As=0,ae&6)throw Error(z(331));var i=ae;for(ae|=4,$=t.current;$!==null;){var a=$,o=a.child;if($.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for($=u;$!==null;){var c=$;switch(c.tag){case 0:case 11:case 15:Sa(8,c,a)}var d=c.child;if(d!==null)d.return=c,$=d;else for(;$!==null;){c=$;var h=c.sibling,p=c.return;if(wp(c),c===u){$=null;break}if(h!==null){h.return=p,$=h;break}$=p}}}var v=a.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}$=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,$=o;else e:for(;$!==null;){if(a=$,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Sa(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,$=m;break e}$=a.return}}var y=t.current;for($=y;$!==null;){o=$;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,$=x;else e:for(o=y;$!==null;){if(s=$,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:tl(9,s)}}catch(b){Re(s,s.return,b)}if(s===o){$=null;break e}var _=s.sibling;if(_!==null){_.return=s.return,$=_;break e}$=s.return}}if(ae=i,pn(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(qs,t)}catch{}n=!0}return n}finally{fe=r,qt.transition=e}}return!1}function lh(t,e,r){e=Ri(r,e),e=up(t,e,1),t=rn(t,e,1),e=xt(),t!==null&&(Za(t,1,e),Tt(t,e))}function Re(t,e,r){if(t.tag===3)lh(t,t,r);else for(;e!==null;){if(e.tag===3){lh(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(nn===null||!nn.has(n))){t=Ri(r,t),t=cp(e,t,1),e=rn(e,t,1),t=xt(),e!==null&&(Za(e,1,t),Tt(e,t));break}}e=e.return}}function ix(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&r,Je===t&&(ot&r)===r&&(qe===4||qe===3&&(ot&130023424)===ot&&500>Me()-md?Mn(t,0):vd|=r),Tt(t,e)}function Tp(t,e){e===0&&(t.mode&1?(e=ho,ho<<=1,!(ho&130023424)&&(ho=4194304)):e=1);var r=xt();t=Pr(t,e),t!==null&&(Za(t,e,r),Tt(t,r))}function ax(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Tp(t,r)}function ox(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(e),Tp(t,r)}var kp;kp=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Nt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Nt=!1,qy(t,e,r);Nt=!!(t.flags&131072)}else Nt=!1,Ce&&e.flags&1048576&&M1(e,gs,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;qo(t,e),t=e.pendingProps;var i=Ii(e,ht.current);bi(e,r),i=ud(null,e,n,t,i,r);var a=cd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(n)?(a=!0,vs(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,id(e),i.updater=el,e.stateNode=i,i._reactInternals=e,Uu(e,n,t,r),e=Vu(null,e,n,!0,a,r)):(e.tag=0,Ce&&a&&Zc(e),yt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(qo(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=lx(n),t=nr(n,t),i){case 0:e=$u(null,e,n,t,r);break e;case 1:e=Qf(null,e,n,t,r);break e;case 11:e=Yf(null,e,n,t,r);break e;case 14:e=Zf(null,e,n,nr(n.type,t),r);break e}throw Error(z(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:nr(n,i),$u(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:nr(n,i),Qf(t,e,n,i,r);case 3:e:{if(pp(e),t===null)throw Error(z(387));n=e.pendingProps,a=e.memoizedState,i=a.element,j1(t,e),ws(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Ri(Error(z(423)),e),e=Jf(t,e,n,r,i);break e}else if(n!==i){i=Ri(Error(z(424)),e),e=Jf(t,e,n,r,i);break e}else for(Bt=tn(e.stateNode.containerInfo.firstChild),zt=e,Ce=!0,sr=null,r=F1(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Oi(),n===i){e=Dr(t,e,r);break e}yt(t,e,n,r)}e=e.child}return e;case 5:return $1(e),t===null&&Bu(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Ru(n,i)?o=null:a!==null&&Ru(n,a)&&(e.flags|=32),hp(t,e),yt(t,e,o,r),e.child;case 6:return t===null&&Bu(e),null;case 13:return vp(t,e,r);case 4:return ad(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ti(e,null,n,r):yt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:nr(n,i),Yf(t,e,n,i,r);case 7:return yt(t,e,e.pendingProps,r),e.child;case 8:return yt(t,e,e.pendingProps.children,r),e.child;case 12:return yt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,ge(ys,n._currentValue),n._currentValue=o,a!==null)if(fr(a.value,o)){if(a.children===i.children&&!It.current){e=Dr(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Tr(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),zu(a.return,r,e),s.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(z(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),zu(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}yt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,bi(e,r),i=Kt(i),n=n(i),e.flags|=1,yt(t,e,n,r),e.child;case 14:return n=e.type,i=nr(n,e.pendingProps),i=nr(n.type,i),Zf(t,e,n,i,r);case 15:return dp(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:nr(n,i),qo(t,e),e.tag=1,Ot(n)?(t=!0,vs(e)):t=!1,bi(e,r),lp(e,n,i),Uu(e,n,i,r),Vu(null,e,n,!0,t,r);case 19:return mp(t,e,r);case 22:return fp(t,e,r)}throw Error(z(156,e.tag))};function Rp(t,e){return a1(t,e)}function sx(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,r,n){return new sx(t,e,r,n)}function wd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lx(t){if(typeof t=="function")return wd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fc)return 11;if(t===Uc)return 14}return 2}function on(t,e){var r=t.alternate;return r===null?(r=Wt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Yo(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")wd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ni:return Ln(r.children,i,a,e);case zc:o=8,i|=8;break;case cu:return t=Wt(12,r,e,i|2),t.elementType=cu,t.lanes=a,t;case du:return t=Wt(13,r,e,i),t.elementType=du,t.lanes=a,t;case fu:return t=Wt(19,r,e,i),t.elementType=fu,t.lanes=a,t;case $0:return nl(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U0:o=10;break e;case j0:o=9;break e;case Fc:o=11;break e;case Uc:o=14;break e;case $r:o=16,n=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Wt(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Ln(t,e,r,n){return t=Wt(7,t,n,e),t.lanes=r,t}function nl(t,e,r,n){return t=Wt(22,t,n,e),t.elementType=$0,t.lanes=r,t.stateNode={isHidden:!1},t}function Vl(t,e,r){return t=Wt(6,t,null,e),t.lanes=r,t}function Hl(t,e,r){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ux(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _d(t,e,r,n,i,a,o,s,l){return t=new ux(t,e,r,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Wt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},id(a),t}function cx(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ri,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Pp(t){if(!t)return dn;t=t._reactInternals;e:{if(Wn(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var r=t.type;if(Ot(r))return P1(t,r,e)}return e}function Dp(t,e,r,n,i,a,o,s,l){return t=_d(r,n,!0,t,i,a,o,s,l),t.context=Pp(null),r=t.current,n=xt(),i=an(r),a=Tr(n,i),a.callback=e??null,rn(r,a,i),t.current.lanes=i,Za(t,i,n),Tt(t,n),t}function il(t,e,r,n){var i=e.current,a=xt(),o=an(i);return r=Pp(r),e.context===null?e.context=r:e.pendingContext=r,e=Tr(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=rn(i,e,o),t!==null&&(dr(t,i,o,a),Ho(t,i,o)),o}function Is(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Ed(t,e){uh(t,e),(t=t.alternate)&&uh(t,e)}function dx(){return null}var Mp=typeof reportError=="function"?reportError:function(t){console.error(t)};function bd(t){this._internalRoot=t}al.prototype.render=bd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));il(t,e,null,null)};al.prototype.unmount=bd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vn(function(){il(null,t,null,null)}),e[Rr]=null}};function al(t){this._internalRoot=t}al.prototype.unstable_scheduleHydration=function(t){if(t){var e=f1();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Wr.length&&e!==0&&e<Wr[r].priority;r++);Wr.splice(r,0,t),r===0&&p1(t)}};function Sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ol(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ch(){}function fx(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Is(o);a.call(u)}}var o=Dp(e,n,t,0,null,!1,!1,"",ch);return t._reactRootContainer=o,t[Rr]=o.current,La(t.nodeType===8?t.parentNode:t),Vn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=Is(l);s.call(u)}}var l=_d(t,0,!1,null,null,!1,!1,"",ch);return t._reactRootContainer=l,t[Rr]=l.current,La(t.nodeType===8?t.parentNode:t),Vn(function(){il(e,l,r,n)}),l}function sl(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=Is(o);s.call(l)}}il(e,o,t,i)}else o=fx(r,e,t,i,n);return Is(o)}c1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=da(e.pendingLanes);r!==0&&(Vc(e,r|1),Tt(e,Me()),!(ae&6)&&(Pi=Me()+500,pn()))}break;case 13:Vn(function(){var n=Pr(t,1);if(n!==null){var i=xt();dr(n,t,1,i)}}),Ed(t,1)}};Hc=function(t){if(t.tag===13){var e=Pr(t,134217728);if(e!==null){var r=xt();dr(e,t,134217728,r)}Ed(t,134217728)}};d1=function(t){if(t.tag===13){var e=an(t),r=Pr(t,e);if(r!==null){var n=xt();dr(r,t,e,n)}Ed(t,e)}};f1=function(){return fe};h1=function(t,e){var r=fe;try{return fe=t,e()}finally{fe=r}};Eu=function(t,e,r){switch(e){case"input":if(vu(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Zs(n);if(!i)throw Error(z(90));H0(n),vu(n,i)}}}break;case"textarea":G0(t,r);break;case"select":e=r.value,e!=null&&xi(t,!!r.multiple,e,!1)}};J0=gd;e1=Vn;var hx={usingClientEntryPoint:!1,Events:[Ja,si,Zs,Z0,Q0,gd]},aa={findFiberByHostInstance:Tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},px={bundleType:aa.bundleType,version:aa.version,rendererPackageName:aa.rendererPackageName,rendererConfig:aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=n1(t),t===null?null:t.stateNode},findFiberByHostInstance:aa.findFiberByHostInstance||dx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var So=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!So.isDisabled&&So.supportsFiber)try{qs=So.inject(px),xr=So}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hx;Ut.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sd(e))throw Error(z(200));return cx(t,e,null,r)};Ut.createRoot=function(t,e){if(!Sd(t))throw Error(z(299));var r=!1,n="",i=Mp;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_d(t,1,!1,null,null,r,!1,n,i),t[Rr]=e.current,La(t.nodeType===8?t.parentNode:t),new bd(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=n1(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return Vn(t)};Ut.hydrate=function(t,e,r){if(!ol(e))throw Error(z(200));return sl(null,t,e,!0,r)};Ut.hydrateRoot=function(t,e,r){if(!Sd(t))throw Error(z(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=Mp;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Dp(e,null,t,1,r??null,i,!1,a,o),t[Rr]=e.current,La(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new al(e)};Ut.render=function(t,e,r){if(!ol(e))throw Error(z(200));return sl(null,t,e,!1,r)};Ut.unmountComponentAtNode=function(t){if(!ol(t))throw Error(z(40));return t._reactRootContainer?(Vn(function(){sl(null,null,t,!1,function(){t._reactRootContainer=null,t[Rr]=null})}),!0):!1};Ut.unstable_batchedUpdates=gd;Ut.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ol(r))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return sl(t,e,r,!1,n)};Ut.version="18.3.1-next-f1338f8080-20240426";function Lp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lp)}catch(t){console.error(t)}}Lp(),L0.exports=Ut;var vx=L0.exports,Bp,dh=vx;Bp=dh.createRoot,dh.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wa(){return Wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wa.apply(this,arguments)}var Zr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zr||(Zr={}));const fh="popstate";function mx(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:o,hash:s}=n.location;return tc("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Os(i)}return yx(e,r,null,t)}function Le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gx(){return Math.random().toString(36).substr(2,8)}function hh(t,e){return{usr:t.state,key:t.key,idx:e}}function tc(t,e,r,n){return r===void 0&&(r=null),Wa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ui(e):e,{state:r,key:e&&e.key||n||gx()})}function Os(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ui(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function yx(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,s=Zr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Wa({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){s=Zr.Pop;let w=c(),m=w==null?null:w-u;u=w,l&&l({action:s,location:g.location,delta:m})}function h(w,m){s=Zr.Push;let y=tc(g.location,w,m);u=c()+1;let x=hh(y,u),_=g.createHref(y);try{o.pushState(x,"",_)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(_)}a&&l&&l({action:s,location:g.location,delta:1})}function p(w,m){s=Zr.Replace;let y=tc(g.location,w,m);u=c();let x=hh(y,u),_=g.createHref(y);o.replaceState(x,"",_),a&&l&&l({action:s,location:g.location,delta:0})}function v(w){let m=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof w=="string"?w:Os(w);return y=y.replace(/ $/,"%20"),Le(m,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,m)}let g={get action(){return s},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(fh,d),l=w,()=>{i.removeEventListener(fh,d),l=null}},createHref(w){return e(i,w)},createURL:v,encodeLocation(w){let m=v(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:p,go(w){return o.go(w)}};return g}var ph;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ph||(ph={}));function xx(t,e,r){return r===void 0&&(r="/"),wx(t,e,r)}function wx(t,e,r,n){let i=typeof e=="string"?Ui(e):e,a=Ad(i.pathname||"/",r);if(a==null)return null;let o=zp(t);_x(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let u=Px(a);s=Tx(o[l],u)}return s}function zp(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(Le(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=sn([n,l.relativePath]),c=r.concat(l);a.children&&a.children.length>0&&(Le(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),zp(a.children,e,c,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:Ix(u,a.index),routesMeta:c})};return t.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of Fp(a.path))i(a,o,l)}),e}function Fp(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=Fp(n.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function _x(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Ox(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Ex=/^:[\w-]+$/,bx=3,Sx=2,Cx=1,Ax=10,Nx=-2,vh=t=>t==="*";function Ix(t,e){let r=t.split("/"),n=r.length;return r.some(vh)&&(n+=Nx),e&&(n+=Sx),r.filter(i=>!vh(i)).reduce((i,a)=>i+(Ex.test(a)?bx:a===""?Cx:Ax),n)}function Ox(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Tx(t,e,r){let{routesMeta:n}=t,i={},a="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],u=s===n.length-1,c=a==="/"?e:e.slice(a.length)||"/",d=kx({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:sn([a,d.pathname]),pathnameBase:zx(sn([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=sn([a,d.pathnameBase]))}return o}function kx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Rx(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((u,c,d)=>{let{paramName:h,isOptional:p}=c;if(h==="*"){let g=s[d]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const v=s[d];return p&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function Rx(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Cd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Px(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ad(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Dx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mx=t=>Dx.test(t);function Lx(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Ui(t):t,a;if(r)if(Mx(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Cd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?a=mh(r.substring(1),"/"):a=mh(r,e)}else a=e;return{pathname:a,search:Fx(n),hash:Ux(i)}}function mh(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Wl(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Bx(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Nd(t,e){let r=Bx(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Id(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Ui(t):(i=Wa({},t),Le(!i.pathname||!i.pathname.includes("?"),Wl("?","pathname","search",i)),Le(!i.pathname||!i.pathname.includes("#"),Wl("#","pathname","hash",i)),Le(!i.search||!i.search.includes("#"),Wl("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=r;else{let d=e.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}s=d>=0?e[d]:"/"}let l=Lx(i,s),u=o&&o!=="/"&&o.endsWith("/"),c=(a||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const sn=t=>t.join("/").replace(/\/\/+/g,"/"),zx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Fx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ux=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Up=["post","put","patch","delete"];new Set(Up);const $x=["get",...Up];new Set($x);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ga(){return Ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ga.apply(this,arguments)}const Od=A.createContext(null),Vx=A.createContext(null),vn=A.createContext(null),ll=A.createContext(null),mn=A.createContext({outlet:null,matches:[],isDataRoute:!1}),jp=A.createContext(null);function Hx(t,e){let{relative:r}=e===void 0?{}:e;ji()||Le(!1);let{basename:n,navigator:i}=A.useContext(vn),{hash:a,pathname:o,search:s}=Vp(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:sn([n,o])),i.createHref({pathname:l,search:s,hash:a})}function ji(){return A.useContext(ll)!=null}function Er(){return ji()||Le(!1),A.useContext(ll).location}function $p(t){A.useContext(vn).static||A.useLayoutEffect(t)}function hr(){let{isDataRoute:t}=A.useContext(mn);return t?nw():Wx()}function Wx(){ji()||Le(!1);let t=A.useContext(Od),{basename:e,future:r,navigator:n}=A.useContext(vn),{matches:i}=A.useContext(mn),{pathname:a}=Er(),o=JSON.stringify(Nd(i,r.v7_relativeSplatPath)),s=A.useRef(!1);return $p(()=>{s.current=!0}),A.useCallback(function(u,c){if(c===void 0&&(c={}),!s.current)return;if(typeof u=="number"){n.go(u);return}let d=Id(u,JSON.parse(o),a,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:sn([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,o,a,t])}function Vp(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=A.useContext(vn),{matches:i}=A.useContext(mn),{pathname:a}=Er(),o=JSON.stringify(Nd(i,n.v7_relativeSplatPath));return A.useMemo(()=>Id(t,JSON.parse(o),a,r==="path"),[t,o,a,r])}function Gx(t,e){return qx(t,e)}function qx(t,e,r,n){ji()||Le(!1);let{navigator:i}=A.useContext(vn),{matches:a}=A.useContext(mn),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Er(),c;if(e){var d;let w=typeof e=="string"?Ui(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||Le(!1),c=w}else c=u;let h=c.pathname||"/",p=h;if(l!=="/"){let w=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=xx(t,{pathname:p}),g=Qx(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},s,w.params),pathname:sn([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:sn([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,r,n);return e&&g?A.createElement(ll.Provider,{value:{location:Ga({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Zr.Pop}},g):g}function Xx(){let t=rw(),e=jx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),r?A.createElement("pre",{style:i},r):null,null)}const Kx=A.createElement(Xx,null);class Yx extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?A.createElement(mn.Provider,{value:this.props.routeContext},A.createElement(jp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zx(t){let{routeContext:e,match:r,children:n}=t,i=A.useContext(Od);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),A.createElement(mn.Provider,{value:e},n)}function Qx(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,s=(i=r)==null?void 0:i.errors;if(s!=null){let c=o.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);c>=0||Le(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:p}=r,v=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,h)=>{let p,v=!1,g=null,w=null;r&&(p=s&&d.route.id?s[d.route.id]:void 0,g=d.route.errorElement||Kx,l&&(u<0&&h===0?(iw("route-fallback"),v=!0,w=null):u===h&&(v=!0,w=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),y=()=>{let x;return p?x=g:v?x=w:d.route.Component?x=A.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,A.createElement(Zx,{match:d,routeContext:{outlet:c,matches:m,isDataRoute:r!=null},children:x})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?A.createElement(Yx,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}var Hp=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Hp||{}),Wp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Wp||{});function Jx(t){let e=A.useContext(Od);return e||Le(!1),e}function ew(t){let e=A.useContext(Vx);return e||Le(!1),e}function tw(t){let e=A.useContext(mn);return e||Le(!1),e}function Gp(t){let e=tw(),r=e.matches[e.matches.length-1];return r.route.id||Le(!1),r.route.id}function rw(){var t;let e=A.useContext(jp),r=ew(),n=Gp();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function nw(){let{router:t}=Jx(Hp.UseNavigateStable),e=Gp(Wp.UseNavigateStable),r=A.useRef(!1);return $p(()=>{r.current=!0}),A.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ga({fromRouteId:e},a)))},[t,e])}const gh={};function iw(t,e,r){gh[t]||(gh[t]=!0)}function aw(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Na(t){let{to:e,replace:r,state:n,relative:i}=t;ji()||Le(!1);let{future:a,static:o}=A.useContext(vn),{matches:s}=A.useContext(mn),{pathname:l}=Er(),u=hr(),c=Id(e,Nd(s,a.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(c);return A.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:i}),[u,d,i,r,n]),null}function Pt(t){Le(!1)}function ow(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Zr.Pop,navigator:a,static:o=!1,future:s}=t;ji()&&Le(!1);let l=e.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:a,static:o,future:Ga({v7_relativeSplatPath:!1},s)}),[l,s,a,o]);typeof n=="string"&&(n=Ui(n));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:v="default"}=n,g=A.useMemo(()=>{let w=Ad(c,l);return w==null?null:{location:{pathname:w,search:d,hash:h,state:p,key:v},navigationType:i}},[l,c,d,h,p,v,i]);return g==null?null:A.createElement(vn.Provider,{value:u},A.createElement(ll.Provider,{children:r,value:g}))}function sw(t){let{children:e,location:r}=t;return Gx(rc(e),r)}new Promise(()=>{});function rc(t,e){e===void 0&&(e=[]);let r=[];return A.Children.forEach(t,(n,i)=>{if(!A.isValidElement(n))return;let a=[...e,i];if(n.type===A.Fragment){r.push.apply(r,rc(n.props.children,a));return}n.type!==Pt&&Le(!1),!n.props.index||!n.props.children||Le(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=rc(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nc.apply(this,arguments)}function lw(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function uw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cw(t,e){return t.button===0&&(!e||e==="_self")&&!uw(t)}const dw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fw="6";try{window.__reactRouterVersion=fw}catch{}const hw="startTransition",yh=cg[hw];function pw(t){let{basename:e,children:r,future:n,window:i}=t,a=A.useRef();a.current==null&&(a.current=mx({window:i,v5Compat:!0}));let o=a.current,[s,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},c=A.useCallback(d=>{u&&yh?yh(()=>l(d)):l(d)},[l,u]);return A.useLayoutEffect(()=>o.listen(c),[o,c]),A.useEffect(()=>aw(n),[n]),A.createElement(ow,{basename:e,children:r,location:s.location,navigationType:s.action,navigator:o,future:n})}const vw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mt=A.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:s,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,h=lw(e,dw),{basename:p}=A.useContext(vn),v,g=!1;if(typeof u=="string"&&mw.test(u)&&(v=u,vw))try{let x=new URL(window.location.href),_=u.startsWith("//")?new URL(x.protocol+u):new URL(u),b=Ad(_.pathname,p);_.origin===x.origin&&b!=null?u=b+_.search+_.hash:g=!0}catch{}let w=Hx(u,{relative:i}),m=gw(u,{replace:o,state:s,target:l,preventScrollReset:c,relative:i,viewTransition:d});function y(x){n&&n(x),x.defaultPrevented||m(x)}return A.createElement("a",nc({},h,{href:v||w,onClick:g||a?n:y,ref:r,target:l}))});var xh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xh||(xh={}));var wh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wh||(wh={}));function gw(t,e){let{target:r,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:s}=e===void 0?{}:e,l=hr(),u=Er(),c=Vp(t,{relative:o});return A.useCallback(d=>{if(cw(d,r)){d.preventDefault();let h=n!==void 0?n:Os(u)===Os(c);l(t,{replace:h,state:i,preventScrollReset:a,relative:o,viewTransition:s})}},[u,l,c,n,i,r,t,a,o,s])}var Td={},Ts={},ic=function(t,e){return ic=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},ic(t,e)};function qp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ic(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ks=function(){return ks=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ks.apply(this,arguments)};function $i(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Xp(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function Kp(t,e){return function(r,n){e(r,n,t)}}function Yp(t,e,r,n,i,a){function o(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,h=!1,p=r.length-1;p>=0;p--){var v={};for(var g in n)v[g]=g==="access"?{}:n[g];for(var g in n.access)v.access[g]=n.access[g];v.addInitializer=function(m){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(m||null))};var w=(0,r[p])(s==="accessor"?{get:c.get,set:c.set}:c[l],v);if(s==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=o(w.get))&&(c.get=d),(d=o(w.set))&&(c.set=d),(d=o(w.init))&&i.unshift(d)}else(d=o(w))&&(s==="field"?i.unshift(d):c[l]=d)}u&&Object.defineProperty(u,n.name,c),h=!0}function Zp(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function Qp(t){return typeof t=="symbol"?t:"".concat(t)}function Jp(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function ev(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function V(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})}function tv(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ul=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function rv(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ul(e,t,r)}function Rs(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kd(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function nv(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(kd(arguments[e]));return t}function iv(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function av(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function Di(t){return this instanceof Di?(this.v=t,this):new Di(t)}function ov(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(v){return Promise.resolve(v).then(p,d)}}function s(p,v){n[p]&&(i[p]=function(g){return new Promise(function(w,m){a.push([p,g,w,m])>1||l(p,g)})},v&&(i[p]=v(i[p])))}function l(p,v){try{u(n[p](v))}catch(g){h(a[0][3],g)}}function u(p){p.value instanceof Di?Promise.resolve(p.value.v).then(c,d):h(a[0][2],p)}function c(p){l("next",p)}function d(p){l("throw",p)}function h(p,v){p(v),a.shift(),a.length&&l(a[0][0],a[0][1])}}function sv(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(o){return(r=!r)?{value:Di(t[i](o)),done:!1}:a?a(o):o}:a}}function lv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Rs=="function"?Rs(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(s,l){o=t[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function uv(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var yw=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},ac=function(t){return ac=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},ac(t)};function cv(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=ac(t),n=0;n<r.length;n++)r[n]!=="default"&&ul(e,t,r[n]);return yw(e,t),e}function dv(t){return t&&t.__esModule?t:{default:t}}function fv(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function hv(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function pv(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function vv(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var xw=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function mv(t){function e(a){t.error=t.hasError?new xw(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function gv(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,o){return n?e?".jsx":".js":i&&(!a||!o)?r:i+a+"."+o.toLowerCase()+"js"}):t}const ww={__extends:qp,__assign:ks,__rest:$i,__decorate:Xp,__param:Kp,__esDecorate:Yp,__runInitializers:Zp,__propKey:Qp,__setFunctionName:Jp,__metadata:ev,__awaiter:V,__generator:tv,__createBinding:ul,__exportStar:rv,__values:Rs,__read:kd,__spread:nv,__spreadArrays:iv,__spreadArray:av,__await:Di,__asyncGenerator:ov,__asyncDelegator:sv,__asyncValues:lv,__makeTemplateObject:uv,__importStar:cv,__importDefault:dv,__classPrivateFieldGet:fv,__classPrivateFieldSet:hv,__classPrivateFieldIn:pv,__addDisposableResource:vv,__disposeResources:mv,__rewriteRelativeImportExtension:gv},_w=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:vv,get __assign(){return ks},__asyncDelegator:sv,__asyncGenerator:ov,__asyncValues:lv,__await:Di,__awaiter:V,__classPrivateFieldGet:fv,__classPrivateFieldIn:pv,__classPrivateFieldSet:hv,__createBinding:ul,__decorate:Xp,__disposeResources:mv,__esDecorate:Yp,__exportStar:rv,__extends:qp,__generator:tv,__importDefault:dv,__importStar:cv,__makeTemplateObject:uv,__metadata:ev,__param:Kp,__propKey:Qp,__read:kd,__rest:$i,__rewriteRelativeImportExtension:gv,__runInitializers:Zp,__setFunctionName:Jp,__spread:nv,__spreadArray:av,__spreadArrays:iv,__values:Rs,default:ww},Symbol.toStringTag,{value:"Module"})),Ew=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let cl=class extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}},yv=class extends cl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},oc=class extends cl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},sc=class extends cl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Ps;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ps||(Ps={}));class bw{constructor(e,{headers:r={},customFetch:n,region:i=Ps.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=Ew(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return V(this,arguments,void 0,function*(r,n={}){var i;let a,o;try{const{headers:s,method:l,body:u,signal:c,timeout:d}=n;let h={},{region:p}=n;p||(p=this.region);const v=new URL(`${this.url}/${r}`);p&&p!=="any"&&(h["x-region"]=p,v.searchParams.set("forceFunctionRegion",p));let g;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let w=c;d&&(o=new AbortController,a=setTimeout(()=>o.abort(),d),c?(w=o.signal,c.addEventListener("abort",()=>o.abort())):w=o.signal);const m=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:g,signal:w}).catch(b=>{throw new yv(b)}),y=m.headers.get("x-relay-error");if(y&&y==="true")throw new oc(m);if(!m.ok)throw new sc(m);let x=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return x==="application/json"?_=yield m.json():x==="application/octet-stream"||x==="application/pdf"?_=yield m.blob():x==="text/event-stream"?_=m:x==="multipart/form-data"?_=yield m.formData():_=yield m.text(),{data:_,error:null,response:m}}catch(s){return{data:null,error:s,response:s instanceof sc||s instanceof oc?s.context:void 0}}finally{a&&clearTimeout(a)}})}}const Sw=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Ps},FunctionsClient:bw,FunctionsError:cl,FunctionsFetchError:yv,FunctionsHttpError:sc,FunctionsRelayError:oc},Symbol.toStringTag,{value:"Module"})),xv=Ka(Sw);var ft={};const Vi=Ka(_w);var Co={},Ao={},No={},Io={},Oo={},To={},_h;function wv(){if(_h)return To;_h=1,Object.defineProperty(To,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return To.default=t,To}var Eh;function _v(){if(Eh)return Oo;Eh=1,Object.defineProperty(Oo,"__esModule",{value:!0});const e=Vi.__importDefault(wv());let r=class{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let s=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,c,d,h;let p=null,v=null,g=null,w=l.status,m=l.statusText;if(l.ok){if(this.method!=="HEAD"){const b=await l.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=b:v=JSON.parse(b))}const x=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),_=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");x&&_&&_.length>1&&(g=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(p={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,g=null,w=406,m="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const x=await l.text();try{p=JSON.parse(x),Array.isArray(p)&&l.status===404&&(v=[],p=null,w=200,m="OK")}catch{l.status===404&&x===""?(w=204,m="No Content"):p={message:x}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,w=200,m="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:v,count:g,status:w,statusText:m}});return this.shouldThrowOnError||(s=s.catch(l=>{var u,c,d,h,p,v;let g="";const w=l==null?void 0:l.cause;if(w){const m=(u=w==null?void 0:w.message)!==null&&u!==void 0?u:"",y=(c=w==null?void 0:w.code)!==null&&c!==void 0?c:"";g=`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,g+=`

Caused by: ${(h=w==null?void 0:w.name)!==null&&h!==void 0?h:"Error"}: ${m}`,y&&(g+=` (${y})`),w!=null&&w.stack&&(g+=`
${w.stack}`)}else g=(p=l==null?void 0:l.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(v=l==null?void 0:l.name)!==null&&v!==void 0?v:"FetchError"}: ${l==null?void 0:l.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(i,a)}returns(){return this}overrideTypes(){return this}};return Oo.default=r,Oo}var bh;function Ev(){if(bh)return Io;bh=1,Object.defineProperty(Io,"__esModule",{value:!0});const e=Vi.__importDefault(_v());let r=class extends e.default{select(i){let a=!1;const o=(i??"*").split("").map(s=>/\s/.test(s)&&!a?"":(s==='"'&&(a=!a),s)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const s=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:s=o}={}){const l=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:s=!1,wal:l=!1,format:u="text"}={}){var c;const d=[i?"analyze":null,a?"verbose":null,o?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return Io.default=r,Io}var Sh;function Rd(){if(Sh)return No;Sh=1,Object.defineProperty(No,"__esModule",{value:!0});const e=Vi.__importDefault(Ev()),r=new RegExp("[,()]");let n=class extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}regexMatch(a,o){return this.url.searchParams.append(a,`match.${o}`),this}regexIMatch(a,o){return this.url.searchParams.append(a,`imatch.${o}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}isDistinct(a,o){return this.url.searchParams.append(a,`isdistinct.${o}`),this}in(a,o){const s=Array.from(new Set(o)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${s})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:s,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(a,`${u}fts${c}.${o}`),this}match(a){return Object.entries(a).forEach(([o,s])=>{this.url.searchParams.append(o,`eq.${s}`)}),this}not(a,o,s){return this.url.searchParams.append(a,`not.${o}.${s}`),this}or(a,{foreignTable:o,referencedTable:s=o}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,o,s){return this.url.searchParams.append(a,`${o}.${s}`),this}};return No.default=n,No}var Ch;function bv(){if(Ch)return Ao;Ch=1,Object.defineProperty(Ao,"__esModule",{value:!0});const e=Vi.__importDefault(Rd());let r=class{constructor(i,{headers:a={},schema:o,fetch:s}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=s}select(i,a){const{head:o=!1,count:s}=a??{},l=o?"HEAD":"GET";let u=!1;const c=(i??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",c),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var s;const l="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:s,defaultToNull:l=!0}={}){var u;const c="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var o;const s="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return Ao.default=r,Ao}var Ah;function Cw(){if(Ah)return Co;Ah=1,Object.defineProperty(Co,"__esModule",{value:!0});const t=Vi,e=t.__importDefault(bv()),r=t.__importDefault(Rd());let n=class Sv{constructor(a,{headers:o={},schema:s,fetch:l}={}){this.url=a,this.headers=new Headers(o),this.schemaName=s,this.fetch=l}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new Sv(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:s=!1,get:l=!1,count:u}={}){var c;let d;const h=new URL(`${this.url}/rpc/${a}`);let p;s||l?(d=s?"HEAD":"GET",Object.entries(o).filter(([g,w])=>w!==void 0).map(([g,w])=>[g,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([g,w])=>{h.searchParams.append(g,w)})):(d="POST",p=o);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:d,url:h,headers:v,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};return Co.default=n,Co}Object.defineProperty(ft,"__esModule",{value:!0});ft.PostgrestError=ft.PostgrestBuilder=ft.PostgrestTransformBuilder=ft.PostgrestFilterBuilder=ft.PostgrestQueryBuilder=ft.PostgrestClient=void 0;const Hi=Vi,Cv=Hi.__importDefault(Cw());ft.PostgrestClient=Cv.default;const Av=Hi.__importDefault(bv());ft.PostgrestQueryBuilder=Av.default;const Nv=Hi.__importDefault(Rd());ft.PostgrestFilterBuilder=Nv.default;const Iv=Hi.__importDefault(Ev());ft.PostgrestTransformBuilder=Iv.default;const Ov=Hi.__importDefault(_v());ft.PostgrestBuilder=Ov.default;const Tv=Hi.__importDefault(wv());ft.PostgrestError=Tv.default;ft.default={PostgrestClient:Cv.default,PostgrestQueryBuilder:Av.default,PostgrestFilterBuilder:Nv.default,PostgrestTransformBuilder:Iv.default,PostgrestBuilder:Ov.default,PostgrestError:Tv.default};class kv{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Aw="2.86.2",Nw=`realtime-js/${Aw}`,Rv="1.0.0",Iw="2.0.0",Nh=Rv,lc=1e4,Ow=1e3,Tw=100;var In;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(In||(In={}));var Be;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Be||(Be={}));var or;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(or||(or={}));var uc;(function(t){t.websocket="websocket"})(uc||(uc={}));var On;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(On||(On={}));class kw{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var i,a;const o=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",l=(a=e.join_ref)!==null&&a!==void 0?a:"",u=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+o.length+u.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let v=new DataView(p),g=0;v.setUint8(g++,this.KINDS.userBroadcastPush),v.setUint8(g++,l.length),v.setUint8(g++,s.length),v.setUint8(g++,o.length),v.setUint8(g++,u.length),v.setUint8(g++,d.length),v.setUint8(g++,r),Array.from(l,m=>v.setUint8(g++,m.charCodeAt(0))),Array.from(s,m=>v.setUint8(g++,m.charCodeAt(0))),Array.from(o,m=>v.setUint8(g++,m.charCodeAt(0))),Array.from(u,m=>v.setUint8(g++,m.charCodeAt(0))),Array.from(d,m=>v.setUint8(g++,m.charCodeAt(0)));var w=new Uint8Array(p.byteLength+n.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(n),p.byteLength),w.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,a,o,s,l]=n;return r({join_ref:i,ref:a,topic:o,event:s,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),s=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(e.slice(l,l+i));l=l+i;const c=n.decode(e.slice(l,l+a));l=l+a;const d=n.decode(e.slice(l,l+o));l=l+o;const h=e.slice(l,e.byteLength),p=s===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,v={type:this.BROADCAST_EVENT,event:c,payload:p};return o>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Pv{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var me;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(me||(me={}));const Ih=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,o)=>(a[o]=Rw(o,t,e,i),a),{}):{}},Rw=(t,e,r,n)=>{const i=e.find(s=>s.name===t),a=i==null?void 0:i.type,o=r[t];return a&&!n.includes(a)?Dv(a,o):cc(o)},Dv=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Lw(e,r)}switch(t){case me.bool:return Pw(e);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return Dw(e);case me.json:case me.jsonb:return Mw(e);case me.timestamp:return Bw(e);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return cc(e);default:return cc(e)}},cc=t=>t,Pw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Dw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Mw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Lw=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>Dv(e,s))}return t},Bw=t=>typeof t=="string"?t.replace(" ","T"):t,Mv=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Gl{constructor(e,r,n={},i=lc){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(dc||(dc={}));let Lv=class Zo{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zo.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=Zo.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Zo.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),o=this.transformState(r),s={},l={};return this.map(a,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=a[u];if(d){const h=c.map(w=>w.presence_ref),p=d.map(w=>w.presence_ref),v=c.filter(w=>p.indexOf(w.presence_ref)<0),g=d.filter(w=>h.indexOf(w.presence_ref)<0);v.length>0&&(s[u]=v),g.length>0&&(l[u]=g)}else s[u]=c}),this.syncDiff(a,{joins:s,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(s,l)=>{var u;const c=(u=e[s])!==null&&u!==void 0?u:[];if(e[s]=this.cloneDeep(l),c.length>0){const d=e[s].map(p=>p.presence_ref),h=c.filter(p=>d.indexOf(p.presence_ref)<0);e[s].unshift(...h)}n(s,c,l)}),this.map(o,(s,l)=>{let u=e[s];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[s]=u,i(s,u,l),u.length===0&&delete e[s]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var fc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(fc||(fc={}));var Ci;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ci||(Ci={}));var mr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(mr||(mr={}));const zw=Be;let Bv=class zv{constructor(e,r={config:{}},n){var i,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gl(this,or.join,this.params,this.timeout),this.rejoinTimer=new Pv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(or.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new Lv(this),this.broadcastEndpointURL=Mv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:o,presence:s,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Ci.PRESENCE]&&this.bindings[Ci.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},h={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(mr.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(mr.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket.setAuth(),p===void 0){e==null||e(mr.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(v=g==null?void 0:g.length)!==null&&v!==void 0?v:0,m=[];for(let y=0;y<w;y++){const x=g[y],{filter:{event:_,schema:b,table:S,filter:C}}=x,T=p&&p[y];if(T&&T.event===_&&T.schema===b&&T.table===S&&T.filter===C)m.push(Object.assign(Object.assign({},x),{id:T.id}));else{this.unsubscribe(),this.state=Be.errored,e==null||e(mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(mr.SUBSCRIBED);return}}).receive("error",p=>{this.state=Be.errored,e==null||e(mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Be.joined&&e===Ci.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const u=await s.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,s,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Be.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(or.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Gl(this,or.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Be.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Gl(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Tw){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const o=e.toLocaleLowerCase(),{close:s,error:l,leave:u,join:c}=or;if(n&&[s,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var v,g,w;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(h,n)):(a=this.bindings[o])===null||a===void 0||a.filter(p=>{var v,g,w,m,y,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,b=(v=p.filter)===null||v===void 0?void 0:v.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(y=(m=p==null?void 0:p.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:g,table:w,commit_timestamp:m,type:y,errors:x}=v;h=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:m,eventType:y,new:{},old:{},errors:x}),this._getPayloadRecords(v))}p.callback(h,n)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&zv.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(or.close,{},e)}_onError(e){this._on(or.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Ih(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Ih(e.columns,e.old_record)),r}};const ql=()=>{},ko={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Fw=[1e3,2e3,5e3,1e4],Uw=1e4,jw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let $w=class{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=lc,this.transport=null,this.heartbeatIntervalMs=ko.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ql,this.ref=0,this.reconnectTimer=null,this.vsn=Nh,this.logger=ql,this.conn=null,this.sendBuffer=[],this.serializer=new kw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${uc.websocket}`,this.httpEndpoint=Mv(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case In.connecting:return On.Connecting;case In.open:return On.Open;case In.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Bv(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Ow,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ko.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:o}=r,s=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${n} ${i} ${s}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===In.open||this.conn.readyState===In.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(or.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([jw],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Nw};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(or.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Pv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ko.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,a,o,s,l,u,c,d,h,p;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:lc,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:ko.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:ql,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Nh,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:v=>Fw[v-1]||Uw,this.vsn){case Rv:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(v,g)=>g(JSON.stringify(v)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(v,g)=>g(JSON.parse(v));break;case Iw:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const Vw=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:zw,get REALTIME_LISTEN_TYPES(){return Ci},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return fc},get REALTIME_PRESENCE_LISTEN_EVENTS(){return dc},get REALTIME_SUBSCRIBE_STATES(){return mr},RealtimeChannel:Bv,RealtimeClient:$w,RealtimePresence:Lv,WebSocketFactory:kv},Symbol.toStringTag,{value:"Module"})),Fv=Ka(Vw);class to extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Se(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Uv extends to{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ds extends to{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Pd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Hw=()=>Response,hc=t=>{if(Array.isArray(t))return t.map(r=>hc(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=hc(n)}),e},Ww=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Gw=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Xl=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},qw=(t,e,r)=>V(void 0,void 0,void 0,function*(){const n=yield Hw();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new Uv(Xl(i),a,o))}).catch(i=>{e(new Ds(Xl(i),i))}):e(new Ds(Xl(t),t))}),Xw=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(Ww(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function ro(t,e,r,n,i,a){return V(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(r,Xw(e,n,i,a)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>qw(l,s,n))})})}function qa(t,e,r,n){return V(this,void 0,void 0,function*(){return ro(t,"GET",e,r,n)})}function ir(t,e,r,n,i){return V(this,void 0,void 0,function*(){return ro(t,"POST",e,n,i,r)})}function pc(t,e,r,n,i){return V(this,void 0,void 0,function*(){return ro(t,"PUT",e,n,i,r)})}function Kw(t,e,r,n){return V(this,void 0,void 0,function*(){return ro(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Dd(t,e,r,n,i){return V(this,void 0,void 0,function*(){return ro(t,"DELETE",e,n,i,r)})}class Yw{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return V(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}}var jv;class Zw{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[jv]="BlobDownloadBuilder",this.promise=null}asStream(){return new Yw(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return V(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}}jv=Symbol.toStringTag;const Qw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Oh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Jw{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Pd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return V(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Oh),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),l&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(l))):(a=n,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const u=this._removeEmptyFolders(r),c=this._getFinalPath(u),d=yield(e=="PUT"?pc:ir)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Se(a))return{data:null,error:a};throw a}})}upload(e,r,n){return V(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return V(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:Oh.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield pc(this.fetch,s.toString(),l,{headers:c});return{data:{path:a,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Se(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return V(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield ir(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),s=o.searchParams.get("token");if(!s)throw new to("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n))return{data:null,error:n};throw n}})}update(e,r,n){return V(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return V(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Se(i))return{data:null,error:i};throw i}})}copy(e,r,n){return V(this,void 0,void 0,function*(){try{return{data:{path:(yield ir(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Se(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return V(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield ir(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Se(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return V(this,void 0,void 0,function*(){try{const i=yield ir(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Se(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"",s=this._getFinalPath(e),l=()=>qa(this.fetch,`${this.url}/${i}/${s}${o}`,{headers:this.headers,noResolveJson:!0});return new Zw(l,this.shouldThrowOnError)}info(e){return V(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield qa(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:hc(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n))return{data:null,error:n};throw n}})}exists(e){return V(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Kw(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n)&&n instanceof Ds){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const s=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${u}`)}}}remove(e){return V(this,void 0,void 0,function*(){try{return{data:yield Dd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}list(e,r,n){return V(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Qw),r),{prefix:e||""});return{data:yield ir(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Se(i))return{data:null,error:i};throw i}})}listV2(e,r){return V(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ir(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const $v="2.86.2",Vv={"X-Client-Info":`storage-js/${$v}`};class e2{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Vv),r),this.fetch=Pd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return V(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield qa(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}getBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield qa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}createBucket(e){return V(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ir(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Se(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return V(this,void 0,void 0,function*(){try{return{data:yield pc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n))return{data:null,error:n};throw n}})}emptyBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}deleteBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield Dd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Xa=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function t2(t,e,r){const n=new URL(e,t);if(r)for(const[i,a]of Object.entries(r))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function r2(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function n2(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:o}){const s=t2(t.baseUrl,n,i),l=await r2(t.auth),u=await e(s,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...l,...o},body:a?JSON.stringify(a):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),h=d&&c?JSON.parse(c):c;if(!u.ok){const p=d?h:void 0,v=p==null?void 0:p.error;throw new Xa((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:p})}return{status:u.status,headers:u.headers,data:h}}}}function Ro(t){return t.join("")}var i2=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ro(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ro(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ro(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ro(t.namespace)}`}),!0}catch(e){if(e instanceof Xa&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Xa&&r.status===409)return;throw r}}};function Kn(t){return t.join("")}var a2=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kn(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Kn(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Kn(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Kn(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kn(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Kn(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Xa&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Xa&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},o2=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=n2({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new i2(this.client,e),this.tableOps=new a2(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class Hv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Vv),r),this.fetch=Pd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}listBuckets(e){return V(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield qa(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}deleteBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield Dd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}from(e){if(!Gw(e))throw new to("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new o2({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>V(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Md={"X-Client-Info":`storage-js/${$v}`,"Content-Type":"application/json"};class Ld extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ct(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Qo extends Ld{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Wv extends Ld{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var vc;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(vc||(vc={}));const dl=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),s2=()=>Response,Gv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},l2=t=>Array.from(new Float32Array(t)),u2=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},Th=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),c2=(t,e,r)=>V(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(o=>{const s=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Qo(Th(o),i,s))}).catch(()=>{const o=i+"",s=a.statusText||`HTTP ${i} error`;e(new Qo(s,i,o))});else{const o=i+"",s=a.statusText||`HTTP ${i} error`;e(new Qo(s,i,o))}}else e(new Wv(Th(t),t))}),d2=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(Gv(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function f2(t,e,r,n,i,a){return V(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(r,d2(e,n,i,a)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>c2(l,s,n))})})}function Lt(t,e,r,n,i){return V(this,void 0,void 0,function*(){return f2(t,"POST",e,n,i,r)})}class qv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Md),r),this.fetch=dl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return V(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}getIndex(e,r){return V(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}})}listIndexes(e){return V(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return V(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}})}}class Xv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Md),r),this.fetch=dl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return V(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Lt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}getVectors(e){return V(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}listVectors(e){return V(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Lt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}queryVectors(e){return V(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}deleteVectors(e){return V(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Lt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}}class Kv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Md),r),this.fetch=dl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return V(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}getBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}listBuckets(){return V(this,arguments,void 0,function*(e={}){try{return{data:yield Lt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}deleteBucket(e){return V(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}}class Yv extends Kv{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new Zv(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return V(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return V(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return V(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return V(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class Zv extends qv{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return V(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return V(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return V(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return V(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Qv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Qv extends Xv{constructor(e,r,n,i,a){super(e,r,a),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return V(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return V(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return V(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return V(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return V(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class h2 extends e2{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new Jw(this.url,this.headers,e,this.fetch)}get vectors(){return new Yv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hv(this.url+"/iceberg",this.headers,this.fetch)}}const p2=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:Hv,StorageApiError:Uv,StorageClient:h2,StorageError:to,StorageUnknownError:Ds,StorageVectorsApiError:Qo,StorageVectorsClient:Yv,StorageVectorsError:Ld,get StorageVectorsErrorCode(){return vc},StorageVectorsUnknownError:Wv,VectorBucketApi:Kv,VectorBucketScope:Zv,VectorDataApi:Xv,VectorIndexApi:qv,VectorIndexScope:Qv,isPlainObject:Gv,isStorageError:Se,isStorageVectorsError:Ct,normalizeToFloat32:l2,resolveFetch:dl,resolveResponse:s2,validateVectorDimension:u2},Symbol.toStringTag,{value:"Module"})),v2=Ka(p2);var Jv={},fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.version=void 0;fl.version="2.86.2";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=fl;let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(Jv);var em={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=i=>i?(...a)=>i(...a):(...a)=>fetch(...a);t.resolveFetch=e;const r=()=>Headers;t.resolveHeadersConstructor=r;const n=(i,a,o)=>{const s=(0,t.resolveFetch)(o),l=(0,t.resolveHeadersConstructor)();return async(u,c)=>{var d;const h=(d=await a())!==null&&d!==void 0?d:i;let p=new l(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",i),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),s(u,Object.assign(Object.assign({},c),{headers:p}))}};t.fetchWithAuth=n})(em);var gn={};Object.defineProperty(gn,"__esModule",{value:!0});gn.isBrowser=void 0;gn.uuid=m2;gn.ensureTrailingSlash=tm;gn.applySettingDefaults=y2;gn.validateSupabaseUrl=x2;function m2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t=="x"?e:e&3|8;return r.toString(16)})}function tm(t){return t.endsWith("/")?t:t+"/"}const g2=()=>typeof window<"u";gn.isBrowser=g2;function y2(t,e){var r,n;const{db:i,auth:a,realtime:o,global:s}=t,{db:l,auth:u,realtime:c,global:d}=e,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=s==null?void 0:s.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function x2(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tm(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var hl={};const rm="2.86.2",ei=30*1e3,mc=3,Kl=mc*ei,w2="http://localhost:9999",_2="supabase.auth.token",E2={"X-Client-Info":`gotrue-js/${rm}`},gc="X-Supabase-Api-Version",nm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},b2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,S2=10*60*1e3;let Mi=class extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}};function G(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let im=class extends Mi{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}};function am(t){return G(t)&&t.name==="AuthApiError"}let qr=class extends Mi{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},Lr=class extends Mi{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}},bt=class extends Lr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function om(t){return G(t)&&t.name==="AuthSessionMissingError"}let Sn=class extends Lr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ha=class extends Lr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},pa=class extends Lr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function sm(t){return G(t)&&t.name==="AuthImplicitGrantRedirectError"}let yc=class extends Lr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ms=class extends Lr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}};function Jo(t){return G(t)&&t.name==="AuthRetryableFetchError"}let xc=class extends Lr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}};function C2(t){return G(t)&&t.name==="AuthWeakPasswordError"}let Ls=class extends Lr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Bs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kh=` 	
\r=`.split(""),A2=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<kh.length;e+=1)t[kh[e].charCodeAt(0)]=-2;for(let e=0;e<Bs.length;e+=1)t[Bs[e].charCodeAt(0)]=e;return t})();function Rh(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Bs[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Bs[n]),e.queuedBits-=6}}function lm(t,e,r){const n=A2[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ph(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{O2(o,n,r)};for(let o=0;o<t.length;o+=1)lm(t.charCodeAt(o),i,a);return e.join("")}function N2(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function I2(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}N2(n,e)}}function O2(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Ai(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)lm(t.charCodeAt(i),r,n);return new Uint8Array(e)}function T2(t){const e=[];return I2(t,r=>e.push(r)),new Uint8Array(e)}function Pn(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>Rh(i,r,n)),Rh(null,r,n),e.join("")}function k2(t){return Math.round(Date.now()/1e3)+t}function R2(){return Symbol("auth-callback")}const tt=()=>typeof window<"u"&&typeof document<"u",yn={tested:!1,writable:!1},um=()=>{if(!tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yn.tested)return yn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yn.tested=!0,yn.writable=!0}catch{yn.tested=!0,yn.writable=!1}return yn.writable};function P2(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const cm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),D2=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ti=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},xn=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},et=async(t,e)=>{await t.removeItem(e)};class pl{constructor(){this.promise=new pl.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}pl.promiseConstructor=Promise;function Yl(t){const e=t.split(".");if(e.length!==3)throw new Ls("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!b2.test(e[n]))throw new Ls("JWT not in base64url format");return{header:JSON.parse(Ph(e[0])),payload:JSON.parse(Ph(e[1])),signature:Ai(e[2]),raw:{header:e[0],payload:e[1]}}}async function M2(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function L2(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function B2(t){return("0"+t.toString(16)).substr(-2)}function z2(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,B2).join("")}async function F2(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function U2(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await F2(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yn(t,e,r=!1){const n=z2();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await ti(t,`${e}-code-verifier`,i);const a=await U2(n);return[a,n===a?"plain":"s256"]}const j2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $2(t){const e=t.headers.get(gc);if(!e||!e.match(j2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function V2(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function H2(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const W2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zn(t){if(!W2.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zl(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function G2(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function Dh(t){return JSON.parse(JSON.stringify(t))}const Cn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),q2=[502,503,504];async function Mh(t){var e;if(!D2(t))throw new Ms(Cn(t),0);if(q2.includes(t.status))throw new Ms(Cn(t),t.status);let r;try{r=await t.json()}catch(a){throw new qr(Cn(a),a)}let n;const i=$2(t);if(i&&i.getTime()>=nm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new xc(Cn(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new bt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new xc(Cn(r),t.status,r.weak_password.reasons);throw new im(Cn(r),t.status||500,n)}const X2=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function Y(t,e,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[gc]||(a[gc]=nm["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await K2(t,e,r+s,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function K2(t,e,r,n,i,a){const o=X2(e,n,i,a);let s;try{s=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new Ms(Cn(l),0)}if(s.ok||await Mh(s),n!=null&&n.noResolveJson)return s;try{return await s.json()}catch(l){await Mh(l)}}function rr(t){var e;let r=null;Q2(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=k2(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Lh(t){const e=rr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Y2(t){return{data:t,error:null}}function Z2(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,o=$i(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function Bh(t){return t}function Q2(t){return t.access_token&&t.refresh_token&&t.expires_in}const es=["global","local","others"];let Bd=class{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=cm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=es[0]){if(es.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${es.join(", ")}`);try{return await Y(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Y(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xr})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=$i(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Y(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Z2,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(G(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Y(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xr})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Y(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Bh});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(G(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Zn(e);try{return await Y(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xr})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Zn(e);try{return await Y(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Xr})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Zn(e);try{return await Y(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xr})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Zn(e.userId);try{const{data:r,error:n}=await Y(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Zn(e.userId),Zn(e.id);try{return{data:await Y(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,a,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Y(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Bh});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(G(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Y(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Y(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Y(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(G(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Y(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Y(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}};function zh(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const An={debug:!!(globalThis&&um()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let dm=class extends zd{};class J2 extends zd{}async function fm(t,e,r){An.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),An.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){An.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{An.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw An.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new dm(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(An.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const Fh={};async function e_(t,e,r){var n;const i=(n=Fh[t])!==null&&n!==void 0?n:Promise.resolve(),a=Promise.race([i.catch(()=>null),e>=0?new Promise((o,s)=>{setTimeout(()=>{s(new J2(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await r());return Fh[t]=a.catch(async o=>{if(o&&o.isAcquireTimeout)return await i,null;throw o}),await a}function t_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hm(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function r_(t){return parseInt(t,16)}function n_(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function i_(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:s,requestId:l,resources:u,scheme:c,uri:d,version:h}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=hm(t.address),v=c?`${c}://${n}`:n,g=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${p}

${g}`;let m=`URI: ${d}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(m+=`
Expiration Time: ${i.toISOString()}`),s&&(m+=`
Not Before: ${s.toISOString()}`),l&&(m+=`
Request ID: ${l}`),u){let y=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);y+=`
- ${x}`}m+=y}return`${w}
${m}`}class ze extends Error{constructor({message:e,code:r,cause:n,name:i}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class zs extends ze{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function a_({error:t,options:e}){var r,n,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ze({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(pm(o)){if(a.rp.id!==o)return new ze({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function o_({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ze({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(pm(n)){if(r.rpId!==n)return new ze({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class s_{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const l_=new s_;function u_(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=$i(t,["challenge","user","excludeCredentials"]),a=Ai(e).buffer,o=Object.assign(Object.assign({},r),{id:Ai(r.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:a,user:o});if(n&&n.length>0){s.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];s.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Ai(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function c_(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=$i(t,["challenge","allowCredentials"]),i=Ai(e).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const s=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},s),{id:Ai(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return a}function d_(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Pn(new Uint8Array(t.response.attestationObject)),clientDataJSON:Pn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function f_(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Pn(new Uint8Array(i.authenticatorData)),clientDataJSON:Pn(new Uint8Array(i.clientDataJSON)),signature:Pn(new Uint8Array(i.signature)),userHandle:i.userHandle?Pn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function pm(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Uh(){var t,e;return!!(tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function h_(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new zs("Browser returned unexpected credential type",e)}:{data:null,error:new zs("Empty credential response",e)}}catch(e){return{data:null,error:a_({error:e,options:t})}}}async function p_(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new zs("Browser returned unexpected credential type",e)}:{data:null,error:new zs("Empty credential response",e)}}catch(e){return{data:null,error:o_({error:e,options:t})}}}const v_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},m_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Fs(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(e(o)){const s=n[a];e(s)?n[a]=Fs(s,o):n[a]=Fs(o)}else n[a]=o}return n}function g_(t,e){return Fs(v_,t,e||{})}function y_(t,e){return Fs(m_,t,e||{})}class x_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},a){try{const{data:o,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:s};const l=i??l_.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=g_(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:c,error:d}=await h_({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=y_(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:c,error:d}=await p_(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(o){return G(o)?{data:null,error:o}:{data:null,error:new qr("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Mi("rpId is required for WebAuthn authentication")};try{if(!Uh())return{data:null,error:new qr("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!o)return{data:null,error:s};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return G(o)?{data:null,error:o}:{data:null,error:new qr("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Mi("rpId is required for WebAuthn registration")};try{if(!Uh())return{data:null,error:new qr("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:s};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return G(o)?{data:null,error:o}:{data:null,error:new qr("Unexpected error in register",o)}}}}t_();const w_={url:w2,storageKey:_2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:E2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function jh(t,e,r){return await r()}const Qn={};let Fd=class wc{get jwks(){var e,r;return(r=(e=Qn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Qn[this.storageKey]=Object.assign(Object.assign({},Qn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Qn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Qn[this.storageKey]=Object.assign(Object.assign({},Qn[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},w_),e);if(this.storageKey=a.storageKey,this.instanceID=(r=wc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,wc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&tt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Bd({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=cm(a.fetch),this.lock=a.lock||jh,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:tt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=fm:this.lock=jh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new x_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:um()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zh(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=zh(this.memoryStorage)),tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${rm}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(tt()&&(r=P2(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),tt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),sm(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return G(r)?this._returnResult({error:r}):this._returnResult({error:new qr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:rr}),{data:o,error:s}=a;if(s||!o)return this._returnResult({data:{user:null,session:null},error:s});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(G(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:c,password:d,options:h}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Yn(this.storage,this.storageKey)),a=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},xform:rr})}else if("phone"in e){const{phone:c,password:d,options:h}=e;a=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:rr})}else throw new ha("You must provide either an email or phone number and a password");const{data:o,error:s}=a;if(s||!o)return await et(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(await et(this.storage,`${this.storageKey}-code-verifier`),G(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:s}=e;r=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Lh})}else if("phone"in e){const{phone:a,password:o,options:s}=e;r=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Lh})}else throw new ha("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new Sn;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,a,o,s,l,u,c,d,h;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:g,wallet:w,statement:m,options:y}=e;let x;if(tt())if(typeof w=="object")x=w;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")x=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const _=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),b=await x.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!b||b.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=hm(b[0]);let C=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const L=await x.request({method:"eth_chainId"});C=r_(L)}const T={domain:_.host,address:S,statement:m,uri:_.href,version:"1",chainId:C,nonce:(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.resources};p=i_(T),v=await x.request({method:"personal_sign",params:[n_(p),S]})}try{const{data:g,error:w}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:rr});if(w)throw w;if(!g||!g.session||!g.user){const m=new Sn;return this._returnResult({data:{user:null,session:null},error:m})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:w})}catch(g){if(G(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var r,n,i,a,o,s,l,u,c,d,h,p;let v,g;if("message"in e)v=e.message,g=e.signature;else{const{chain:w,wallet:m,statement:y,options:x}=e;let _;if(tt())if(typeof m=="object")_=m;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=m}const b=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),y?{statement:y}:null));let C;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")C=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)C=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)v=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${b.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(i=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((s=x==null?void 0:x.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(c=x==null?void 0:x.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:w,error:m}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Pn(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:rr});if(m)throw m;if(!w||!w.session||!w.user){const y=new Sn;return this._returnResult({data:{user:null,session:null},error:y})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:m})}catch(w){if(G(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const r=await xn(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:rr});if(await et(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const s=new Sn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(await et(this.storage,`${this.storageKey}-code-verifier`),G(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=e,s=await Y(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rr}),{data:l,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new Sn;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,a,o;try{if("email"in e){const{email:s,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Yn(this.storage,this.storageKey));const{error:d}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:s,options:l}=e,{data:u,error:c}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new ha("You must provide either an email or phone number.")}catch(s){if(await et(this.storage,`${this.storageKey}-code-verifier`),G(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:s}=await Y(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:rr});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(G(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,a,o;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await Yn(this.storage,this.storageKey));const u=await Y(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:Y2});return!((a=u.data)===null||a===void 0)&&a.url&&tt()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(s){if(await et(this.storage,`${this.storageKey}-code-verifier`),G(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new bt;const{error:i}=await Y(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(G(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await Y(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:s}=await Y(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s})}throw new ha("You must provide either an email or phone number and a type")}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await xn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Kl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await xn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Zl()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=G2(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xr}):await this._useSession(async r=>{var n,i,a;const{data:o,error:s}=r;if(s)throw s;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bt}:await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Xr})})}catch(r){if(G(r))return om(r)&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new bt;const o=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await Yn(this.storage,this.storageKey));const{data:u,error:c}=await Y(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:Xr});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await et(this.storage,`${this.storageKey}-code-verifier`),G(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bt;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=Yl(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(G(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:s}=r;if(s)throw s;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new bt;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!tt())throw new pa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new yc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pa("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yc("No code detected.");const{data:y,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:s,expires_at:l,token_type:u}=e;if(!a||!s||!o||!u)throw new pa("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(s);let h=c+d;l&&(h=parseInt(l));const p=h-c;p*1e3<=ei&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const v=h-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,c);const{data:g,error:w}=await this._getUser(a);if(w)throw w;const m={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:d,expires_at:h,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(n){if(G(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await xn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({error:a});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:s}=await this.admin.signOut(o,e);if(s&&!(am(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=R2(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Yn(this.storage,this.storageKey,!0));try{return await Y(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await et(this.storage,`${this.storageKey}-code-verifier`),G(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,s,l,u,c;const{data:d,error:h}=a;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Y(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return tt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(G(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:o,provider:s,token:l,access_token:u,nonce:c}=e,d=await Y(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:s,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:rr}),{data:h,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Sn}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(i){if(await et(this.storage,`${this.storageKey}-code-verifier`),G(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await Y(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await L2(async i=>(i>0&&await M2(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Y(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rr})),(i,a)=>{const o=200*Math.pow(2,i);return a&&Jo(a)&&Date.now()+o-n<ei})}catch(n){if(this._debug(r,"error",n),G(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),tt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await xn(this.storage,this.storageKey);if(i&&this.userStorage){let o=await xn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await ti(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Zl()}else if(i&&!i.user&&!i.user){const o=await xn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await et(this.storage,this.storageKey+"-user"),await ti(this.storage,this.storageKey,i)):i.user=Zl()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Kl;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Kl}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Jo(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:s}=await this._getUser(i.access_token);!s&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new pl;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new bt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const s={data:a.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(i,"error",a),G(a)){const o={data:null,error:a};return Jo(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,r)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let s=0;s<a.length;s+=1)console.error(a[s]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await et(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ti(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=Dh(i);await ti(this.storage,this.storageKey,a)}else{const i=Dh(r);await ti(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await et(this.storage,this.storageKey),await et(this.storage,this.storageKey+"-code-verifier"),await et(this.storage,this.storageKey+"-user"),this.userStorage&&await et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ei);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/ei);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ei}ms, refresh threshold is ${mc} ticks`),i<=mc&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof zd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Yn(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(s.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await Y(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await Y(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?d_(e.webauthn.credential_response):f_(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:l}=await Y(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await Y(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:s}=o;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u_(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:c_(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Yl(n.access_token);let o=null;a.aal&&(o=a.aal);let s=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(s="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:s,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await Y(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new bt})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new bt});const o=await Y(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&tt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(G(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new bt});const o=await Y(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&tt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(G(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await Y(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new bt})})}catch(e){if(G(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await Y(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new bt})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+S2>i)return n;const{data:a,error:o}=await Y(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return this._returnResult({data:null,error:v});n=p.session.access_token}const{header:i,payload:a,signature:o,raw:{header:s,payload:l}}=Yl(n);r!=null&&r.allowExpired||V2(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:i,signature:o},error:null}}const c=H2(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,T2(`${s}.${l}`)))throw new Ls("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(G(n))return this._returnResult({data:null,error:n});throw n}}};Fd.nextInstanceID={};const __=Bd,E_=Fd,b_=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:__,AuthApiError:im,AuthClient:E_,AuthError:Mi,AuthImplicitGrantRedirectError:pa,AuthInvalidCredentialsError:ha,AuthInvalidJwtError:Ls,AuthInvalidTokenResponseError:Sn,AuthPKCEGrantCodeExchangeError:yc,AuthRetryableFetchError:Ms,AuthSessionMissingError:bt,AuthUnknownError:qr,AuthWeakPasswordError:xc,CustomAuthError:Lr,GoTrueAdminApi:Bd,GoTrueClient:Fd,NavigatorLockAcquireTimeoutError:dm,SIGN_OUT_SCOPES:es,isAuthApiError:am,isAuthError:G,isAuthImplicitGrantRedirectError:sm,isAuthRetryableFetchError:Jo,isAuthSessionMissingError:om,isAuthWeakPasswordError:C2,lockInternals:An,navigatorLock:fm,processLock:e_},Symbol.toStringTag,{value:"Module"})),vm=Ka(b_);Object.defineProperty(hl,"__esModule",{value:!0});hl.SupabaseAuthClient=void 0;const S_=vm;class C_ extends S_.AuthClient{constructor(e){super(e)}}hl.SupabaseAuthClient=C_;Object.defineProperty(Ts,"__esModule",{value:!0});const A_=xv,N_=ft,I_=Fv,O_=v2,Po=Jv,T_=em,$h=gn,k_=hl;let R_=class{constructor(e,r,n){var i,a,o;this.supabaseUrl=e,this.supabaseKey=r;const s=(0,$h.validateSupabaseUrl)(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:Po.DEFAULT_DB_OPTIONS,realtime:Po.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},Po.DEFAULT_AUTH_OPTIONS),{storageKey:l}),global:Po.DEFAULT_GLOBAL_OPTIONS},c=(0,$h.applySettingDefaults)(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=(0,T_.fetchWithAuth)(r,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new N_.PostgrestClient(new URL("rest/v1",s).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new O_.StorageClient(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new A_.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:s,lock:l,debug:u,throwOnError:c},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new k_.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:s,lock:l,debug:u,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new I_.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};Ts.default=R_;(function(t){var e=qn&&qn.__createBinding||(Object.create?function(c,d,h,p){p===void 0&&(p=h);var v=Object.getOwnPropertyDescriptor(d,h);(!v||("get"in v?!d.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(c,p,v)}:function(c,d,h,p){p===void 0&&(p=h),c[p]=d[h]}),r=qn&&qn.__exportStar||function(c,d){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&e(d,c,h)},n=qn&&qn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const i=n(Ts);r(vm,t);var a=ft;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var o=xv;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),r(Fv,t);var s=Ts;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return n(s).default}});const l=(c,d,h)=>new i.default(c,d,h);t.createClient=l;function u(){if(typeof window<"u"||typeof process>"u")return!1;const c=process.version;if(c==null)return!1;const d=c.match(/^v(\d+)\./);return d?parseInt(d[1],10)<=18:!1}u()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Td);const mm=A0(Td),P_=C0({__proto__:null,default:mm},[Td]),{PostgrestError:CC,FunctionsHttpError:AC,FunctionsFetchError:NC,FunctionsRelayError:IC,FunctionsError:OC,FunctionRegion:TC,SupabaseClient:kC,createClient:D_,GoTrueAdminApi:RC,GoTrueClient:PC,AuthAdminApi:DC,AuthClient:MC,navigatorLock:LC,NavigatorLockAcquireTimeoutError:BC,lockInternals:zC,processLock:FC,SIGN_OUT_SCOPES:UC,AuthError:jC,AuthApiError:$C,AuthUnknownError:VC,CustomAuthError:HC,AuthSessionMissingError:WC,AuthInvalidTokenResponseError:GC,AuthInvalidCredentialsError:qC,AuthImplicitGrantRedirectError:XC,AuthPKCEGrantCodeExchangeError:KC,AuthRetryableFetchError:YC,AuthWeakPasswordError:ZC,AuthInvalidJwtError:QC,isAuthError:JC,isAuthApiError:eA,isAuthSessionMissingError:tA,isAuthImplicitGrantRedirectError:rA,isAuthRetryableFetchError:nA,isAuthWeakPasswordError:iA,RealtimePresence:aA,RealtimeChannel:oA,RealtimeClient:sA,REALTIME_LISTEN_TYPES:lA,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:uA,REALTIME_PRESENCE_LISTEN_EVENTS:cA,REALTIME_SUBSCRIBE_STATES:dA,REALTIME_CHANNEL_STATES:fA}=mm||P_,M_="https://tjryadpxcwholxmfgxgs.supabase.co",L_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRqcnlhZHB4Y3dob2x4bWZneGdzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwMTU1MDksImV4cCI6MjA4MDU5MTUwOX0.xKlVniCH_LMgQqj0QdXyZespkt3Oiu2zsTVwMFBkauc",Te=D_(M_,L_,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});Te.auth.getSession().then(({data:{session:t}})=>{t!=null&&t.user});async function gm(t){var i,a;const{data:e,error:r}=await Te.auth.signInWithPassword({email:t.identifier||t.email,password:t.password});if(r)throw new Error(r.message);const n={id:e.user.id,email:e.user.email,role:((i=e.user.user_metadata)==null?void 0:i.role)||"USER",name:((a=e.user.user_metadata)==null?void 0:a.name)||e.user.email.split("@")[0],token:e.session.access_token};return Wi(n),n}async function ym(t){var n,i;const{data:e,error:r}=await Te.auth.signUp({email:t.email,password:t.password,options:{data:{name:t.name,role:t.role||"USER"}}});if(r)throw new Error(r.message);if(e.session){const a={id:e.user.id,email:e.user.email,role:(n=e.user.user_metadata)==null?void 0:n.role,name:(i=e.user.user_metadata)==null?void 0:i.name,token:e.session.access_token};return Wi(a),a}return{message:"Check email for verification!"}}async function no(){try{await Te.auth.signOut()}catch(t){console.warn("Supabase Logout Error (safe to ignore):",t)}finally{localStorage.removeItem("tsm_user")}}async function xm(t){const{error:e}=await Te.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});if(e)throw new Error(e.message);return{message:"Password reset email sent! Check your inbox."}}async function Br(){var i,a;const t=localStorage.getItem("tsm_user");let e=t?JSON.parse(t):null;const{data:{session:r},error:n}=await Te.auth.getSession();if(r)e={id:r.user.id,email:r.user.email,role:((i=r.user.user_metadata)==null?void 0:i.role)||"USER",name:((a=r.user.user_metadata)==null?void 0:a.name)||r.user.email.split("@")[0],token:r.access_token},Wi(e);else if(e)return console.warn("Session invalid, clearing stale user data"),localStorage.removeItem("tsm_user"),null;return e}function Wi(t){localStorage.setItem("tsm_user",JSON.stringify(t))}async function Bn(){const{data:t,error:e}=await Te.from("products").select("*").order("created_at",{ascending:!1});if(e)throw new Error(e.message);return t}async function Ud(t){const{data:e,error:r}=await Te.from("products").insert([t]).select().single();if(r)throw new Error(r.message);return e}async function jd(t,e){const{data:r,error:n}=await Te.from("products").update(e).eq("id",t).select().single();if(n)throw new Error(n.message);return r}async function $d(t){const{error:e}=await Te.from("products").delete().eq("id",t);if(e)throw new Error(e.message);return{message:"Product deleted"}}async function Vd(){const{data:t,error:e}=await Te.rpc("get_all_users");return e?(console.error("Error fetching users:",e),[]):t||[]}async function pi(){const{data:t,error:e}=await Te.from("categories").select("*").order("name",{ascending:!0});return e?(console.error("Error fetching categories:",e),[]):t}async function wm(t){const{data:e,error:r}=await Te.from("categories").insert([{name:t}]).select().single();if(r)throw new Error(r.message);return e}async function _m(t,e){const{data:r,error:n}=await Te.from("categories").update({name:e}).eq("id",t).select().single();if(n)throw new Error(n.message);return r}async function Em(t){const{error:e}=await Te.from("categories").delete().eq("id",t);if(e)throw new Error(e.message);return{message:"Category deleted"}}async function ts(){const{data:t}=await Te.from("products").select("stock_qty, selling_price"),e=(t==null?void 0:t.length)||0,r=(t==null?void 0:t.reduce((i,a)=>i+(a.stock_qty||0),0))||0,n=(t==null?void 0:t.reduce((i,a)=>i+(a.stock_qty||0)*(a.selling_price||0),0))||0;return{totalProducts:e,totalStock:r,stockValue:n,pendingReturns:0}}async function Us(t){const e=await Br(),r=t.user_id||e.id,{data:n,error:i}=await Te.from("transactions").insert([{user_id:r,product_id:t.product_id,type:t.type,quantity:t.quantity,customer_name:t.customer_name}]).select().single();if(i)throw new Error(i.message);return t.type==="TRANSFER"?await Te.rpc("decrement_stock",{product_id:t.product_id,qty:t.quantity}):t.type==="RETURN"&&await Te.rpc("increment_stock",{product_id:t.product_id,qty:t.quantity}),n}async function Hd(t=null,e=null){const r=await Br();let n=Te.from("transactions").select(`
      *,
      products (name, barcode)
    `).eq("user_id",r.id).order("created_at",{ascending:!1});t&&(n=n.gte("created_at",t)),e&&(n=n.lte("created_at",e));const{data:i,error:a}=await n;if(a)throw new Error(a.message);return i.map(o=>{var s,l;return{...o,product_name:((s=o.products)==null?void 0:s.name)||"Unknown",product_barcode:((l=o.products)==null?void 0:l.barcode)||"N/A"}})}async function bm(t=null,e=null){let r=Te.from("transactions").select(`
      *,
      products (name, barcode)
    `).order("created_at",{ascending:!1});t&&(r=r.gte("created_at",t)),e&&(r=r.lte("created_at",e));const{data:n,error:i}=await r;if(i)throw new Error(i.message);return n.map(a=>{var o,s;return{...a,product_name:((o=a.products)==null?void 0:o.name)||"Unknown",product_barcode:((s=a.products)==null?void 0:s.barcode)||"N/A",customer_name:a.customer_name||"N/A"}})}async function Sm(){const t=await Br(),{data:e}=await Te.from("transactions").select("type, quantity, created_at").eq("user_id",t.id);let r=0,n=0,i=0;const a=new Date().toISOString().split("T")[0];return e==null||e.forEach(o=>{const s=o.created_at.startsWith(a);o.type==="TRANSFER"?(n+=o.quantity,s&&(r+=o.quantity)):(o.type==="RETURN"||o.type==="USED")&&(i+=o.quantity)}),{productsTaken:r,currentStockHolding:n-i}}async function Cm(t){if(t.items&&Array.isArray(t.items)){const e=[];for(const r of t.items)e.push(await Us({...t,product_id:r.productId,quantity:r.qty,type:"RETURN"}));return e}return Us({...t,type:"RETURN"})}async function Am(t){const e=await Br();let r=Te.from("transactions").select(`
      *,
      products (
        id,
        name,
        barcode,
        category,
        size,
        selling_price
      )
    `).eq("type","TRANSFER");e.role!=="ADMIN"||!t?r=r.eq("user_id",e.id):r=r.eq("user_id",t);const{data:n,error:i}=await r.order("created_at",{ascending:!1});if(i)return console.error("Error fetching inventory:",i),[];const a={};return n.forEach(o=>{const s=o.product_id;a[s]||(a[s]={product_id:s,product:o.products,quantity:0,transactions:[]}),a[s].quantity+=o.quantity,a[s].transactions.push(o)}),Object.values(a)}const B_=Object.freeze(Object.defineProperty({__proto__:null,createCategory:wm,createProduct:Ud,createReturn:Cm,createUserTransaction:Us,deleteCategory:Em,deleteProduct:$d,fetchAllTransactions:bm,fetchCategories:pi,fetchProducts:Bn,fetchStaffInventory:Am,fetchUsers:Vd,getCurrentUser:Br,getDashboardStats:ts,getUserStats:Sm,getUserTransactions:Hd,login:gm,logout:no,resetPassword:xm,saveUser:Wi,signup:ym,updateCategory:_m,updateProduct:jd},Symbol.toStringTag,{value:"Module"}));function z_(){const[t,e]=A.useState(""),[r,n]=A.useState(""),[i,a]=A.useState(!1),[o,s]=A.useState(""),[l,u]=A.useState(!1),[c,d]=A.useState(!1),[h,p]=A.useState(""),[v,g]=A.useState(""),w=hr();async function m(x){x.preventDefault(),a(!0),s("");try{const _=await gm({identifier:t,password:r});Wi(_),_.role==="ADMIN"?w("/admin"):w("/user")}catch(_){console.error("Login error:",_),s("Invalid credentials due to: "+(_.message||"Unknown error"))}finally{a(!1)}}async function y(x){x==null||x.preventDefault(),a(!0),s(""),g("");try{const _=await xm(h);g(_.message),setTimeout(()=>{d(!1),p(""),g("")},3e3)}catch(_){s(_.message||"Failed to send reset email")}finally{a(!1)}}return f.createElement("div",{className:"auth-container"},f.createElement("div",{className:"flex flex-col items-center w-full max-w-[480px]"},f.createElement("div",{className:"flex items-center gap-3 mb-8"},f.createElement("img",{src:"/smart-florring-logo-main.png",alt:"Smart Floor",className:"h-10"}),f.createElement("span",{className:"text-xl font-bold tracking-wide text-zinc-900 dark:text-white"},"SMART FLOOR")),f.createElement("div",{className:"auth-card"},f.createElement("div",{className:"flex gap-6 mb-8 border-b border-zinc-100 dark:border-zinc-800"},f.createElement(Mt,{to:"/login",className:"auth-tab active"},"Log In"),f.createElement(Mt,{to:"/signup",className:"auth-tab inactive"},"Sign Up")),f.createElement("div",{className:"mb-8"},f.createElement("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2"},"Log In to Your Account"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm"},"Welcome back! Please enter your details.")),f.createElement("form",{onSubmit:m,className:"flex flex-col gap-5"},f.createElement("div",null,f.createElement("label",{className:"block text-sm font-bold text-zinc-700 dark:text-zinc-300 mb-2"},"Email"),f.createElement("input",{className:"auth-input",placeholder:"Enter your email",value:t,onChange:x=>e(x.target.value)})),f.createElement("div",null,f.createElement("label",{className:"block text-sm font-bold text-zinc-700 dark:text-zinc-300 mb-2"},"Password"),f.createElement("div",{className:"relative"},f.createElement("input",{className:"auth-input pr-10",type:l?"text":"password",placeholder:"Enter your password",value:r,onChange:x=>n(x.target.value)}),f.createElement("button",{type:"button",onClick:()=>u(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200"},f.createElement("span",{className:"material-symbols-outlined text-[20px]"},l?"visibility_off":"visibility")))),o&&f.createElement("div",{className:"text-red-500 text-sm"},o),f.createElement("div",{className:"flex justify-between items-center"},f.createElement("div",null),f.createElement("button",{type:"button",onClick:()=>d(!0),className:"text-primary text-sm font-medium hover:underline"},"Forgot password?")),f.createElement("button",{className:"auth-btn",disabled:i},i?"Logging in...":"Log In")))),c&&f.createElement("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},f.createElement("div",{className:"bg-white dark:bg-[#1c1a16] rounded-2xl p-8 max-w-md w-full border border-zinc-200 dark:border-zinc-800"},f.createElement("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2"},"Reset Password"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6"},"Enter your email address and we'll send you a link to reset your password."),f.createElement("form",{onSubmit:y,className:"space-y-4"},f.createElement("div",null,f.createElement("label",{className:"block text-sm font-bold text-zinc-700 dark:text-zinc-300 mb-2"},"Email"),f.createElement("input",{type:"email",className:"auth-input",placeholder:"Enter your email",value:h,onChange:x=>p(x.target.value),required:!0})),o&&f.createElement("div",{className:"text-red-500 text-sm"},o),v&&f.createElement("div",{className:"text-green-500 text-sm"},v),f.createElement("div",{className:"flex gap-3"},f.createElement("button",{type:"button",onClick:()=>{d(!1),p(""),s(""),g("")},className:"flex-1 py-3 border border-zinc-200 dark:border-zinc-700 text-zinc-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800"},"Cancel"),f.createElement("button",{type:"submit",disabled:i,className:"flex-1 auth-btn"},i?"Sending...":"Send Reset Link"))))))}function F_(){const[t,e]=A.useState(""),[r,n]=A.useState(""),[i,a]=A.useState(""),[o,s]=A.useState(!1),[l,u]=A.useState(""),[c,d]=A.useState(!1),h=hr();async function p(v){var g,w;v==null||v.preventDefault(),s(!0),u("");try{const m=await ym({name:t,email:r,password:i,role:"USER"});Wi({token:m.token,role:m.role,name:m.name,id:m.id}),h("/user")}catch(m){console.error("Signup error:",m),u((m==null?void 0:m.message)||((w=(g=m==null?void 0:m.response)==null?void 0:g.data)==null?void 0:w.message)||"Signup failed")}finally{s(!1)}}return f.createElement("div",{className:"auth-container"},f.createElement("div",{className:"flex flex-col items-center w-full max-w-[480px]"},f.createElement("div",{className:"flex items-center gap-3 mb-8"},f.createElement("img",{src:"/smart-florring-logo-main.png",alt:"Smart Floor",className:"h-10"}),f.createElement("span",{className:"text-xl font-bold tracking-wide text-zinc-900 dark:text-white"},"SMART FLOOR")),f.createElement("div",{className:"auth-card"},f.createElement("div",{className:"flex gap-6 mb-8 border-b border-zinc-100 dark:border-zinc-800"},f.createElement(Mt,{to:"/login",className:"auth-tab inactive"},"Log In"),f.createElement(Mt,{to:"/signup",className:"auth-tab active"},"Sign Up")),f.createElement("div",{className:"mb-8"},f.createElement("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2"},"Create an Account"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm"},"Join us to manage your inventory.")),f.createElement("form",{onSubmit:p,className:"flex flex-col gap-5"},f.createElement("div",null,f.createElement("label",{className:"block text-sm font-bold text-zinc-700 dark:text-zinc-300 mb-2"},"Full Name"),f.createElement("input",{className:"auth-input",placeholder:"Enter your full name",value:t,onChange:v=>e(v.target.value)})),f.createElement("div",null,f.createElement("label",{className:"block text-sm font-bold text-zinc-700 dark:text-zinc-300 mb-2"},"Email"),f.createElement("input",{className:"auth-input",placeholder:"Enter your email",value:r,onChange:v=>n(v.target.value)})),f.createElement("div",null,f.createElement("label",{className:"block text-sm font-bold text-zinc-700 dark:text-zinc-300 mb-2"},"Password"),f.createElement("div",{className:"relative"},f.createElement("input",{className:"auth-input pr-10",type:c?"text":"password",placeholder:"Create a password",value:i,onChange:v=>a(v.target.value)}),f.createElement("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200"},f.createElement("span",{className:"material-symbols-outlined text-[20px]"},c?"visibility_off":"visibility")))),l&&f.createElement("div",{className:"text-red-500 text-sm"},l),f.createElement("button",{className:"auth-btn mt-2",disabled:o},o?"Creating Account...":"Sign Up")))))}function U_(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function j_(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var $_=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V_=function(t){$_(e,t);function e(r,n){var i=this.constructor,a=t.call(this,r,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),U_(a,i.prototype),j_(a),a}return e}(Error),H_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kt=function(t){H_(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(V_),W_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),De=function(t){W_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(kt),G_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K=function(t){G_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(kt),Nm=function(){function t(e){if(this.binarizer=e,e===null)throw new K("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var a=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),q_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ue=function(t){q_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(kt),X_=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),ye=function(){function t(){}return t.arraycopy=function(e,r,n,i,a){for(;a--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),K_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wd=function(t){K_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(kt),Y_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vh=function(t){Y_(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(Wd),Z_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ge=function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var a=r;a<n;a++)e[a]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new K("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new Vh(r);if(n>e)throw new Vh(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var a=Z_(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,a=new Int32Array(i);return ye.arraycopy(e,r,a,0,i),a},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=n(r,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},t.numberComparator=function(e,r){return e-r},t}(),te=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Qe=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);ye.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=n[i]}var s=i*32+te.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=~n[i]}var s=i*32+te.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new K;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),a=this.bits,o=n;o<=i;o++){var s=o>n?0:e&31,l=o<i?31:r&31,u=(2<<l)-(1<<s);a[o]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new K;if(r===e)return!0;r--;for(var i=Math.floor(e/32),a=Math.floor(r/32),o=this.bits,s=i;s<=a;s++){var l=s>i?0:e&31,u=s<a?31:r&31,c=(2<<u)-(1<<l)&4294967295;if((o[s]&c)!==(n?c:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new K("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new K("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;r[n+a]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,a=0;a<n;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-a]=o}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,a=1;a<n;a++){var u=e[a];l|=u<<32-s,e[a-1]=l,l=u>>>s}e[n-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&Ge.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+Ge.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),_c;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(_c||(_c={}));const pe=_c;var Q_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U=function(t){Q_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(kt),J_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ce;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(ce||(ce={}));var We=function(){function t(e,r,n){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var l=this.values,u=0,c=l.length;u!==c;u++){var d=l[u];t.VALUES_TO_ECI.set(d,this)}try{for(var h=J_(o),p=h.next();!p.done;p=h.next()){var v=p.value;t.NAME_TO_ECI.set(v,this)}}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new U("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new U("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new U("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(ce.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(ce.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(ce.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(ce.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(ce.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(ce.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(ce.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(ce.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(ce.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(ce.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(ce.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(ce.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(ce.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(ce.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(ce.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(ce.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(ce.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(ce.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(ce.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(ce.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(ce.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(ce.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(ce.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(ce.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(ce.Big5,28,"Big5"),t.GB18030=new t(ce.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(ce.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),eE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rs=function(t){eE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(kt),Xt=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof We?e:We.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(We.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new rs("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(We.UTF8)||e.equals(We.ISO8859_1)||e.equals(We.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},t}(),ne=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Xt.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(pe.CHARACTER_SET)!==void 0)return r.get(pe.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,o=!0,s=0,l=0,u=0,c=0,d=0,h=0,p=0,v=0,g=0,w=0,m=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,x=0;x<n&&(i||a||o);x++){var _=e[x]&255;o&&(s>0?_&128?s--:o=!1:_&128&&(_&64?(s++,_&32?(s++,_&16?(s++,_&8?o=!1:c++):u++):l++):o=!1)),i&&(_>127&&_<160?i=!1:_>159&&(_<192||_===215||_===247)&&m++),a&&(d>0?_<64||_===127||_>252?a=!1:d--:_===128||_===160||_>239?a=!1:_>160&&_<224?(h++,v=0,p++,p>g&&(g=p)):_>127?(d++,p=0,v++,v>w&&(w=v)):(p=0,v=0))}return o&&s>0&&(o=!1),a&&d>0&&(a=!1),o&&(y||l+u+c>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||g>=3||w>=3)?t.SHIFT_JIS:i&&a?g===2&&h===2||m*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:a?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function a(s,l,u,c,d,h){if(s==="%%")return"%";if(r[++i]!==void 0){s=c?parseInt(c.substr(1)):void 0;var p=d?parseInt(d.substr(1)):void 0,v;switch(h){case"s":v=r[i];break;case"c":v=r[i][0];break;case"f":v=parseFloat(r[i]).toFixed(s);break;case"p":v=parseFloat(r[i]).toPrecision(s);break;case"e":v=parseFloat(r[i]).toExponential(s);break;case"x":v=parseInt(r[i]).toString(p||16);break;case"d":v=parseFloat(parseInt(r[i],p||10).toPrecision(s)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(p);for(var g=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";v.length<g;)v=l!==void 0?v+w:w+v;return v}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},t.getBytes=function(e,r){return Xt.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=We.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=We.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=We.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),J=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ne.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),_r=function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new K("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),a=0;a<r;a++)for(var o=e[a],s=0;s<n;s++)o[s]&&i.set(s,a);return i},t.parseFromString=function(e,r,n){if(e===null)throw new K("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,l=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new K("row lengths do not match");o=a,l++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,i[a]=!0,a++;else if(e.substring(u,u+n.length)===n)u+=n.length,i[a]=!1,a++;else throw new K("illegal character encountered: "+e.substring(u));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new K("row lengths do not match");l++}for(var c=new t(s,l),d=0;d<a;d++)i[d]&&c.set(Math.floor(d%s),Math.floor(d/s));return c},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new K("input matrix dimensions do not match");for(var r=new Qe(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*n,l=e.getRow(a,r).getBitArray(),u=0;u<n;u++)i[s+u]^=l[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new K("Left and top must be nonnegative");if(i<1||n<1)throw new K("Height and width must be at least 1");var a=e+n,o=r+i;if(o>this.height||a>this.width)throw new K("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,u=r;u<o;u++)for(var c=u*s,d=e;d<a;d++)l[c+Math.floor(d/32)]|=1<<(d&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Qe(this.width):r.clear();for(var n=this.rowSize,i=this.bits,a=e*n,o=0;o<n;o++)r.setBulk(o*32,i[a+o]);return r},t.prototype.setRow=function(e,r){ye.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Qe(e),i=new Qe(e),a=0,o=Math.floor((r+1)/2);a<o;a++)n=this.getRow(a,n),i=this.getRow(r-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(r-1-a,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,a=e,o=r,s=-1,l=-1,u=0;u<r;u++)for(var c=0;c<n;c++){var d=i[u*n+c];if(d!==0){if(u<o&&(o=u),u>l&&(l=u),c*32<a){for(var h=0;!(d<<31-h&4294967295);)h++;c*32+h<a&&(a=c*32+h)}if(c*32+31>s){for(var h=31;!(d>>>h);)h--;c*32+h>s&&(s=c*32+h)}}}return s<a||l<o?null:Int32Array.from([a,o,s-a+1,l-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,a=n%e*32,o=r[n],s=0;!(o<<31-s&4294967295);)s++;return a+=s,Int32Array.from([a,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,o=r[n],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&Ge.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ge.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new J,a=0,o=this.height;a<o;a++){for(var s=0,l=this.width;s<l;s++)i.append(this.get(s,a)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),tE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(t){tE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(kt),rE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nE=function(t){rE(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new Qe(a):n.clear(),this.initArrays(a);for(var o=i.getRow(r,this.luminances),s=this.buckets,l=0;l<a;l++)s[(o[l]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(s);if(a<3)for(var l=0;l<a;l++)(o[l]&255)<u&&n.set(l);else for(var c=o[0]&255,d=o[1]&255,l=1;l<a-1;l++){var h=o[l+1]&255;(d*4-c-h)/2<u&&n.set(l),c=d,d=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),a=new _r(n,i);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var l=Math.floor(i*s/5),u=r.getRow(l,this.luminances),c=Math.floor(n*4/5),d=Math.floor(n/5);d<c;d++){var h=u[d]&255;o[h>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(o),v=r.getMatrix(),s=0;s<i;s++)for(var g=s*n,d=0;d<n;d++){var h=v[g+d]&255;h<p&&a.set(d,s)}return a},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,a=0,o=0,s=0;s<n;s++)r[s]>o&&(a=s,o=r[s]),r[s]>i&&(i=r[s]);for(var l=0,u=0,s=0;s<n;s++){var c=s-a,d=r[s]*c*c;d>u&&(l=s,u=d)}if(a>l){var h=a;a=l,l=h}if(l-a<=n/16)throw new k;for(var p=l-1,v=-1,s=l-1;s>a;s--){var g=s-a,d=g*g*(l-s)*(i-r[s]);d>v&&(p=s,v=d)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(X_),iE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Im=function(t){iE(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var s=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&s++;var l=e.calculateBlackPoints(a,o,s,n,i),u=new _r(n,i);e.calculateThresholdForBlock(a,o,s,n,i,l,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,a,o,s,l){for(var u=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,d=0;d<i;d++){var h=d<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var p=e.cap(d,2,i-3),v=0;v<n;v++){var g=v<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var w=e.cap(v,2,n-3),m=0,y=-2;y<=2;y++){var x=s[p+y];m+=x[w-2]+x[w-1]+x[w]+x[w+1]+x[w+2]}var _=m/25;e.thresholdBlock(r,g,h,_,a,l)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,a,o,s){for(var l=0,u=i*o+n;l<e.BLOCK_SIZE;l++,u+=o)for(var c=0;c<e.BLOCK_SIZE;c++)(r[u+c]&255)<=a&&s.set(n+c,i+l)},e.calculateBlackPoints=function(r,n,i,a,o){for(var s=o-e.BLOCK_SIZE,l=a-e.BLOCK_SIZE,u=new Array(i),c=0;c<i;c++){u[c]=new Int32Array(n);var d=c<<e.BLOCK_SIZE_POWER;d>s&&(d=s);for(var h=0;h<n;h++){var p=h<<e.BLOCK_SIZE_POWER;p>l&&(p=l);for(var v=0,g=255,w=0,m=0,y=d*a+p;m<e.BLOCK_SIZE;m++,y+=a){for(var x=0;x<e.BLOCK_SIZE;x++){var _=r[y+x]&255;v+=_,_<g&&(g=_),_>w&&(w=_)}if(w-g>e.MIN_DYNAMIC_RANGE)for(m++,y+=a;m<e.BLOCK_SIZE;m++,y+=a)for(var x=0;x<e.BLOCK_SIZE;x++)v+=r[y+x]&255}var b=v>>e.BLOCK_SIZE_POWER*2;if(w-g<=e.MIN_DYNAMIC_RANGE&&(b=g/2,c>0&&h>0)){var S=(u[c-1][h]+2*u[c][h-1]+u[c-1][h-1])/4;g<S&&(b=S)}u[c][h]=b}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(nE),io=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new rs("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new rs("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new rs("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new J,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t}(),aE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vl=function(t){aE(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(r[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,a){return new e(this.delegate.crop(r,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(io),oE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sE=function(t){oE(e,t);function e(r,n){n===void 0&&(n=!1);var i=t.call(this,r.width,r.height)||this;return i.canvas=r,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(r,n),i}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var i=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,l=0,u=r.length;s<u;s+=4,l++){var c=void 0,d=r[s+3];if(d===0)c=255;else{var h=r[s],p=r[s+1],v=r[s+2];c=306*h+601*p+117*v+512>>10}o[l]=c}else for(var s=0,l=0,g=r.length;s<g;s+=4,l++){var c=void 0,d=r[s+3];if(d===0)c=255;else{var h=r[s],p=r[s+1],v=r[s+2];c=306*h+601*p+117*v+512>>10}o[l]=255-c}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new K("Requested row is outside the image: "+r);var i=this.getWidth(),a=r*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return t.prototype.crop.call(this,r,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),u=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return n.width=l,n.height=u,i.translate(l/2,u/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new vl(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(io),lE=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),vt=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})},mt=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},uE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gi=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return vt(this,void 0,void 0,function(){var e,r,n,i,a,o,s,l,u,c,d,h;return mt(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=uE(e),i=n.next();!i.done;i=n.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,l=a.label||"Video device "+(r.length+1),u=a.groupId,c={deviceId:s,label:l,kind:o,groupId:u},r.push(c))}catch(v){d={error:v}}finally{try{i&&!i.done&&(h=n.return)&&h.call(n)}finally{if(d)throw d.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return vt(this,void 0,void 0,function(){var e;return mt(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new lE(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return vt(this,void 0,void 0,function(){var r;return mt(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return vt(this,void 0,void 0,function(){return mt(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return vt(this,void 0,void 0,function(){var n,i;return mt(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return vt(this,void 0,void 0,function(){var n;return mt(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return vt(this,void 0,void 0,function(){var n,i;return mt(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return vt(this,void 0,void 0,function(){return mt(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return vt(this,void 0,void 0,function(){var i,a;return mt(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return vt(this,void 0,void 0,function(){var i;return mt(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return vt(this,void 0,void 0,function(){var i;return mt(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return vt(this,void 0,void 0,function(){var n;return mt(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return vt(this,void 0,void 0,function(){return mt(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new De("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new De("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new De("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new De("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new De("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new De("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new De("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new De("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new De("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new De("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return vt(this,void 0,void 0,function(){return mt(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return vt(this,void 0,void 0,function(){return mt(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new k("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);o(l)}catch(h){var u=r&&h instanceof k,c=h instanceof Ue||h instanceof U,d=c&&n;if(u||d)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(h)}};return new Promise(function(o,s){return a(o,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);r(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(l){r(null,l);var o=l instanceof Ue||l instanceof U,s=l instanceof k;(o||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new sE(n,r),a=new Im(i);return new Nm(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),pt=function(){function t(e,r,n,i,a,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=ye.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=ye.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);ye.arraycopy(r,0,n,0,r.length),ye.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Ec;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ec||(Ec={}));const q=Ec;var bc;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(bc||(bc={}));const at=bc;var ml=function(){function t(e,r,n,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),va=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new K;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),ln=function(){function t(e,r){if(r.length===0)throw new K;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),ye.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,a=r.length;i!==a;i++){var o=r[i];n=va.addOrSubtract(n,o)}return n}n=r[0];for(var s=r.length,l=this.field,i=1;i<s;i++)n=va.addOrSubtract(l.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new K("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;ye.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=va.addOrSubtract(r[s-o],n[s]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new K("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=this.field,l=0;l<n;l++)for(var u=r[l],c=0;c<a;c++)o[l+c]=va.addOrSubtract(o[l+c],s.multiply(u,i[c]));return new t(s,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),a=this.coefficients,o=0;o<r;o++)i[o]=n.multiply(a[o],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new K;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(n[s],r);return new t(o,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new K("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new K("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=r.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),l=r.multiply(i.getCoefficient(i.getDegree()),o),u=e.multiplyByMonomial(s,l),c=r.buildMonomial(s,l);n=n.addOrSubtract(c),i=i.addOrSubtract(u)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),cE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Om=function(t){cE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(kt),dE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),At=function(t){dE(e,t);function e(r,n,i){var a=t.call(this)||this;a.primitive=r,a.size=n,a.generatorBase=i;for(var o=new Int32Array(n),s=1,l=0;l<n;l++)o[l]=s,s*=2,s>=n&&(s^=r,s&=n-1);a.expTable=o;for(var u=new Int32Array(n),l=0;l<n-1;l++)u[o[l]]=l;return a.logTable=u,a.zero=new ln(a,Int32Array.from([0])),a.one=new ln(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new K;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new ln(this,i)},e.prototype.inverse=function(r){if(r===0)throw new Om;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+te.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(va),fE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Do=function(t){fE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(kt),hE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ao=function(t){hE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(kt),gl=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new ln(n,e),a=new Int32Array(r),o=!0,s=0;s<r;s++){var l=i.evaluateAt(n.exp(s+n.getGeneratorBase()));a[a.length-1-s]=l,l!==0&&(o=!1)}if(!o)for(var u=new ln(n,a),c=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),d=c[0],h=c[1],p=this.findErrorLocations(d),v=this.findErrorMagnitudes(h,p),s=0;s<p.length;s++){var g=e.length-1-n.log(p[s]);if(g<0)throw new Do("Bad error location");e[g]=At.addOrSubtract(e[g],v[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=this.field,o=e,s=r,l=a.getZero(),u=a.getOne();s.getDegree()>=(n/2|0);){var c=o,d=l;if(o=s,l=u,o.isZero())throw new Do("r_{i-1} was zero");s=c;for(var h=a.getZero(),p=o.getCoefficient(o.getDegree()),v=a.inverse(p);s.getDegree()>=o.getDegree()&&!s.isZero();){var g=s.getDegree()-o.getDegree(),w=a.multiply(s.getCoefficient(s.getDegree()),v);h=h.addOrSubtract(a.buildMonomial(g,w)),s=s.addOrSubtract(o.multiplyByMonomial(g,w))}if(u=h.multiply(l).addOrSubtract(d),s.getDegree()>=o.getDegree())throw new ao("Division algorithm failed to reduce polynomial?")}var m=u.getCoefficient(0);if(m===0)throw new Do("sigmaTilde(0) was zero");var y=a.inverse(m),x=u.multiplyScalar(y),_=s.multiplyScalar(y);return[x,_]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,a=this.field,o=1;o<a.getSize()&&i<r;o++)e.evaluateAt(o)===0&&(n[i]=a.inverse(o),i++);if(i!==r)throw new Do("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),a=this.field,o=0;o<n;o++){for(var s=a.inverse(r[o]),l=1,u=0;u<n;u++)if(o!==u){var c=a.multiply(r[u],s),d=c&1?c&-2:c|1;l=a.multiply(l,d)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(l)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},t}(),rt;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(rt||(rt={}));var Hh=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),a=t.convertBoolArrayToByteArray(i),o=t.getEncodedData(i),s=new ml(a,o,null,null);return s.setNumBits(i.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=rt.UPPER,i=rt.UPPER,a="",o=0;o<r;)if(i===rt.BINARY){if(r-o<5)break;var s=t.readCode(e,o,5);if(o+=5,s===0){if(r-o<11)break;s=t.readCode(e,o,11)+31,o+=11}for(var l=0;l<s;l++){if(r-o<8){o=r;break}var u=t.readCode(e,o,8);a+=ne.castAsNonUtf8Char(u),o+=8}i=n}else{var c=i===rt.DIGIT?4:5;if(r-o<c)break;var u=t.readCode(e,o,c);o+=c;var d=t.getCharacter(i,u);d.startsWith("CTRL_")?(n=i,i=t.getTable(d.charAt(5)),d.charAt(6)==="L"&&(n=i)):(a+=d,i=n)}return a},t.getTable=function(e){switch(e){case"L":return rt.LOWER;case"P":return rt.PUNCT;case"M":return rt.MIXED;case"D":return rt.DIGIT;case"B":return rt.BINARY;case"U":default:return rt.UPPER}},t.getCharacter=function(e,r){switch(e){case rt.UPPER:return t.UPPER_TABLE[r];case rt.LOWER:return t.LOWER_TABLE[r];case rt.MIXED:return t.MIXED_TABLE[r];case rt.PUNCT:return t.PUNCT_TABLE[r];case rt.DIGIT:return t.DIGIT_TABLE[r];default:throw new ao("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=At.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=At.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=At.AZTEC_DATA_10):(n=12,r=At.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new U;for(var o=e.length%n,s=new Int32Array(a),l=0;l<a;l++,o+=n)s[l]=t.readCode(e,o,n);try{var u=new gl(r);u.decode(s,a-i)}catch(w){throw new U(w)}for(var c=(1<<n)-1,d=0,l=0;l<i;l++){var h=s[l];if(h===0||h===c)throw new U;(h===1||h===c-1)&&d++}for(var p=new Array(i*n-d),v=0,l=0;l<i;l++){var h=s[l];if(h===1||h===c-1)p.fill(h>1,v,v+n-1),v+=n-1;else for(var g=n-1;g>=0;--g)p[v++]=(h&1<<g)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<a.length;s++)a[s]=s;else for(var l=i+1+2*te.truncDivision(te.truncDivision(i,2)-1,15),u=i/2,c=te.truncDivision(l,2),s=0;s<u;s++){var d=s+te.truncDivision(s,15);a[u-s-1]=c-d-1,a[u+s]=c+d+1}for(var s=0,h=0;s<n;s++){for(var p=(n-s)*4+(r?9:12),v=s*2,g=i-1-v,w=0;w<p;w++)for(var m=w*2,y=0;y<2;y++)o[h+m+y]=e.get(a[v+y],a[v+w]),o[h+2*p+m+y]=e.get(a[v+w],a[g-y]),o[h+4*p+m+y]=e.get(a[g-y],a[g-w]),o[h+6*p+m+y]=e.get(a[g-w],a[v+y]);h+=p*8}return o},t.readCode=function(e,r,n){for(var i=0,a=r;a<r+n;a++)i<<=1,e[a]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),oe=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var a=e-n,o=r-i;return Math.sqrt(a*a+o*o)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var a=e[n];r+=a}return r},t}(),Sc=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),W=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Sc.floatToIntBits(this.x)+Sc.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(n>=r&&n>=i?(o=e[0],a=e[1],s=e[2]):i>=n&&i>=r?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var l=a;a=s,s=l}e[0]=a,e[1]=o,e[2]=s},t.distance=function(e,r){return oe.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,a=r.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},t}(),Gd=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),pE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vE=function(t){pE(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Gd),Cc=function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=r/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,l=!1,u=!1,c=!1,d=!1,h=this.width,p=this.height;o;){o=!1;for(var v=!0;(v||!l)&&r<h;)v=this.containsBlackPoint(n,i,r,!1),v?(r++,o=!0,l=!0):l||r++;if(r>=h){a=!0;break}for(var g=!0;(g||!u)&&i<p;)g=this.containsBlackPoint(e,r,i,!0),g?(i++,o=!0,u=!0):u||i++;if(i>=p){a=!0;break}for(var w=!0;(w||!c)&&e>=0;)w=this.containsBlackPoint(n,i,e,!1),w?(e--,o=!0,c=!0):c||e--;if(e<0){a=!0;break}for(var m=!0;(m||!d)&&n>=0;)m=this.containsBlackPoint(e,r,n,!0),m?(n--,o=!0,d=!0):d||n--;if(n<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var y=r-e,x=null,_=1;x===null&&_<y;_++)x=this.getBlackPointOnSegment(e,i-_,e+_,i);if(x==null)throw new k;for(var b=null,_=1;b===null&&_<y;_++)b=this.getBlackPointOnSegment(e,n+_,e+_,n);if(b==null)throw new k;for(var S=null,_=1;S===null&&_<y;_++)S=this.getBlackPointOnSegment(r,n+_,r-_,n);if(S==null)throw new k;for(var C=null,_=1;C===null&&_<y;_++)C=this.getBlackPointOnSegment(r,i-_,r-_,i);if(C==null)throw new k;return this.centerEdges(C,x,S,b)}else throw new k},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var a=oe.round(oe.distance(e,r,n,i)),o=(n-e)/a,s=(i-r)/a,l=this.image,u=0;u<a;u++){var c=oe.round(e+u*o),d=oe.round(r+u*s);if(l.get(c,d))return new W(c,d)}return null},t.prototype.centerEdges=function(e,r,n,i){var a=e.getX(),o=e.getY(),s=r.getX(),l=r.getY(),u=n.getX(),c=n.getY(),d=i.getX(),h=i.getY(),p=t.CORR;return a<this.width/2?[new W(d-p,h+p),new W(s+p,l+p),new W(u-p,c-p),new W(a+p,o-p)]:[new W(d+p,h+p),new W(s+p,l-p),new W(u-p,c+p),new W(a-p,o-p)]},t.prototype.containsBlackPoint=function(e,r,n,i){var a=this.image;if(i){for(var o=e;o<=r;o++)if(a.get(o,n))return!0}else for(var s=e;s<=r;s++)if(a.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),Wh=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<r.length&&a;o+=2){var s=Math.floor(r[o]),l=Math.floor(r[o+1]);if(s<-1||s>n||l<-1||l>i)throw new k;a=!1,s===-1?(r[o]=0,a=!0):s===n&&(r[o]=n-1,a=!0),l===-1?(r[o+1]=0,a=!0):l===i&&(r[o+1]=i-1,a=!0)}a=!0;for(var o=r.length-2;o>=0&&a;o-=2){var s=Math.floor(r[o]),l=Math.floor(r[o+1]);if(s<-1||s>n||l<-1||l>i)throw new k;a=!1,s===-1?(r[o]=0,a=!0):s===n&&(r[o]=n-1,a=!0),l===-1?(r[o+1]=0,a=!0):l===i&&(r[o+1]=i-1,a=!0)}},t}(),Tm=function(){function t(e,r,n,i,a,o,s,l,u){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=l,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,i,a,o,s,l,u,c,d,h,p,v,g,w){var m=t.quadrilateralToSquare(e,r,n,i,a,o,s,l),y=t.squareToQuadrilateral(u,c,d,h,p,v,g,w);return y.times(m)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,l=this.a23,u=this.a31,c=this.a32,d=this.a33,h=0;h<r;h+=2){var p=e[h],v=e[h+1],g=a*p+l*v+d;e[h]=(n*p+o*v+u)/g,e[h+1]=(i*p+s*v+c)/g}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,l=this.a23,u=this.a31,c=this.a32,d=this.a33,h=e.length,p=0;p<h;p++){var v=e[p],g=r[p],w=a*v+l*g+d;e[p]=(n*v+o*g+u)/w,r[p]=(i*v+s*g+c)/w}},t.squareToQuadrilateral=function(e,r,n,i,a,o,s,l){var u=e-n+a-s,c=r-i+o-l;if(u===0&&c===0)return new t(n-e,a-n,e,i-r,o-i,r,0,0,1);var d=n-a,h=s-a,p=i-o,v=l-o,g=d*v-h*p,w=(u*v-h*c)/g,m=(d*c-u*p)/g;return new t(n-e+w*n,s-e+m*s,e,i-r+w*i,l-r+m*l,r,w,m,1)},t.quadrilateralToSquare=function(e,r,n,i,a,o,s,l){return t.squareToQuadrilateral(e,r,n,i,a,o,s,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),mE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gE=function(t){mE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,a,o,s,l,u,c,d,h,p,v,g,w,m,y,x,_){var b=Tm.quadrilateralToQuadrilateral(a,o,s,l,u,c,d,h,p,v,g,w,m,y,x,_);return this.sampleGridWithTransform(r,n,i,b)},e.prototype.sampleGridWithTransform=function(r,n,i,a){if(n<=0||i<=0)throw new k;for(var o=new _r(n,i),s=new Float32Array(2*n),l=0;l<i;l++){for(var u=s.length,c=l+.5,d=0;d<u;d+=2)s[d]=d/2+.5,s[d+1]=c;a.transformPoints(s),Wh.checkAndNudgePoints(r,s);try{for(var d=0;d<u;d+=2)r.get(Math.floor(s[d]),Math.floor(s[d+1]))&&o.set(d/2,l)}catch{throw new k}}return o},e}(Wh),qd=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new gE,t}(),Et=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new W(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),yE=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new vE(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new k;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,a=0;a<4;a++){var o=n[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(a,o,s){var l=(a>>r-2<<1)+(a&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(te.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new k},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var a=n-i,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var l=new gl(At.AZTEC_PARAM);l.decode(o,a)}catch{throw new k}for(var u=0,s=0;s<i;s++)u=(u<<4)+o[s];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,o,1,-1),l=this.getFirstDifferent(n,o,1,1),u=this.getFirstDifferent(i,o,-1,1),c=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var d=this.distancePoint(c,s)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(d<.75||d>1.25||!this.isWhiteOrBlackRectangle(s,l,u,c))break}r=s,n=l,i=u,a=c,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new k;this.compact=this.nbCenterLayers===5;var h=new W(r.getX()+.5,r.getY()-.5),p=new W(n.getX()+.5,n.getY()+.5),v=new W(i.getX()-.5,i.getY()+.5),g=new W(a.getX()-.5,a.getY()-.5);return this.expandSquare([h,p,v,g],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var a=new Cc(this.image).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new Et(o+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Et(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Et(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Et(o-7,s-7),!1,-1,-1).toResultPoint()}var l=oe.round((e.getX()+i.getX()+r.getX()+n.getX())/4),u=oe.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var a=new Cc(this.image,15,l,u).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Et(l+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Et(l+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Et(l-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Et(l-7,u-7),!1,-1,-1).toResultPoint()}return l=oe.round((e.getX()+i.getX()+r.getX()+n.getX())/4),u=oe.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new Et(l,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,a){var o=qd.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,u=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,l,l,u,l,u,u,l,u,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,a=this.distanceResultPoint(e,r),o=a/n,s=e.getX(),l=e.getY(),u=o*(r.getX()-e.getX())/a,c=o*(r.getY()-e.getY())/a,d=0;d<n;d++)this.image.get(oe.round(s+d*u),oe.round(l+d*c))&&(i|=1<<n-d-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var a=3;e=new Et(e.getX()-a,e.getY()+a),r=new Et(r.getX()-a,r.getY()-a),n=new Et(n.getX()+a,n.getY()-a),i=new Et(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,r);return s!==o||(s=this.getColor(r,n),s!==o)?!1:(s=this.getColor(n,i),s===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,a=(r.getY()-e.getY())/n,o=0,s=e.getX(),l=e.getY(),u=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),d=0;d<c;d++)s+=i,l+=a,this.image.get(oe.round(s),oe.round(l))!==u&&o++;var h=o/n;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var a=e.getX()+n,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n,o+=i;for(a-=n,o-=i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n;for(a-=n;this.isValid(a,o)&&this.image.get(a,o)===r;)o+=i;return o-=i,new Et(a,o)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,u=new W(s+i*a,l+i*o),c=new W(s-i*a,l-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var d=new W(s+i*a,l+i*o),h=new W(s-i*a,l-i*o),p=[u,d,c,h];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=oe.round(e.getX()),n=oe.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return oe.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return oe.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(te.truncDivision(this.nbLayers-4,8)+1)+15},t}(),js=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new yE(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(r,a),o=new Hh().decode(s)}catch(d){n=d}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(r,a),o=new Hh().decode(s)}catch(d){throw n??d}var l=new pt(o.getText(),o.getRawBytes(),o.getNumBits(),a,q.AZTEC,ye.currentTimeMillis()),u=o.getByteSegments();u!=null&&l.putMetadata(at.BYTE_SEGMENTS,u);var c=o.getECLevel();return c!=null&&l.putMetadata(at.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(pe.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,a,o){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),xE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){xE(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new js,r)||this}return e})(Gi);var Xe=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(pe.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,r),o=a.getResultMetadata(),s=270;o!==null&&o.get(at.ORIENTATION)===!0&&(s=s+o.get(at.ORIENTATION)%360),a.putMetadata(at.ORIENTATION,s);var l=a.getResultPoints();if(l!==null)for(var u=i.getHeight(),c=0;c<l.length;c++)l[c]=new W(u-l[c].getY()-1,l[c].getX());return a}else throw new k}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),a=new Qe(n),o=r&&r.get(pe.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),l;o?l=i:l=15;for(var u=Math.trunc(i/2),c=0;c<l;c++){var d=Math.trunc((c+1)/2),h=(c&1)===0,p=u+s*(h?d:-d);if(p<0||p>=i)break;try{a=e.getBlackRow(p,a)}catch{continue}for(var v=function(y){if(y===1&&(a.reverse(),r&&r.get(pe.NEED_RESULT_POINT_CALLBACK)===!0)){var x=new Map;r.forEach(function(S,C){return x.set(C,S)}),x.delete(pe.NEED_RESULT_POINT_CALLBACK),r=x}try{var _=g.decodeRow(p,a,r);if(y===1){_.putMetadata(at.ORIENTATION,180);var b=_.getResultPoints();b!==null&&(b[0]=new W(n-b[0].getX()-1,b[0].getY()),b[1]=new W(n-b[1].getX()-1,b[1].getY()))}return{value:_}}catch{}},g=this,w=0;w<2;w++){var m=v(w);if(typeof m=="object")return m.value}}throw new k},t.recordPattern=function(e,r,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var o=e.getSize();if(r>=o)throw new k;for(var s=!e.get(r),l=0,u=r;u<o;){if(e.get(u)!==s)n[l]++;else{if(++l===i)break;n[l]=1,s=!s}u++}if(!(l===i||l===i-1&&u===o))throw new k},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,a=e.get(r);r>0&&i>=0;)e.get(--r)!==a&&(i--,a=!a);if(i>=0)throw new k;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=r[s];if(a<o)return Number.POSITIVE_INFINITY;var l=a/o;n*=l;for(var u=0,c=0;c<i;c++){var d=e[c],h=r[c]*l,p=d>h?d-h:h-d;if(p>n)return Number.POSITIVE_INFINITY;u+=p}return u/a},t}(),wE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gh=function(t){wE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,l=!1,u=6,c=i;c<n;c++)if(r.get(c)!==l)o[a]++;else{if(a===u-1){for(var d=e.MAX_AVG_VARIANCE,h=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var v=Xe.patternMatchVariance(o,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);v<d&&(d=v,h=p)}if(h>=0&&r.isRange(Math.max(0,s-(c-s)/2),s,!1))return Int32Array.from([s,c,h]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,l=!l}throw new k},e.decodeCode=function(r,n,i){Xe.recordPattern(r,i,n);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],u=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);u<a&&(a=u,o=s)}if(o>=0)return o;throw new k},e.prototype.decodeRow=function(r,n,i){var a=i&&i.get(pe.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],l=0,u=new Uint8Array(20);u[l++]=s;var c;switch(s){case e.CODE_START_A:c=e.CODE_CODE_A;break;case e.CODE_START_B:c=e.CODE_CODE_B;break;case e.CODE_START_C:c=e.CODE_CODE_C;break;default:throw new U}for(var d=!1,h=!1,p="",v=o[0],g=o[1],w=Int32Array.from([0,0,0,0,0,0]),m=0,y=0,x=s,_=0,b=!0,S=!1,C=!1;!d;){var T=h;switch(h=!1,m=y,y=e.decodeCode(n,w,g),u[l++]=y,y!==e.CODE_STOP&&(b=!0),y!==e.CODE_STOP&&(_++,x+=_*y),v=g,g+=w.reduce(function(Z,D){return Z+D},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new U}switch(c){case e.CODE_CODE_A:if(y<64)C===S?p+=String.fromCharCode(32+y):p+=String.fromCharCode(32+y+128),C=!1;else if(y<96)C===S?p+=String.fromCharCode(y-64):p+=String.fromCharCode(y+64),C=!1;else switch(y!==e.CODE_STOP&&(b=!1),y){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!S&&C?(S=!0,C=!1):S&&C?(S=!1,C=!1):C=!0;break;case e.CODE_SHIFT:h=!0,c=e.CODE_CODE_B;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:d=!0;break}break;case e.CODE_CODE_B:if(y<96)C===S?p+=String.fromCharCode(32+y):p+=String.fromCharCode(32+y+128),C=!1;else switch(y!==e.CODE_STOP&&(b=!1),y){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!S&&C?(S=!0,C=!1):S&&C?(S=!1,C=!1):C=!0;break;case e.CODE_SHIFT:h=!0,c=e.CODE_CODE_A;break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:d=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(p+="0"),p+=y;else switch(y!==e.CODE_STOP&&(b=!1),y){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_STOP:d=!0;break}break}T&&(c=c===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var L=g-v;if(g=n.getNextUnset(g),!n.isRange(g,Math.min(n.getSize(),g+(g-v)/2),!1))throw new k;if(x-=_*m,x%103!==m)throw new Ue;var I=p.length;if(I===0)throw new k;I>0&&b&&(c===e.CODE_CODE_C?p=p.substring(0,I-2):p=p.substring(0,I-1));for(var R=(o[1]+o[0])/2,B=v+L/2,j=u.length,X=new Uint8Array(j),M=0;M<j;M++)X[M]=u[M];var P=[new W(R,r),new W(B,r)];return new pt(p,X,0,P,q.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Xe),_E=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ql=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qh=function(t){_E(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var a,o,s,l,u=this.counters;u.fill(0),this.decodeRowResult="";var c=e.findAsteriskPattern(n,u),d=n.getNextSet(c[1]),h=n.getSize(),p,v;do{e.recordPattern(n,d,u);var g=e.toNarrowWidePattern(u);if(g<0)throw new k;p=e.patternToChar(g),this.decodeRowResult+=p,v=d;try{for(var w=(a=void 0,Ql(u)),m=w.next();!m.done;m=w.next()){var y=m.value;d+=y}}catch(j){a={error:j}}finally{try{m&&!m.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}d=n.getNextSet(d)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var _=Ql(u),b=_.next();!b.done;b=_.next()){var y=b.value;x+=y}}catch(j){s={error:j}}finally{try{b&&!b.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}var S=d-v-x;if(d!==h&&S*2<x)throw new k;if(this.usingCheckDigit){for(var C=this.decodeRowResult.length-1,T=0,L=0;L<C;L++)T+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(L));if(this.decodeRowResult.charAt(C)!==e.ALPHABET_STRING.charAt(T%43))throw new Ue;this.decodeRowResult=this.decodeRowResult.substring(0,C)}if(this.decodeRowResult.length===0)throw new k;var I;this.extendedMode?I=e.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;var R=(c[1]+c[0])/2,B=v+x/2;return new pt(I,null,0,[new W(R,r),new W(B,r)],q.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),a=r.getNextSet(0),o=0,s=a,l=!1,u=n.length,c=a;c<i;c++)if(r.get(c)!==l)n[o]++;else{if(o===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((c-s)/2)),s,!1))return[s,c];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,l=!l}throw new k},e.toNarrowWidePattern=function(r){var n,i,a=r.length,o=0,s;do{var l=2147483647;try{for(var u=(n=void 0,Ql(r)),c=u.next();!c.done;c=u.next()){var d=c.value;d<l&&d>o&&(l=d)}}catch(g){n={error:g}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}o=l,s=0;for(var h=0,p=0,v=0;v<a;v++){var d=r[v];d>o&&(p|=1<<a-1-v,s++,h+=d)}if(s===3){for(var v=0;v<a&&s>0;v++){var d=r[v];if(d>o&&(s--,d*2>=h))return-1}return p}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new k},e.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=r.charAt(a+1),l="\0";switch(o){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new U;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new U;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new U;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new U;break}i+=l,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Xe),EE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xh=function(t){EE(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,i){var a,o,s,l,u=this.findAsteriskPattern(n),c=n.getNextSet(u[1]),d=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var p,v;do{e.recordPattern(n,c,h);var g=this.toPattern(h);if(g<0)throw new k;p=this.patternToChar(g),this.decodeRowResult+=p,v=c;try{for(var w=(a=void 0,Jl(h)),m=w.next();!m.done;m=w.next()){var y=m.value;c+=y}}catch(L){a={error:L}}finally{try{m&&!m.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}c=n.getNextSet(c)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var _=Jl(h),b=_.next();!b.done;b=_.next()){var y=b.value;x+=y}}catch(L){s={error:L}}finally{try{b&&!b.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}if(c===d||!n.get(c))throw new k;if(this.decodeRowResult.length<2)throw new k;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var S=this.decodeExtended(this.decodeRowResult),C=(u[1]+u[0])/2,T=v+x/2;return new pt(S,null,0,[new W(C,r),new W(T,r)],q.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),i=r.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,l=a.length,u=0,c=i;c<n;c++)if(r.get(c)!==s)a[u]++;else{if(u===l-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,c]);o+=a[0]+a[1],a.copyWithin(0,2,2+u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,s=!s}throw new k},e.prototype.toPattern=function(r){var n,i,a=0;try{for(var o=Jl(r),s=o.next();!s.done;s=o.next()){var l=s.value;a+=l}}catch(v){n={error:v}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}for(var u=0,c=r.length,d=0;d<c;d++){var h=Math.round(r[d]*9/a);if(h<1||h>4)return-1;if(d&1)u<<=h;else for(var p=0;p<h;p++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new k},e.prototype.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o>="a"&&o<="d"){if(a>=n-1)throw new U;var s=r.charAt(a+1),l="\0";switch(o){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new U;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new U;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="";else throw new U;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new U;break}i+=l,a++}else i+=o}return i},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,i){for(var a=1,o=0,s=n-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(r.charAt(s)),++a>i&&(a=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new Ue},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Xe),bE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kh=function(t){bE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var a,o,s=this.decodeStart(n),l=this.decodeEnd(n),u=new J;e.decodeMiddle(n,s[1],l[0],u);var c=u.toString(),d=null;i!=null&&(d=i.get(pe.ALLOWED_LENGTHS)),d==null&&(d=e.DEFAULT_ALLOWED_LENGTHS);var h=c.length,p=!1,v=0;try{for(var g=SE(d),w=g.next();!w.done;w=g.next()){var m=w.value;if(h===m){p=!0;break}m>v&&(v=m)}}catch(_){a={error:_}}finally{try{w&&!w.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}if(!p&&h>v&&(p=!0),!p)throw new U;var y=[new W(s[1],r),new W(l[0],r)],x=new pt(c,null,0,y,q.ITF,new Date().getTime());return x},e.decodeMiddle=function(r,n,i,a){var o=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(o.fill(0),s.fill(0),l.fill(0);n<i;){Xe.recordPattern(r,n,o);for(var u=0;u<5;u++){var c=2*u;s[u]=o[c],l[u]=o[c+1]}var d=e.decodeDigit(s);a.append(d.toString()),d=this.decodeDigit(l),a.append(d.toString()),o.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!r.get(a);a--)i--;if(i!==0)throw new k},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new k;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof k&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var a=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-a,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var a=i.length,o=new Int32Array(a),s=r.getSize(),l=!1,u=0,c=n;o.fill(0);for(var d=n;d<s;d++)if(r.get(d)!==l)o[u]++;else{if(u===a-1){if(Xe.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,d];c+=o[0]+o[1],ye.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,l=!l}throw new k},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],l=Xe.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,i=o):l===n&&(i=-1)}if(i>=0)return i%10;throw new k},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Xe),CE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Li=function(t){CE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,a=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var l=s-(a-s);l>=0&&(n=r.isRange(l,s,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new U;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new U;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,a){return this.findGuardPattern(r,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(r,n,i,a,o){var s=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var l=0,u=n,c=a.length,d=i,h=n;h<s;h++)if(r.get(h)!==d)o[l]++;else{if(l===c-1){if(Xe.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=o[0]+o[1];for(var p=o.slice(2,o.length),v=0;v<l-1;v++)o[v]=p[v];o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,d=!d}throw new k},e.decodeDigit=function(r,n,i,a){this.recordPattern(r,i,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,l=a.length,u=0;u<l;u++){var c=a[u],d=Xe.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);d<o&&(o=d,s=u)}if(s>=0)return s;throw new k},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Xe),AE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NE=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),s=t.parseExtensionString(o),l=[new W((n[0]+n[1])/2,e),new W(a,e)],u=new pt(o,null,0,l,q.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=r[1],u=0,c=0;c<5&&l<s;c++){var d=Li.decodeDigit(e,o,l,Li.L_AND_G_PATTERNS);n+=String.fromCharCode(48+d%10);try{for(var h=(i=void 0,AE(o)),p=h.next();!p.done;p=h.next()){var v=p.value;l+=v}}catch(w){i={error:w}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}d>=10&&(u|=1<<4-c),c!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new k;var g=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==g)throw new k;return l},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new k},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[at.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,o=a<10?"0"+a:a.toString();return r+i+"."+o},t}(),IE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OE=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),s=t.parseExtensionString(o),l=[new W((n[0]+n[1])/2,e),new W(a,e)],u=new pt(o,null,0,l,q.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=r[1],u=0,c=0;c<2&&l<s;c++){var d=Li.decodeDigit(e,o,l,Li.L_AND_G_PATTERNS);n+=String.fromCharCode(48+d%10);try{for(var h=(i=void 0,IE(o)),p=h.next();!p.done;p=h.next()){var v=p.value;l+=v}}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}d>=10&&(u|=1<<1-c),c!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new k;if(parseInt(n.toString())%4!==u)throw new k;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[at.ISSUE_NUMBER,parseInt(e)]])},t}(),TE=function(){function t(){}return t.decodeRow=function(e,r,n){var i=Li.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new NE;return a.decodeRow(e,r,i)}catch{var o=new OE;return o.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),kE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),He=function(t){kE(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[n]=a}return r}return e.prototype.decodeRow=function(r,n,i){var a=e.findStartGuardPattern(n),o=i==null?null:i.get(pe.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new W((a[0]+a[1])/2,r);o.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,a,this.decodeRowStringBuffer),u=l.rowOffset,c=l.resultString;if(o!=null){var d=new W(u,r);o.foundPossibleResultPoint(d)}var h=e.decodeEnd(n,u);if(o!=null){var p=new W((h[0]+h[1])/2,r);o.foundPossibleResultPoint(p)}var v=h[1],g=v+(v-h[0]);if(g>=n.getSize()||!n.isRange(v,g,!1))throw new k;var w=c.toString();if(w.length<8)throw new U;if(!e.checkChecksum(w))throw new Ue;var m=(a[1]+a[0])/2,y=(h[1]+h[0])/2,x=this.getBarcodeFormat(),_=[new W(m,r),new W(y,r)],b=new pt(w,null,0,_,x,new Date().getTime()),S=0;try{var C=TE.decodeRow(r,n,h[1]);b.putMetadata(at.UPC_EAN_EXTENSION,C.getText()),b.putAllMetadata(C.getResultMetadata()),b.addResultPoints(C.getResultPoints()),S=C.getText().length}catch{}var T=i==null?null:i.get(pe.ALLOWED_EAN_EXTENSIONS);if(T!=null){var L=!1;for(var I in T)if(S.toString()===I){L=!0;break}if(!L)throw new k}return x===q.EAN_13||q.UPC_A,b},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new U;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new U;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Li),RE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ac=function(t){RE(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=r.getSize(),d=n[1],h=0,p=0;p<6&&d<c;p++){var v=He.decodeDigit(r,u,d,He.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var g=(a=void 0,Yh(u)),w=g.next();!w.done;w=g.next()){var m=w.value;d+=m}}catch(b){a={error:b}}finally{try{w&&!w.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}v>=10&&(h|=1<<5-p)}i=e.determineFirstDigit(i,h);var y=He.findGuardPattern(r,d,!0,He.MIDDLE_PATTERN,new Int32Array(He.MIDDLE_PATTERN.length).fill(0));d=y[1];for(var p=0;p<6&&d<c;p++){var v=He.decodeDigit(r,u,d,He.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var x=(s=void 0,Yh(u)),_=x.next();!_.done;_=x.next()){var m=_.value;d+=m}}catch(C){s={error:C}}finally{try{_&&!_.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}}return{rowOffset:d,resultString:i}},e.prototype.getBarcodeFormat=function(){return q.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode(48+i)+r,r;throw new k},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(He),PE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qh=function(t){PE(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=r.getSize(),d=n[1],h=0;h<4&&d<c;h++){var p=He.decodeDigit(r,u,d,He.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var v=(a=void 0,Zh(u)),g=v.next();!g.done;g=v.next()){var w=g.value;d+=w}}catch(_){a={error:_}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(a)throw a.error}}}var m=He.findGuardPattern(r,d,!0,He.MIDDLE_PATTERN,new Int32Array(He.MIDDLE_PATTERN.length).fill(0));d=m[1];for(var h=0;h<4&&d<c;h++){var p=He.decodeDigit(r,u,d,He.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var y=(s=void 0,Zh(u)),x=y.next();!x.done;x=y.next()){var w=x.value;d+=w}}catch(S){s={error:S}}finally{try{x&&!x.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}}return{rowOffset:d,resultString:i}},e.prototype.getBarcodeFormat=function(){return q.EAN_8},e}(He),DE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jh=function(t){DE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new Ac,r}return e.prototype.getBarcodeFormat=function(){return q.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new pt(n.substring(1),null,null,r.getResultPoints(),q.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new k},e.prototype.reset=function(){this.ean13Reader.reset()},e}(He),ME=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e0=function(t){ME(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s=this.decodeMiddleCounters.map(function(w){return w});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=r.getSize(),u=n[1],c=0,d=0;d<6&&u<l;d++){var h=e.decodeDigit(r,s,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+h%10);try{for(var p=(a=void 0,LE(s)),v=p.next();!v.done;v=p.next()){var g=v.value;u+=g}}catch(w){a={error:w}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}h>=10&&(c|=1<<5-d)}return e.determineNumSysAndCheckDigit(new J(i),c),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return He.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){r.insert(0,"0"+i),r.append("0"+a);return}throw k.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return q.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new J;i.append(r.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(He),BE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eu=function(t){BE(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(pe.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(q.EAN_13)>-1&&a.push(new Ac),i.indexOf(q.UPC_A)>-1&&a.push(new Jh),i.indexOf(q.EAN_8)>-1&&a.push(new Qh),i.indexOf(q.UPC_E)>-1&&a.push(new e0)),a.length===0&&(a.push(new Ac),a.push(new Jh),a.push(new Qh),a.push(new e0)),n.readers=a,n}return e.prototype.decodeRow=function(r,n,i){var a,o;try{for(var s=t0(this.readers),l=s.next();!l.done;l=s.next()){var u=l.value;try{var c=u.decodeRow(r,n,i),d=c.getBarcodeFormat()===q.EAN_13&&c.getText().charAt(0)==="0",h=i==null?null:i.get(pe.POSSIBLE_FORMATS),p=h==null||h.includes(q.UPC_A);if(d&&p){var v=c.getRawBytes(),g=new pt(c.getText().substring(1),v,v?v.length:null,c.getResultPoints(),q.UPC_A);return g.putAllMetadata(c.getResultMetadata()),g}return c}catch{}}}catch(w){a={error:w}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new k},e.prototype.reset=function(){var r,n;try{for(var i=t0(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e}(Xe),zE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FE=function(t){zE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,i){var a=this.getValidRowData(n);if(!a)throw new k;var o=this.codaBarDecodeRow(a.row);if(!o)throw new k;return new pt(o,null,0,[new W(a.left,r),new W(a.right,r)],q.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var o=[],s=n[0],l=1,u=1;u<n.length;u++)n[u]===s?l++:(s=n[u],o.push(l),l=1);return o.push(l),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],i=Math.ceil(r.reduce(function(l,u){return(l+u)/2},0));r.length>0;){var a=r.splice(0,8).splice(0,7),o=a.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(Xe),UE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nn=function(t){UE(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(Xe.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new k},e.count=function(r){return oe.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]>a&&(a=n[o],i=o);r[i]++},e.decrement=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]<a&&(a=n[o],i=o);r[i]--},e.isFinderPattern=function(r){var n,i,a=r[0]+r[1],o=a+r[2]+r[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var c=jE(r),d=c.next();!d.done;d=c.next()){var h=d.value;h>u&&(u=h),h<l&&(l=h)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return u<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Xe),$s=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),km=function(){function t(e,r,n,i,a){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new W(n,a)),this.resultPoints.push(new W(i,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),$E=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vi=function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,a,o=0;try{for(var s=$E(e),l=s.next();!l.done;l=s.next()){var u=l.value;o+=u}}catch(y){i={error:y}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var c=0,d=0,h=e.length,p=0;p<h-1;p++){var v=void 0;for(v=1,d|=1<<p;v<e[p];v++,d&=~(1<<p)){var g=t.combins(o-v-1,h-p-2);if(n&&d===0&&o-v-(h-p-1)>=h-p-1&&(g-=t.combins(o-v-(h-p),h-p-2)),h-p-1>1){for(var w=0,m=o-v-(h-p-2);m>r;m--)w+=t.combins(o-v-m-1,h-p-3);g-=w*(h-1-p)}else o-v>r&&g--;c+=g}o-=v}return c},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var a=1,o=1,s=e;s>n;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},t}(),VE=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new Qe(n),a=0,o=e[0],s=o.getRightChar().getValue(),l=11;l>=0;--l)s&1<<l&&i.set(a),a++;for(var l=1;l<e.length;++l){for(var u=e[l],c=u.getLeftChar().getValue(),d=11;d>=0;--d)c&1<<d&&i.set(a),a++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),d=11;d>=0;--d)h&1<<d&&i.set(a),a++}return i},t}(),wn=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),Xd=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),HE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tr=function(t){HE(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Xd),WE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_n=function(t){WE(e,t);function e(r,n,i){var a=t.call(this,r)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Xd),GE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jn=function(t){GE(e,t);function e(r,n,i){var a=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new U;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Xd),Mo=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qE=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,a,o,s,l,u;if(!e)return null;if(e.length<2)throw new k;var c=e.substring(0,2);try{for(var d=Mo(t.TWO_DIGIT_DATA_LENGTH),h=d.next();!h.done;h=d.next()){var p=h.value;if(p[0]===c)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(S){r={error:S}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}if(e.length<3)throw new k;var v=e.substring(0,3);try{for(var g=Mo(t.THREE_DIGIT_DATA_LENGTH),w=g.next();!w.done;w=g.next()){var p=w.value;if(p[0]===v)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}try{for(var m=Mo(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=m.next();!y.done;y=m.next()){var p=y.value;if(p[0]===v)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(S){o={error:S}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}if(e.length<4)throw new k;var x=e.substring(0,4);try{for(var _=Mo(t.FOUR_DIGIT_DATA_LENGTH),b=_.next();!b.done;b=_.next()){var p=b.value;if(p[0]===x)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(S){l={error:S}}finally{try{b&&!b.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}throw new k},t.processFixedAI=function(e,r,n){if(n.length<e)throw new k;var i=n.substring(0,e);if(n.length<e+r)throw new k;var a=n.substring(e,e+r),o=n.substring(e+r),s="("+i+")"+a,l=t.parseFieldsInGeneralPurpose(o);return l==null?s:s+l},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),a;n.length<e+r?a=n.length:a=e+r;var o=n.substring(e,a),s=n.substring(a),l="("+i+")"+o,u=t.parseFieldsInGeneralPurpose(s);return u==null?l:l+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),ns=function(){function t(e){this.buffer=new J,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var a=this.decodeGeneralPurposeField(n,i),o=qE.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Jn(this.information.getSize(),Jn.FNC1,Jn.FNC1):new Jn(this.information.getSize(),r-1,Jn.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new Jn(e+7,i,a)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,a=0;a<n;++a)e.get(r+a)&&(i|=1<<n-a-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new _n(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new _n(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new _n(this.current.getPosition(),this.buffer.toString()):r=new _n(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new wn(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new _n(this.current.getPosition(),this.buffer.toString());return new wn(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wn(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new _n(this.current.getPosition(),this.buffer.toString());return new wn(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wn(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new _n(this.current.getPosition(),this.buffer.toString());return new wn(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wn(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new tr(e+5,tr.FNC1);if(r>=5&&r<15)return new tr(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new tr(e+7,""+(n+1));if(n>=90&&n<116)return new tr(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new U}return new tr(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new tr(e+5,tr.FNC1);if(r>=5&&r<15)return new tr(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new tr(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new ao("Decoding invalid alphanumeric value: "+n)}return new tr(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Rm=function(){function t(e){this.information=e,this.generalDecoder=new ns(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),XE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lr=function(t){XE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,a=0;a<13;a++){var o=r.charAt(a+n).charCodeAt(0)-48;i+=a&1?o:3*o}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e}(Rm),KE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YE=function(t){KE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new J;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(lr),ZE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QE=function(t){ZE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new J;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Rm),JE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),is=function(t){JE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,a);for(var o=this.checkWeight(a),s=1e5,l=0;l<5;++l)o/s===0&&r.append("0"),s/=10;r.append(o)},e}(lr),eb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pm=function(t){eb(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+is.GTIN_SIZE+e.WEIGHT_SIZE)throw new k;var r=new J;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+is.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(is),tb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rb=function(t){tb(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(Pm),nb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ib=function(t){nb(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(Pm),ab=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ob=function(t){ab(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+lr.GTIN_SIZE)throw new k;var r=new J;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+lr.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+lr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(lr),sb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lb=function(t){sb(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+lr.GTIN_SIZE)throw new k;var r=new J;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+lr.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+lr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+lr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(lr),ub=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ur=function(t){ub(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new k;var r=new J;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){r.append("("),r.append(this.dateCode),r.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&r.append("0"),r.append(s),o/10===0&&r.append("0"),r.append(o),a/10===0&&r.append("0"),r.append(a)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(is);function cb(t){try{if(t.get(1))return new YE(t);if(!t.get(2))return new QE(t);var e=ns.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new rb(t);case 5:return new ib(t)}var r=ns.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new ob(t);case 13:return new lb(t)}var n=ns.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new Ur(t,"310","11");case 57:return new Ur(t,"320","11");case 58:return new Ur(t,"310","13");case 59:return new Ur(t,"320","13");case 60:return new Ur(t,"310","15");case 61:return new Ur(t,"320","15");case 62:return new Ur(t,"310","17");case 63:return new Ur(t,"320","17")}}catch(i){throw console.log(i),new ao("unknown decoder: "+t)}}var r0=function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),db=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,a){r.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),fb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jr=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hb=function(t){fb(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof k){if(!this.pairs.length)throw new k;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(r,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new k},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,a,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var l=(i=void 0,jr(r)),u=l.next();!u.done;u=l.next()){var c=u.value;this.pairs.push(c.getPairs())}}catch(h){i={error:h}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var d=new Array(r);d.push(s);try{return this.checkRows(d,o+1)}catch(h){console.log(h)}}}throw new k},e.isValidSequence=function(r){var n,i;try{for(var a=jr(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(r.length>s.length)){for(var l=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==s[u]){l=!1;break}if(l)return!0}}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>r){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new db(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,a,o,s,l,u;try{for(var c=jr(n),d=c.next();!d.done;d=c.next()){var h=d.value;if(h.getPairs().length!==r.length){var p=!0;try{for(var v=(o=void 0,jr(h.getPairs())),g=v.next();!g.done;g=v.next()){var w=g.value,m=!1;try{for(var y=(l=void 0,jr(r)),x=y.next();!x.done;x=y.next()){var _=x.value;if(r0.equals(w,_)){m=!0;break}}}catch(b){l={error:b}}finally{try{x&&!x.done&&(u=y.return)&&u.call(y)}finally{if(l)throw l.error}}m||(p=!1)}}catch(b){o={error:b}}finally{try{g&&!g.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}}}}catch(b){i={error:b}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,a,o,s,l,u;try{for(var c=jr(n),d=c.next();!d.done;d=c.next()){var h=d.value,p=!0;try{for(var v=(o=void 0,jr(r)),g=v.next();!g.done;g=v.next()){var w=g.value,m=!1;try{for(var y=(l=void 0,jr(h.getPairs())),x=y.next();!x.done;x=y.next()){var _=x.value;if(w.equals(_)){m=!0;break}}}catch(b){l={error:b}}finally{try{x&&!x.done&&(u=y.return)&&u.call(y)}finally{if(l)throw l.error}}if(!m){p=!1;break}}}catch(b){o={error:b}}finally{try{g&&!g.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}if(p)return!0}}catch(b){i={error:b}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=VE.buildBitArray(r),i=cb(n),a=i.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),l=[o[0],o[1],s[0],s[1]];return new pt(a,null,null,l,q.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);a+=l.getLeftChar().getChecksumPortion(),o++;var u=l.getRightChar();u!=null&&(a+=u.getChecksumPortion(),o++)}a%=211;var c=211*(o-4)+a;return c===n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,l=-1;do this.findNextPair(r,n,l),o=this.parseFoundFinderPattern(r,i,a),o===null?l=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var u=this.decodeDataCharacter(r,o,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new k;var c;try{c=this.decodeDataCharacter(r,o,a,!1)}catch(d){c=null,console.log(d)}return new r0(u,c,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=r.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var c=!1;s<o&&(c=!r.get(s),!!c);)s++;for(var d=0,h=s,p=s;p<o;p++)if(r.get(p)!==c)a[d]++;else{if(d===3){if(u&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=h,this.startEnd[1]=p;return}u&&e.reverseCounters(a),h+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,d--}else d++;a[d]=1,c=!c}throw new k},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var a=r[i];r[i]=r[n-i-1],r[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(r,n,i){var a,o,s;if(i){for(var l=this.startEnd[0]-1;l>=0&&!r.get(l);)l--;l++,a=this.startEnd[0]-l,o=l,s=this.startEnd[1]}else o=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var u=this.getDecodeFinderCounters();ye.arraycopy(u,0,u,1,u.length-1),u[0]=a;var c;try{c=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new km(c,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(r,n,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var l=0,u=o.length-1;l<u;l++,u--){var c=o[l];o[l]=o[u],o[u]=c}}var d=17,h=oe.sum(new Int32Array(o))/d,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new k;for(var v=this.getOddCounts(),g=this.getEvenCounts(),w=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var y=1*o[l]/h,x=y+.5;if(x<1){if(y<.3)throw new k;x=1}else if(x>8){if(y>8.7)throw new k;x=8}var _=l/2;l&1?(g[_]=x,m[_]=y-x):(v[_]=x,w[_]=y-x)}this.adjustOddEvenCounts(d);for(var b=4*n.getValue()+(i?0:2)+(a?0:1)-1,S=0,C=0,l=v.length-1;l>=0;l--){if(e.isNotA1left(n,i,a)){var T=e.WEIGHTS[b][2*l];C+=v[l]*T}S+=v[l]}for(var L=0,l=g.length-1;l>=0;l--)if(e.isNotA1left(n,i,a)){var T=e.WEIGHTS[b][2*l+1];L+=g[l]*T}var I=C+L;if(S&1||S>13||S<4)throw new k;var R=(13-S)/2,B=e.SYMBOL_WIDEST[R],j=9-B,X=vi.getRSSvalue(v,B,!0),M=vi.getRSSvalue(g,j,!1),P=e.EVEN_TOTAL_SUBSET[R],Z=e.GSUM[R],D=X*P+M+Z;return new $s(D,I)},e.isNotA1left=function(r,n,i){return!(r.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=oe.sum(new Int32Array(this.getOddCounts())),i=oe.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;n>13?o=!0:n<4&&(a=!0);var s=!1,l=!1;i>13?l=!0:i<4&&(s=!0);var u=n+i-r,c=(n&1)===1,d=(i&1)===0;if(u===1)if(c){if(d)throw new k;o=!0}else{if(!d)throw new k;l=!0}else if(u===-1)if(c){if(d)throw new k;a=!0}else{if(!d)throw new k;s=!0}else if(u===0){if(c){if(!d)throw new k;n<i?(a=!0,l=!0):(o=!0,s=!0)}else if(d)throw new k}else throw new k;if(a){if(o)throw new k;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new k;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Nn),pb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vb=function(t){pb(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}($s),mb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n0=function(t){mb(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var a,o,s,l,u=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var c=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var d=tu(this.possibleLeftPairs),h=d.next();!h.done;h=d.next()){var p=h.value;if(p.getCount()>1)try{for(var v=(s=void 0,tu(this.possibleRightPairs)),g=v.next();!g.done;g=v.next()){var w=g.value;if(w.getCount()>1&&e.checkChecksum(p,w))return e.constructResult(p,w)}}catch(m){s={error:m}}finally{try{g&&!g.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}}}catch(m){a={error:m}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}throw new k},e.addOrTally=function(r,n){var i,a;if(n!=null){var o=!1;try{for(var s=tu(r),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.getValue()===n.getValue()){u.incrementCount(),o=!0;break}}}catch(c){i={error:c}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),a=new String(i).toString(),o=new J,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var l=0,s=0;s<13;s++){var u=o.charAt(s).charCodeAt(0)-48;l+=s&1?u:3*u}l=10-l%10,l===10&&(l=0),o.append(l.toString());var c=r.getFinderPattern().getResultPoints(),d=n.getFinderPattern().getResultPoints();return new pt(o.toString(),null,0,[c[0],c[1],d[0],d[1]],q.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(r,n,i,a){try{var o=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,i,n,o),l=a==null?null:a.get(pe.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(o[0]+o[1])/2;n&&(u=r.getSize()-1-u),l.foundPossibleResultPoint(new W(u,i))}var c=this.decodeDataCharacter(r,s,!0),d=this.decodeDataCharacter(r,s,!1);return new vb(1597*c.getValue()+d.getValue(),c.getChecksumPortion()+4*d.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Xe.recordPatternInReverse(r,n.getStartEnd()[0],a);else{Xe.recordPattern(r,n.getStartEnd()[1]+1,a);for(var s=0,l=a.length-1;s<l;s++,l--){var u=a[s];a[s]=a[l],a[l]=u}}for(var c=i?16:15,d=oe.sum(new Int32Array(a))/c,h=this.getOddCounts(),p=this.getEvenCounts(),v=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var w=a[s]/d,m=Math.floor(w+.5);m<1?m=1:m>8&&(m=8);var y=Math.floor(s/2);s&1?(p[y]=m,g[y]=w-m):(h[y]=m,v[y]=w-m)}this.adjustOddEvenCounts(i,c);for(var x=0,_=0,s=h.length-1;s>=0;s--)_*=9,_+=h[s],x+=h[s];for(var b=0,S=0,s=p.length-1;s>=0;s--)b*=9,b+=p[s],S+=p[s];var C=_+3*b;if(i){if(x&1||x>12||x<4)throw new k;var T=(12-x)/2,L=e.OUTSIDE_ODD_WIDEST[T],I=9-L,R=vi.getRSSvalue(h,L,!1),B=vi.getRSSvalue(p,I,!0),j=e.OUTSIDE_EVEN_TOTAL_SUBSET[T],X=e.OUTSIDE_GSUM[T];return new $s(R*j+B+X,C)}else{if(S&1||S>10||S<4)throw new k;var T=(10-S)/2,L=e.INSIDE_ODD_WIDEST[T],I=9-L,R=vi.getRSSvalue(h,L,!0),B=vi.getRSSvalue(p,I,!1),M=e.INSIDE_ODD_TOTAL_SUBSET[T],X=e.INSIDE_GSUM[T];return new $s(B*M+R+X,C)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=r.getSize(),o=!1,s=0;s<a&&(o=!r.get(s),n!==o);)s++;for(var l=0,u=s,c=s;c<a;c++)if(r.get(c)!==o)i[l]++;else{if(l===3){if(Nn.isFinderPattern(i))return[u,c];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,o=!o}throw new k},e.prototype.parseFoundFinderPattern=function(r,n,i,a){for(var o=r.get(a[0]),s=a[0]-1;s>=0&&o!==r.get(s);)s--;s++;var l=a[0]-s,u=this.getDecodeFinderCounters(),c=new Int32Array(u.length);ye.arraycopy(u,0,c,1,u.length-1),c[0]=l;var d=this.parseFinderValue(c,e.FINDER_PATTERNS),h=s,p=a[1];return i&&(h=r.getSize()-1-h,p=r.getSize()-1-p),new km(d,[s,a[1]],h,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=oe.sum(new Int32Array(this.getOddCounts())),a=oe.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,l=!1,u=!1;r?(i>12?s=!0:i<4&&(o=!0),a>12?u=!0:a<4&&(l=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?u=!0:a<4&&(l=!0));var c=i+a-n,d=(i&1)===(r?1:0),h=(a&1)===1;if(c===1)if(d){if(h)throw new k;s=!0}else{if(!h)throw new k;u=!0}else if(c===-1)if(d){if(h)throw new k;o=!0}else{if(!h)throw new k;l=!0}else if(c===0){if(d){if(!h)throw new k;i<a?(o=!0,u=!0):(s=!0,l=!0)}else if(h)throw new k}else throw new k;if(o){if(s)throw new k;Nn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Nn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new k;Nn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Nn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Nn),gb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mi=function(t){gb(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(pe.POSSIBLE_FORMATS):null,a=r&&r.get(pe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(pe.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(q.EAN_13)||i.includes(q.UPC_A)||i.includes(q.EAN_8)||i.includes(q.UPC_E))&&n.readers.push(new eu(r)),i.includes(q.CODE_39)&&n.readers.push(new qh(a,o)),i.includes(q.CODE_93)&&n.readers.push(new Xh),i.includes(q.CODE_128)&&n.readers.push(new Gh),i.includes(q.ITF)&&n.readers.push(new Kh),i.includes(q.CODABAR)&&n.readers.push(new FE),i.includes(q.RSS_14)&&n.readers.push(new n0),i.includes(q.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new hb))),n.readers.length===0&&(n.readers.push(new eu(r)),n.readers.push(new qh),n.readers.push(new Xh),n.readers.push(new eu(r)),n.readers.push(new Gh),n.readers.push(new Kh),n.readers.push(new n0)),n}return e.prototype.decodeRow=function(r,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(r,n,i)}catch{}throw new k},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(Xe),yb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){yb(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new mi(n),r,n)||this}return e})(Gi);var i0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ue=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),se=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),xb=function(){function t(e,r,n,i,a,o){var s,l;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var u=0,c=o.getECCodewords(),d=o.getECBlocks();try{for(var h=i0(d),p=h.next();!p.done;p=h.next()){var v=p.value;u+=v.getCount()*(v.getDataCodewords()+c)}}catch(g){s={error:g}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if(e&1||r&1)throw new U;try{for(var a=i0(t.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new U},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new ue(5,new se(1,3))),new t(2,12,12,10,10,new ue(7,new se(1,5))),new t(3,14,14,12,12,new ue(10,new se(1,8))),new t(4,16,16,14,14,new ue(12,new se(1,12))),new t(5,18,18,16,16,new ue(14,new se(1,18))),new t(6,20,20,18,18,new ue(18,new se(1,22))),new t(7,22,22,20,20,new ue(20,new se(1,30))),new t(8,24,24,22,22,new ue(24,new se(1,36))),new t(9,26,26,24,24,new ue(28,new se(1,44))),new t(10,32,32,14,14,new ue(36,new se(1,62))),new t(11,36,36,16,16,new ue(42,new se(1,86))),new t(12,40,40,18,18,new ue(48,new se(1,114))),new t(13,44,44,20,20,new ue(56,new se(1,144))),new t(14,48,48,22,22,new ue(68,new se(1,174))),new t(15,52,52,24,24,new ue(42,new se(2,102))),new t(16,64,64,14,14,new ue(56,new se(2,140))),new t(17,72,72,16,16,new ue(36,new se(4,92))),new t(18,80,80,18,18,new ue(48,new se(4,114))),new t(19,88,88,20,20,new ue(56,new se(4,144))),new t(20,96,96,22,22,new ue(68,new se(4,174))),new t(21,104,104,24,24,new ue(56,new se(6,136))),new t(22,120,120,18,18,new ue(68,new se(6,175))),new t(23,132,132,20,20,new ue(62,new se(8,163))),new t(24,144,144,22,22,new ue(62,new se(8,156),new se(2,155))),new t(25,8,18,6,16,new ue(7,new se(1,5))),new t(26,8,32,6,14,new ue(11,new se(1,10))),new t(27,12,26,10,24,new ue(14,new se(1,16))),new t(28,12,36,10,16,new ue(18,new se(1,22))),new t(29,16,36,14,16,new ue(24,new se(1,32))),new t(30,16,48,14,22,new ue(28,new se(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),wb=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new U;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new _r(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return xb.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,l=!1,u=!1,c=!1;do if(n===a&&i===0&&!s)e[r++]=this.readCorner1(a,o)&255,n-=2,i+=2,s=!0;else if(n===a-2&&i===0&&o&3&&!l)e[r++]=this.readCorner2(a,o)&255,n-=2,i+=2,l=!0;else if(n===a+4&&i===2&&!(o&7)&&!u)e[r++]=this.readCorner3(a,o)&255,n-=2,i+=2,u=!0;else if(n===a-2&&i===0&&(o&7)===4&&!c)e[r++]=this.readCorner4(a,o)&255,n-=2,i+=2,c=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n-=2,i+=2;while(n>=0&&i<o);n+=1,i+=3;do n>=0&&i<o&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<o);if(r!==this.version.getTotalCodewords())throw new U;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var a=0;return this.readModule(e-2,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r,n,i)&&(a|=1),a<<=1,this.readModule(e,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e,r,n,i)&&(a|=1),a},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new K("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=r/i|0,s=n/a|0,l=o*i,u=s*a,c=new _r(u,l),d=0;d<o;++d)for(var h=d*i,p=0;p<s;++p)for(var v=p*a,g=0;g<i;++g)for(var w=d*(i+2)+1+g,m=h+g,y=0;y<a;++y){var x=p*(a+2)+1+y;if(e.get(x,w)){var _=v+y;c.set(_,m)}}return c},t}(),a0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_b=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,a,o,s=r.getECBlocks(),l=0,u=s.getECBlocks();try{for(var c=a0(u),d=c.next();!d.done;d=c.next()){var h=d.value;l+=h.getCount()}}catch(X){n={error:X}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}var p=new Array(l),v=0;try{for(var g=a0(u),w=g.next();!w.done;w=g.next())for(var h=w.value,m=0;m<h.getCount();m++){var y=h.getDataCodewords(),x=s.getECCodewords()+y;p[v++]=new t(y,new Uint8Array(x))}}catch(X){a={error:X}}finally{try{w&&!w.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}for(var _=p[0].codewords.length,b=_-s.getECCodewords(),S=b-1,C=0,m=0;m<S;m++)for(var T=0;T<v;T++)p[T].codewords[m]=e[C++];for(var L=r.getVersionNumber()===24,I=L?8:v,T=0;T<I;T++)p[T].codewords[b-1]=e[C++];for(var R=p[0].codewords.length,m=b;m<R;m++)for(var T=0;T<v;T++){var B=L?(T+8)%v:T,j=L&&B>7?m-1:m;p[B].codewords[j]=e[C++]}if(C!==e.length)throw new K;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Dm=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new K(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,l=o-s,u=255>>8-s<<l;r=(a[i]&u)>>l,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|a[i]&255,i++,e-=8;if(e>0){var l=8-e,u=255>>l<<l;r=r<<e|(a[i]&u)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),je;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(je||(je={}));var Eb=function(){function t(){}return t.decode=function(e){var r=new Dm(e),n=new J,i=new J,a=new Array,o=je.ASCII_ENCODE;do if(o===je.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,i);else{switch(o){case je.C40_ENCODE:this.decodeC40Segment(r,n);break;case je.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case je.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case je.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case je.BASE256_ENCODE:this.decodeBase256Segment(r,n,a);break;default:throw new U}o=je.ASCII_ENCODE}while(o!==je.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new ml(e,n.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new U;if(a<=128)return i&&(a+=128),r.append(String.fromCharCode(a-1)),je.ASCII_ENCODE;if(a===129)return je.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&r.append("0"),r.append(""+o)}else switch(a){case 230:return je.C40_ENCODE;case 231:return je.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return je.ANSIX12_ENCODE;case 239:return je.TEXT_ENCODE;case 240:return je.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new U;break}}while(e.available()>0);return je.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new U;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new U}a=0;break;case 3:n?(r.append(String.fromCharCode(l+224)),n=!1):r.append(String.fromCharCode(l+96)),a=0;break;default:throw new U}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new U;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new U}a=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),a=0}else throw new U;break;default:throw new U}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var o=n[a];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new U;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}i&32||(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new U;for(var s=new Uint8Array(o),l=0;l<o;l++){if(e.available()<8)throw new U;s[l]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{r.append(Xt.decode(s,ne.ISO88591))}catch(u){throw new ao("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),bb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sb=function(){function t(){this.rsDecoder=new gl(At.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new wb(e),a=i.getVersion(),o=i.readCodewords(),s=_b.getDataBlocks(o,a),l=0;try{for(var u=bb(s),c=u.next();!c.done;c=u.next()){var d=c.value;l+=d.getNumDataCodewords()}}catch(x){r={error:x}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var h=new Uint8Array(l),p=s.length,v=0;v<p;v++){var g=s[v],w=g.getCodewords(),m=g.getNumDataCodewords();this.correctErrors(w,m);for(var y=0;y<m;y++)h[y*p+v]=w[y]}return Eb.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Ue}for(var i=0;i<r;i++)e[i]=n[i]},t}(),Cb=function(){function t(e){this.image=e,this.rectangleDetector=new Cc(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new k;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],a=r[2],o=r[3],s=this.transitionsBetween(n,o)+1,l=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var u=t.sampleGrid(this.image,n,i,a,o,s,l);return new Gd(u,[n,i,a,o])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),a=(r.getY()-e.getY())/(n+1);return new W(e.getX()+i,e.getY()+a)},t.moveAway=function(e,r,n){var i=e.getX(),a=e.getY();return i<r?i-=1:i+=1,a<n?a-=1:a+=1,new W(i,a)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],a=e[2],o=this.transitionsBetween(r,n),s=this.transitionsBetween(n,i),l=this.transitionsBetween(i,a),u=this.transitionsBetween(a,r),c=o,d=[a,r,n,i];return c>s&&(c=s,d[0]=r,d[1]=n,d[2]=i,d[3]=a),c>l&&(c=l,d[0]=n,d[1]=i,d[2]=a,d[3]=r),c>u&&(d[0]=i,d[1]=a,d[2]=r,d[3]=n),d},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),s=t.shiftPoint(n,i,(o+1)*4),l=t.shiftPoint(i,n,(o+1)*4),u=this.transitionsBetween(s,r),c=this.transitionsBetween(l,a);return u<c?(e[0]=r,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),s=this.transitionsBetween(n,a),l=t.shiftPoint(r,n,(s+1)*4),u=t.shiftPoint(i,n,(o+1)*4);o=this.transitionsBetween(l,a),s=this.transitionsBetween(u,a);var c=new W(a.getX()+(i.getX()-n.getX())/(o+1),a.getY()+(i.getY()-n.getY())/(o+1)),d=new W(a.getX()+(r.getX()-n.getX())/(s+1),a.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(c))return this.isValid(d)?d:null;if(!this.isValid(d))return c;var h=this.transitionsBetween(l,c)+this.transitionsBetween(u,c),p=this.transitionsBetween(l,d)+this.transitionsBetween(u,d);return h>p?c:d},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,s=this.transitionsBetween(i,a)+1,l=t.shiftPoint(r,n,s*4),u=t.shiftPoint(i,n,o*4);o=this.transitionsBetween(l,a)+1,s=this.transitionsBetween(u,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var c=(r.getX()+n.getX()+i.getX()+a.getX())/4,d=(r.getY()+n.getY()+i.getY()+a.getY())/4;r=t.moveAway(r,c,d),n=t.moveAway(n,c,d),i=t.moveAway(i,c,d),a=t.moveAway(a,c,d);var h,p;return l=t.shiftPoint(r,n,s*4),l=t.shiftPoint(l,a,o*4),h=t.shiftPoint(n,r,s*4),h=t.shiftPoint(h,i,o*4),u=t.shiftPoint(i,a,s*4),u=t.shiftPoint(u,n,o*4),p=t.shiftPoint(a,i,s*4),p=t.shiftPoint(p,r,o*4),[l,h,u,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,a,o,s){var l=qd.getInstance();return l.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,r.getX(),r.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(r.getX()),o=Math.trunc(r.getY()),s=Math.abs(o-i)>Math.abs(a-n);if(s){var l=n;n=i,i=l,l=a,a=o,o=l}for(var u=Math.abs(a-n),c=Math.abs(o-i),d=-u/2,h=i<o?1:-1,p=n<a?1:-1,v=0,g=this.image.get(s?i:n,s?n:i),w=n,m=i;w!==a;w+=p){var y=this.image.get(s?m:w,s?w:m);if(y!==g&&(v++,g=y),d+=c,d>0){if(m===o)break;m+=h,d-=u}}return v},t}(),Vs=function(){function t(){this.decoder=new Sb}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(pe.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=t.NO_POINTS}else{var o=new Cb(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=n.getRawBytes(),l=new pt(n.getText(),s,8*s.length,i,q.DATA_MATRIX,ye.currentTimeMillis()),u=n.getByteSegments();u!=null&&l.putMetadata(at.BYTE_SEGMENTS,u);var c=n.getECLevel();return c!=null&&l.putMetadata(at.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new k;var i=this.moduleSize(r,e),a=r[1],o=n[1],s=r[0],l=n[0],u=(l-s+1)/i,c=(o-a+1)/i;if(u<=0||c<=0)throw new k;var d=i/2;a+=d,s+=d;for(var h=new _r(u,c),p=0;p<c;p++)for(var v=a+p*i,g=0;g<u;g++)e.get(s+g*i,v)&&h.set(g,p);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],a=e[1];i<n&&r.get(i,a);)i++;if(i===n)throw new k;var o=i-e[0];if(o===0)throw new k;return o},t.NO_POINTS=[],t}(),Ab=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Ab(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Vs,r)||this}return e})(Gi);var gi;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(gi||(gi={}));var Nb=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new De(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new K;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(gi.L,"L",1),t.M=new t(gi.M,"M",0),t.Q=new t(gi.Q,"Q",3),t.H=new t(gi.H,"H",2),t}(),Ib=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mm=function(){function t(e){this.errorCorrectionLevel=Nb.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return te.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=Ib(t.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var u=l.value,c=u[0];if(c===e||c===r)return new t(u[1]);var d=t.numBitsDiffering(e,c);d<a&&(o=u[1],a=d),e!==r&&(d=t.numBitsDiffering(r,c),d<a&&(o=u[1],a=d))}}catch(h){n={error:h}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),Ob=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var a=Ob(i),o=a.next();!o.done;o=a.next()){var s=o.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),E=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),Tb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zn=function(){function t(e,r){for(var n,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=a;var s=0,l=a[0].getECCodewordsPerBlock(),u=a[0].getECBlocks();try{for(var c=Tb(u),d=c.next();!d.done;d=c.next()){var h=d.value;s+=h.getCount()*(h.getDataCodewords()+l)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new U;try{return this.getVersionForNumber((e-17)/4)}catch{throw new U}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new K;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var a=t.VERSION_DECODE_INFO[i];if(a===e)return t.getVersionForNumber(i+7);var o=Mm.numBitsDiffering(e,a);o<r&&(n=i+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new _r(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<n;o++)i===0&&(o===0||o===n-1)||i===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new N(7,new E(1,19)),new N(10,new E(1,16)),new N(13,new E(1,13)),new N(17,new E(1,9))),new t(2,Int32Array.from([6,18]),new N(10,new E(1,34)),new N(16,new E(1,28)),new N(22,new E(1,22)),new N(28,new E(1,16))),new t(3,Int32Array.from([6,22]),new N(15,new E(1,55)),new N(26,new E(1,44)),new N(18,new E(2,17)),new N(22,new E(2,13))),new t(4,Int32Array.from([6,26]),new N(20,new E(1,80)),new N(18,new E(2,32)),new N(26,new E(2,24)),new N(16,new E(4,9))),new t(5,Int32Array.from([6,30]),new N(26,new E(1,108)),new N(24,new E(2,43)),new N(18,new E(2,15),new E(2,16)),new N(22,new E(2,11),new E(2,12))),new t(6,Int32Array.from([6,34]),new N(18,new E(2,68)),new N(16,new E(4,27)),new N(24,new E(4,19)),new N(28,new E(4,15))),new t(7,Int32Array.from([6,22,38]),new N(20,new E(2,78)),new N(18,new E(4,31)),new N(18,new E(2,14),new E(4,15)),new N(26,new E(4,13),new E(1,14))),new t(8,Int32Array.from([6,24,42]),new N(24,new E(2,97)),new N(22,new E(2,38),new E(2,39)),new N(22,new E(4,18),new E(2,19)),new N(26,new E(4,14),new E(2,15))),new t(9,Int32Array.from([6,26,46]),new N(30,new E(2,116)),new N(22,new E(3,36),new E(2,37)),new N(20,new E(4,16),new E(4,17)),new N(24,new E(4,12),new E(4,13))),new t(10,Int32Array.from([6,28,50]),new N(18,new E(2,68),new E(2,69)),new N(26,new E(4,43),new E(1,44)),new N(24,new E(6,19),new E(2,20)),new N(28,new E(6,15),new E(2,16))),new t(11,Int32Array.from([6,30,54]),new N(20,new E(4,81)),new N(30,new E(1,50),new E(4,51)),new N(28,new E(4,22),new E(4,23)),new N(24,new E(3,12),new E(8,13))),new t(12,Int32Array.from([6,32,58]),new N(24,new E(2,92),new E(2,93)),new N(22,new E(6,36),new E(2,37)),new N(26,new E(4,20),new E(6,21)),new N(28,new E(7,14),new E(4,15))),new t(13,Int32Array.from([6,34,62]),new N(26,new E(4,107)),new N(22,new E(8,37),new E(1,38)),new N(24,new E(8,20),new E(4,21)),new N(22,new E(12,11),new E(4,12))),new t(14,Int32Array.from([6,26,46,66]),new N(30,new E(3,115),new E(1,116)),new N(24,new E(4,40),new E(5,41)),new N(20,new E(11,16),new E(5,17)),new N(24,new E(11,12),new E(5,13))),new t(15,Int32Array.from([6,26,48,70]),new N(22,new E(5,87),new E(1,88)),new N(24,new E(5,41),new E(5,42)),new N(30,new E(5,24),new E(7,25)),new N(24,new E(11,12),new E(7,13))),new t(16,Int32Array.from([6,26,50,74]),new N(24,new E(5,98),new E(1,99)),new N(28,new E(7,45),new E(3,46)),new N(24,new E(15,19),new E(2,20)),new N(30,new E(3,15),new E(13,16))),new t(17,Int32Array.from([6,30,54,78]),new N(28,new E(1,107),new E(5,108)),new N(28,new E(10,46),new E(1,47)),new N(28,new E(1,22),new E(15,23)),new N(28,new E(2,14),new E(17,15))),new t(18,Int32Array.from([6,30,56,82]),new N(30,new E(5,120),new E(1,121)),new N(26,new E(9,43),new E(4,44)),new N(28,new E(17,22),new E(1,23)),new N(28,new E(2,14),new E(19,15))),new t(19,Int32Array.from([6,30,58,86]),new N(28,new E(3,113),new E(4,114)),new N(26,new E(3,44),new E(11,45)),new N(26,new E(17,21),new E(4,22)),new N(26,new E(9,13),new E(16,14))),new t(20,Int32Array.from([6,34,62,90]),new N(28,new E(3,107),new E(5,108)),new N(26,new E(3,41),new E(13,42)),new N(30,new E(15,24),new E(5,25)),new N(28,new E(15,15),new E(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new N(28,new E(4,116),new E(4,117)),new N(26,new E(17,42)),new N(28,new E(17,22),new E(6,23)),new N(30,new E(19,16),new E(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new N(28,new E(2,111),new E(7,112)),new N(28,new E(17,46)),new N(30,new E(7,24),new E(16,25)),new N(24,new E(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new N(30,new E(4,121),new E(5,122)),new N(28,new E(4,47),new E(14,48)),new N(30,new E(11,24),new E(14,25)),new N(30,new E(16,15),new E(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new N(30,new E(6,117),new E(4,118)),new N(28,new E(6,45),new E(14,46)),new N(30,new E(11,24),new E(16,25)),new N(30,new E(30,16),new E(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new N(26,new E(8,106),new E(4,107)),new N(28,new E(8,47),new E(13,48)),new N(30,new E(7,24),new E(22,25)),new N(30,new E(22,15),new E(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new N(28,new E(10,114),new E(2,115)),new N(28,new E(19,46),new E(4,47)),new N(28,new E(28,22),new E(6,23)),new N(30,new E(33,16),new E(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new N(30,new E(8,122),new E(4,123)),new N(28,new E(22,45),new E(3,46)),new N(30,new E(8,23),new E(26,24)),new N(30,new E(12,15),new E(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new N(30,new E(3,117),new E(10,118)),new N(28,new E(3,45),new E(23,46)),new N(30,new E(4,24),new E(31,25)),new N(30,new E(11,15),new E(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new N(30,new E(7,116),new E(7,117)),new N(28,new E(21,45),new E(7,46)),new N(30,new E(1,23),new E(37,24)),new N(30,new E(19,15),new E(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new N(30,new E(5,115),new E(10,116)),new N(28,new E(19,47),new E(10,48)),new N(30,new E(15,24),new E(25,25)),new N(30,new E(23,15),new E(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new N(30,new E(13,115),new E(3,116)),new N(28,new E(2,46),new E(29,47)),new N(30,new E(42,24),new E(1,25)),new N(30,new E(23,15),new E(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new N(30,new E(17,115)),new N(28,new E(10,46),new E(23,47)),new N(30,new E(10,24),new E(35,25)),new N(30,new E(19,15),new E(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new N(30,new E(17,115),new E(1,116)),new N(28,new E(14,46),new E(21,47)),new N(30,new E(29,24),new E(19,25)),new N(30,new E(11,15),new E(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new N(30,new E(13,115),new E(6,116)),new N(28,new E(14,46),new E(23,47)),new N(30,new E(44,24),new E(7,25)),new N(30,new E(59,16),new E(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new N(30,new E(12,121),new E(7,122)),new N(28,new E(12,47),new E(26,48)),new N(30,new E(39,24),new E(14,25)),new N(30,new E(22,15),new E(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new N(30,new E(6,121),new E(14,122)),new N(28,new E(6,47),new E(34,48)),new N(30,new E(46,24),new E(10,25)),new N(30,new E(2,15),new E(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new N(30,new E(17,122),new E(4,123)),new N(28,new E(29,46),new E(14,47)),new N(30,new E(49,24),new E(10,25)),new N(30,new E(24,15),new E(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new N(30,new E(4,122),new E(18,123)),new N(28,new E(13,46),new E(32,47)),new N(30,new E(48,24),new E(14,25)),new N(30,new E(42,15),new E(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new N(30,new E(20,117),new E(4,118)),new N(28,new E(40,47),new E(7,48)),new N(30,new E(43,24),new E(22,25)),new N(30,new E(10,15),new E(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new N(30,new E(19,118),new E(6,119)),new N(28,new E(18,47),new E(31,48)),new N(30,new E(34,24),new E(34,25)),new N(30,new E(20,15),new E(61,16)))],t}(),Ke;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Ke||(Ke={}));var o0=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[Ke.DATA_MASK_000,new t(Ke.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Ke.DATA_MASK_001,new t(Ke.DATA_MASK_001,function(e,r){return(e&1)===0})],[Ke.DATA_MASK_010,new t(Ke.DATA_MASK_010,function(e,r){return r%3===0})],[Ke.DATA_MASK_011,new t(Ke.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Ke.DATA_MASK_100,new t(Ke.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Ke.DATA_MASK_101,new t(Ke.DATA_MASK_101,function(e,r){return e*r%6===0})],[Ke.DATA_MASK_110,new t(Ke.DATA_MASK_110,function(e,r){return e*r%6<3})],[Ke.DATA_MASK_111,new t(Ke.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),kb=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new U;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,n=i-1;n>=o;n--)a=this.copyBit(8,n,a);for(var r=i-8;r<i;r++)a=this.copyBit(r,8,a);if(this.parsedFormatInfo=Mm.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return zn.getVersionForNumber(r);for(var n=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(o,a,n);var s=zn.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(o,a,n);if(s=zn.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new U},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=o0.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=r.buildFunctionPattern(),o=!0,s=new Uint8Array(r.getTotalCodewords()),l=0,u=0,c=0,d=i-1;d>0;d-=2){d===6&&d--;for(var h=0;h<i;h++)for(var p=o?i-1-h:h,v=0;v<2;v++)a.get(d-v,p)||(c++,u<<=1,this.bitMatrix.get(d-v,p)&&(u|=1),c===8&&(s[l++]=u,c=0,u=0));o=!o}if(l!==r.getTotalCodewords())throw new U;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=o0.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,a=e.getHeight();i<a;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t}(),s0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rb=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,a,o,s;if(e.length!==r.getTotalCodewords())throw new K;var l=r.getECBlocksForLevel(n),u=0,c=l.getECBlocks();try{for(var d=s0(c),h=d.next();!h.done;h=d.next()){var p=h.value;u+=p.getCount()}}catch(j){i={error:j}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var v=new Array(u),g=0;try{for(var w=s0(c),m=w.next();!m.done;m=w.next())for(var p=m.value,y=0;y<p.getCount();y++){var x=p.getDataCodewords(),_=l.getECCodewordsPerBlock()+x;v[g++]=new t(x,new Uint8Array(_))}}catch(j){o={error:j}}finally{try{m&&!m.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}for(var b=v[0].codewords.length,S=v.length-1;S>=0;){var C=v[S].codewords.length;if(C===b)break;S--}S++;for(var T=b-l.getECCodewordsPerBlock(),L=0,y=0;y<T;y++)for(var I=0;I<g;I++)v[I].codewords[y]=e[L++];for(var I=S;I<g;I++)v[I].codewords[T]=e[L++];for(var R=v[0].codewords.length,y=T;y<R;y++)for(var I=0;I<g;I++){var B=I<S?y:y+1;v[I].codewords[B]=e[L++]}return v},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),$t;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})($t||($t={}));var _e=function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new K;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t($t.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t($t.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t($t.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t($t.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t($t.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t($t.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t($t.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t($t.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t($t.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t($t.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),Pb=function(){function t(){}return t.decode=function(e,r,n,i){var a=new Dm(e),o=new J,s=new Array,l=-1,u=-1;try{var c=null,d=!1,h=void 0;do{if(a.available()<4)h=_e.TERMINATOR;else{var p=a.readBits(4);h=_e.forBits(p)}switch(h){case _e.TERMINATOR:break;case _e.FNC1_FIRST_POSITION:case _e.FNC1_SECOND_POSITION:d=!0;break;case _e.STRUCTURED_APPEND:if(a.available()<16)throw new U;l=a.readBits(8),u=a.readBits(8);break;case _e.ECI:var v=t.parseECIValue(a);if(c=We.getCharacterSetECIByValue(v),c===null)throw new U;break;case _e.HANZI:var g=a.readBits(4),w=a.readBits(h.getCharacterCountBits(r));g===t.GB2312_SUBSET&&t.decodeHanziSegment(a,o,w);break;default:var m=a.readBits(h.getCharacterCountBits(r));switch(h){case _e.NUMERIC:t.decodeNumericSegment(a,o,m);break;case _e.ALPHANUMERIC:t.decodeAlphanumericSegment(a,o,m,d);break;case _e.BYTE:t.decodeByteSegment(a,o,m,c,s,i);break;case _e.KANJI:t.decodeKanjiSegment(a,o,m);break;default:throw new U}break}}while(h!==_e.TERMINATOR)}catch{throw new U}return new ml(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),l,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new U;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,n--}try{r.append(Xt.decode(i,ne.GB2312))}catch(l){throw new U(l)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new U;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,n--}try{r.append(Xt.decode(i,ne.SHIFT_JIS))}catch(l){throw new U(l)}},t.decodeByteSegment=function(e,r,n,i,a,o){if(8*n>e.available())throw new U;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var u;i===null?u=ne.guessEncoding(s,o):u=i.getName();try{r.append(Xt.decode(s,u))}catch(c){throw new U(c)}a.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new U;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var a=r.length();n>1;){if(e.available()<11)throw new U;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new U;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new U;var i=e.readBits(10);if(i>=1e3)throw new U;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new U;var a=e.readBits(7);if(a>=100)throw new U;r.append(t.toAlphaNumericChar(Math.floor(a/10))),r.append(t.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new U;var o=e.readBits(4);if(o>=10)throw new U;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new U},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),Lm=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),l0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Db=function(){function t(){this.rsDecoder=new gl(At.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(_r.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new kb(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){i=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,r);return a.setOther(new Lm(!0)),a}catch(o){throw i!==null?i:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,a,o,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),c=Rb.getDataBlocks(u,s,l),d=0;try{for(var h=l0(c),p=h.next();!p.done;p=h.next()){var v=p.value;d+=v.getNumDataCodewords()}}catch(S){n={error:S}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}var g=new Uint8Array(d),w=0;try{for(var m=l0(c),y=m.next();!y.done;y=m.next()){var v=y.value,x=v.getCodewords(),_=v.getNumDataCodewords();this.correctErrors(x,_);for(var b=0;b<_;b++)g[w++]=x[b]}}catch(S){a={error:S}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}return Pb.decode(g,s,l,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Ue}for(var i=0;i<r;i++)e[i]=n[i]},t}(),Mb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lb=function(t){Mb(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=(this.getX()+n)/2,o=(this.getY()+r)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e}(W),Bb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zb=function(){function t(e,r,n,i,a,o,s){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,a=this.startY+r/2,o=new Int32Array(3),s=this.image,l=0;l<r;l++){var u=a+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var c=e;c<i&&!s.get(c,u);)c++;for(var d=0;c<i;){if(s.get(c,u))if(d===1)o[1]++;else if(d===2){if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,u,c);if(h!==null)return h}o[0]=o[2],o[1]=1,o[2]=0,d=1}else o[++d]++;else d===1&&d++,o[d]++;c++}if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,u,i);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new k},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&a.get(r,l)&&s[1]<=n;)s[1]++,l++;if(l===o||s[1]>n)return NaN;for(;l<o&&!a.get(r,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var u=s[0]+s[1]+s[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,a,o=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,s,2*e[1],o);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var c=Bb(this.possibleCenters),d=c.next();!d.done;d=c.next()){var h=d.value;if(h.aboutEquals(u,l,s))return h.combineEstimate(l,s,u)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}var p=new Lb(s,l,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),Fb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ub=function(t){Fb(e,t);function e(r,n,i,a){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=this.count+1,o=(this.count*this.getX()+n)/a,s=(this.count*this.getY()+r)/a,l=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,l,a)},e}(W),jb=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),oa=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$b=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(pe.TRY_HARDER)!==void 0,n=e!=null&&e.get(pe.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var l=!1,u=new Int32Array(5),c=s-1;c<a&&!l;c+=s){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var d=0,h=0;h<o;h++)if(i.get(h,c))(d&1)===1&&d++,u[d]++;else if(d&1)u[d]++;else if(d===4)if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,c,h,n);if(p===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>u[2]&&(c+=v-u[2]-s,h=o-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;continue}d=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;else u[++d]++;if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,c,o,n);p===!0&&(s=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var g=this.selectBestPatterns();return W.orderBestPatterns(g),new jb(g)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var a=r/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&r>=o&&s.get(r-o,e-o);)a[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!s.get(r-o,e-o)&&a[1]<=n;)a[1]++,o++;if(e<o||r<o||a[1]>n)return!1;for(;e>=o&&r>=o&&s.get(r-o,e-o)&&a[0]<=n;)a[0]++,o++;if(a[0]>n)return!1;var l=s.getHeight(),u=s.getWidth();for(o=1;e+o<l&&r+o<u&&s.get(r+o,e+o);)a[2]++,o++;if(e+o>=l||r+o>=u)return!1;for(;e+o<l&&r+o<u&&!s.get(r+o,e+o)&&a[3]<n;)a[3]++,o++;if(e+o>=l||r+o>=u||a[3]>=n)return!1;for(;e+o<l&&r+o<u&&s.get(r+o,e+o)&&a[4]<n;)a[4]++,o++;if(a[4]>=n)return!1;var c=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(c-i)<2*i&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(r,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&a.get(r,l);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!a.get(r,l)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&a.get(r,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-i)>=2*i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(l,r);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(l,r)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(l,r)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&a.get(l,r);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!a.get(l,r)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&a.get(l,r)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-i)>=i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var l=a/7,u=!1,c=this.possibleCenters,d=0,h=c.length;d<h;d++){var p=c[d];if(p.aboutEquals(l,s,o)){c[d]=p.combineEstimate(s,o,l),u=!0;break}}if(!u){var v=new Ub(o,s,l);c.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=oa(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=t.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,a=0,o=0,s=this.possibleCenters.length;try{for(var l=oa(this.possibleCenters),u=l.next();!u.done;u=l.next()){var c=u.value;c.getCount()>=t.CENTER_QUORUM&&(a++,o+=c.getEstimatedModuleSize())}}catch(g){e={error:g}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}if(a<3)return!1;var d=o/s,h=0;try{for(var p=oa(this.possibleCenters),v=p.next();!v.done;v=p.next()){var c=v.value;h+=Math.abs(c.getEstimatedModuleSize()-d)}}catch(g){n={error:g}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return h<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,i,a=this.possibleCenters.length;if(a<3)throw new k;var o=this.possibleCenters,s;if(a>3){var l=0,u=0;try{for(var c=oa(this.possibleCenters),d=c.next();!d.done;d=c.next()){var h=d.value,p=h.getEstimatedModuleSize();l+=p,u+=p*p}}catch(b){e={error:b}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}s=l/a;var v=Math.sqrt(u/a-s*s);o.sort(function(b,S){var C=Math.abs(S.getEstimatedModuleSize()-s),T=Math.abs(b.getEstimatedModuleSize()-s);return C<T?-1:C>T?1:0});for(var g=Math.max(.2*s,v),w=0;w<o.length&&o.length>3;w++){var m=o[w];Math.abs(m.getEstimatedModuleSize()-s)>g&&(o.splice(w,1),w--)}}if(o.length>3){var l=0;try{for(var y=oa(o),x=y.next();!x.done;x=y.next()){var _=x.value;l+=_.getEstimatedModuleSize()}}catch(S){n={error:S}}finally{try{x&&!x.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}s=l/o.length,o.sort(function(S,C){if(C.getCount()===S.getCount()){var T=Math.abs(C.getEstimatedModuleSize()-s),L=Math.abs(S.getEstimatedModuleSize()-s);return T<L?1:T>L?-1:0}else return C.getCount()-S.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),Vb=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(pe.NEED_RESULT_POINT_CALLBACK);var r=new $b(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(r,n,i);if(a<1)throw new k("No pattern found in proccess finder.");var o=t.computeDimension(r,n,i,a),s=zn.getProvisionalVersionForDimension(o),l=s.getDimensionForVersion()-7,u=null;if(s.getAlignmentPatternCenters().length>0)for(var c=n.getX()-r.getX()+i.getX(),d=n.getY()-r.getY()+i.getY(),h=1-3/l,p=Math.floor(r.getX()+h*(c-r.getX())),v=Math.floor(r.getY()+h*(d-r.getY())),g=4;g<=16;g<<=1)try{u=this.findAlignmentInRegion(a,p,v,g);break}catch(x){if(!(x instanceof k))throw x}var w=t.createTransform(r,n,i,u,o),m=t.sampleGrid(this.image,w,o),y;return u===null?y=[i,r,n]:y=[i,r,n,u],new Gd(m,y)},t.createTransform=function(e,r,n,i,a){var o=a-3.5,s,l,u,c;return i!==null?(s=i.getX(),l=i.getY(),u=o-3,c=u):(s=r.getX()-e.getX()+n.getX(),l=r.getY()-e.getY()+n.getY(),u=o,c=o),Tm.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,u,c,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),s,l,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=qd.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var a=oe.round(W.distance(e,r)/i),o=oe.round(W.distance(e,n)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new k("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,r,n,i),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(r-(i-r)*o);return o=1,l<0?(o=r/(r-l),l=0):l>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(l-r),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,r,s,l),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var a=Math.abs(i-r)>Math.abs(n-e);if(a){var o=e;e=r,r=o,o=n,n=i,i=o}for(var s=Math.abs(n-e),l=Math.abs(i-r),u=-s/2,c=e<n?1:-1,d=r<i?1:-1,h=0,p=n+c,v=e,g=r;v!==p;v+=c){var w=a?g:v,m=a?v:g;if(h===1===this.image.get(w,m)){if(h===2)return oe.distance(v,g,e,r);h++}if(u+=l,u>0){if(g===i)break;g+=d,u-=s}}return h===2?oe.distance(n+c,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var a=Math.floor(i*e),o=Math.max(0,r-a),s=Math.min(this.image.getWidth()-1,r+a);if(s-o<e*3)throw new k("Alignment top exceeds estimated module size.");var l=Math.max(0,n-a),u=Math.min(this.image.getHeight()-1,n+a);if(u-l<e*3)throw new k("Alignment bottom exceeds estimated module size.");var c=new zb(this.image,o,l,s-o,u-l,e,this.resultPointCallback);return c.find()},t}(),Hs=function(){function t(){this.decoder=new Db}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(pe.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,r),i=t.NO_POINTS}else{var o=new Vb(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),i=o.getPoints()}n.getOther()instanceof Lm&&n.getOther().applyMirroredCorrection(i);var s=new pt(n.getText(),n.getRawBytes(),void 0,i,q.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(at.BYTE_SEGMENTS,l);var u=n.getECLevel();return u!==null&&s.putMetadata(at.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(s.putMetadata(at.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(at.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new k;var i=this.moduleSize(r,e),a=r[1],o=n[1],s=r[0],l=n[0];if(s>=l||a>=o)throw new k;if(o-a!==l-s&&(l=s+(o-a),l>=e.getWidth()))throw new k;var u=Math.round((l-s+1)/i),c=Math.round((o-a+1)/i);if(u<=0||c<=0)throw new k;if(c!==u)throw new k;var d=Math.floor(i/2);a+=d,s+=d;var h=s+Math.floor((u-1)*i)-l;if(h>0){if(h>d)throw new k;s-=h}var p=a+Math.floor((c-1)*i)-o;if(p>0){if(p>d)throw new k;a-=p}for(var v=new _r(u,c),g=0;g<c;g++)for(var w=a+Math.floor(g*i),m=0;m<u;m++)e.get(s+Math.floor(m*i),w)&&v.set(m,g);return v},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),a=e[0],o=e[1],s=!0,l=0;a<i&&o<n;){if(s!==r.get(a,o)){if(++l===5)break;s=!s}a++,o++}if(a===i||o===n)throw new k;return(a-e[0])/7},t.NO_POINTS=new Array,t}(),Hb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ie=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return oe.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=Hb(e),s=o.next();!s.done;s=o.next()){var l=s.value;i[a++]=l}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=Ge.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),Wb=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Gb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qb=function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),a=t.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=t.detect(n,i)),new Wb(i,a)},t.detect=function(e,r){for(var n,i,a=new Array,o=0,s=0,l=!1;o<r.getHeight();){var u=t.findVertices(r,o,s);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,s=0;try{for(var c=(n=void 0,Gb(a)),d=c.next();!d.done;d=c.next()){var h=d.value;h[1]!=null&&(o=Math.trunc(Math.max(o,h[1].getY()))),h[3]!=null&&(o=Math.max(o,Math.trunc(h[3].getY())))}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(l=!0,a.push(u),!e)break;u[2]!=null?(s=Math.trunc(u[2].getX()),o=Math.trunc(u[2].getY())):(s=Math.trunc(u[4].getX()),o=Math.trunc(u[4].getY()))}return a},t.findVertices=function(e,r,n){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,a,o){for(var s=new Array(4),l=!1,u=new Int32Array(o.length);i<r;i+=t.ROW_STEP){var c=t.findGuardPattern(e,a,i,n,!1,o,u);if(c!=null){for(;i>0;){var d=t.findGuardPattern(e,a,--i,n,!1,o,u);if(d!=null)c=d;else{i++;break}}s[0]=new W(c[0],i),s[1]=new W(c[1],i),l=!0;break}}var h=i+1;if(l){for(var p=0,d=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);h<r;h++){var c=t.findGuardPattern(e,d[0],h,n,!1,o,u);if(c!=null&&Math.abs(d[0]-c[0])<t.MAX_PATTERN_DRIFT&&Math.abs(d[1]-c[1])<t.MAX_PATTERN_DRIFT)d=c,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,s[2]=new W(d[0],h),s[3]=new W(d[1],h)}return h-i<t.BARCODE_MIN_HEIGHT&&Ge.fill(s,null),s},t.findGuardPattern=function(e,r,n,i,a,o,s){Ge.fillWithin(s,0,s.length,0);for(var l=r,u=0;e.get(l,n)&&l>0&&u++<t.MAX_PIXEL_DRIFT;)l--;for(var c=l,d=0,h=o.length,p=a;c<i;c++){var v=e.get(c,n);if(v!==p)s[d]++;else{if(d===h-1){if(t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,c]);l+=s[0]+s[1],ye.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,p=!p}}return d===h-1&&t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,c-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=r[s];if(a<o)return 1/0;var l=a/o;n*=l;for(var u=0,c=0;c<i;c++){var d=e[c],h=r[c]*l,p=d>h?d-h:h-d;if(p>n)return 1/0;u+=p}return u/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),Xb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dn=function(){function t(e,r){if(r.length===0)throw new K;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),ye.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=Xb(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(d){r={error:d}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}for(var l=this.coefficients[0],u=this.coefficients.length,c=1;c<u;c++)l=this.field.add(this.field.multiply(e,l),this.coefficients[c]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new K("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;ye.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=this.field.add(r[s-o],n[s]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new K("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new K("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=0;s<n;s++)for(var l=r[s],u=0;u<a;u++)o[s+u]=this.field.add(o[s+u],this.field.multiply(l,i[u]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new K;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new J,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),Kb=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new K;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Om;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),Yb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zb=function(t){Yb(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var a=1,o=0;o<r;o++)i.expTable[o]=a,a=a*n%r;for(var o=0;o<r-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Dn(i,new Int32Array([0])),i.one=new Dn(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new K;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Dn(this,i)},e.PDF417_GF=new e(ie.NUMBER_OF_CODEWORDS,3),e}(Kb),Qb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jb=function(){function t(){this.field=Zb.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,a,o=new Dn(this.field,e),s=new Int32Array(r),l=!1,u=r;u>0;u--){var c=o.evaluateAt(this.field.exp(u));s[r-u]=c,c!==0&&(l=!0)}if(!l)return 0;var d=this.field.getOne();if(n!=null)try{for(var h=Qb(n),p=h.next();!p.done;p=h.next()){var v=p.value,g=this.field.exp(e.length-1-v),w=new Dn(this.field,new Int32Array([this.field.subtract(0,g),1]));d=d.multiply(w)}}catch(T){i={error:T}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}for(var m=new Dn(this.field,s),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),m,r),x=y[0],_=y[1],b=this.findErrorLocations(x),S=this.findErrorMagnitudes(_,x,b),u=0;u<b.length;u++){var C=e.length-1-this.field.log(b[u]);if(C<0)throw Ue.getChecksumInstance();e[C]=this.field.subtract(e[C],S[u])}return b.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=e,o=r,s=this.field.getZero(),l=this.field.getOne();o.getDegree()>=Math.round(n/2);){var u=a,c=s;if(a=o,s=l,a.isZero())throw Ue.getChecksumInstance();o=u;for(var d=this.field.getZero(),h=a.getCoefficient(a.getDegree()),p=this.field.inverse(h);o.getDegree()>=a.getDegree()&&!o.isZero();){var v=o.getDegree()-a.getDegree(),g=this.field.multiply(o.getCoefficient(o.getDegree()),p);d=d.add(this.field.buildMonomial(v,g)),o=o.subtract(a.multiplyByMonomial(v,g))}l=d.multiply(s).subtract(c).negative()}var w=l.getCoefficient(0);if(w===0)throw Ue.getChecksumInstance();var m=this.field.inverse(w),y=l.multiply(m),x=o.multiply(m);return[y,x]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,a=1;a<this.field.getSize()&&i<r;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==r)throw Ue.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,r.getCoefficient(o));for(var s=new Dn(this.field,a),l=n.length,u=new Int32Array(l),o=0;o<l;o++){var c=this.field.inverse(n[o]),d=this.field.subtract(0,e.evaluateAt(c)),h=this.field.inverse(s.evaluateAt(c));u[o]=this.field.multiply(d,h)}return u},t}(),Nc=function(){function t(e,r,n,i,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,a)}return t.prototype.constructor_1=function(e,r,n,i,a){var o=r==null||n==null,s=i==null||a==null;if(o&&s)throw new k;o?(r=new W(0,i.getY()),n=new W(0,a.getY())):s&&(i=new W(e.getWidth()-1,r.getY()),a=new W(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var c=new W(l.getX(),u);n?i=c:o=c}if(r>0){var d=n?this.bottomLeft:this.bottomRight,h=Math.trunc(d.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new W(d.getX(),h);n?a=p:s=p}return new t(this.image,i,a,o,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),e3=function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),Kd=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(o,s,l,u,c,d){if(o==="%%")return"%";if(r[++n]!==void 0){o=u?parseInt(u.substr(1)):void 0;var h=c?parseInt(c.substr(1)):void 0,p;switch(d){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(o);break;case"p":p=parseFloat(r[n]).toPrecision(o);break;case"e":p=parseFloat(r[n]).toExponential(o);break;case"x":p=parseInt(r[n]).toString(h||16);break;case"d":p=parseFloat(parseInt(r[n],h||10).toPrecision(o)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var v=parseInt(l),g=l&&l[0]+""=="0"?"0":" ";p.length<v;)p=s!==void 0?p+g:g+p;return p}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),t3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bm=function(){function t(e){this.boundingBox=new Nc(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new Kd,i=0;try{for(var a=t3(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),r3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n3=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},ma=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,a=function(d,h){var p={getKey:function(){return d},getValue:function(){return h}};p.getValue()>n?(n=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===n&&i.push(p.getKey())};try{for(var o=r3(this.values.entries()),s=o.next();!s.done;s=o.next()){var l=n3(s.value,2),u=l[0],c=l[1];a(u,c)}}catch(d){e={error:d}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return ie.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),i3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ru=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u0=function(t){i3(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=ru(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=-1,c=1,d=0,h=s;h<l;h++)if(n[h]!=null){var p=n[h],v=p.getRowNumber()-u;if(v===0)d++;else if(v===1)c=Math.max(c,d),d=1,u=p.getRowNumber();else if(v<0||p.getRowNumber()>=r.getRowCount()||v>h)n[h]=null;else{var g=void 0;c>2?g=(c-2)*v:g=v;for(var w=g>=h,m=1;m<=g&&!w;m++)w=n[h-m]!=null;w?n[h]=null:(u=p.getRowNumber(),d=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=ru(this.getCodewords()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l!=null){var u=l.getRowNumber();if(u>=a.length)continue;a[u]++}}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.getCodewords(),u=-1,c=o;c<s;c++)if(l[c]!=null){var d=l[c];d.setRowNumberAsRowIndicatorColumn();var h=d.getRowNumber()-u;h===0||(h===1?u=d.getRowNumber():d.getRowNumber()>=r.getRowCount()?l[c]=null:u=d.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),a=new ma,o=new ma,s=new ma,l=new ma;try{for(var u=ru(i),c=u.next();!c.done;c=u.next()){var d=c.value;if(d!=null){d.setRowNumberAsRowIndicatorColumn();var h=d.getValue()%30,p=d.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(h*3+1);break;case 1:l.setValue(h/3),s.setValue(h%3);break;case 2:a.setValue(h+1);break}}}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||l.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<ie.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>ie.MAX_ROWS_IN_BARCODE)return null;var v=new e3(a.getValue()[0],o.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var a=r[i];if(r[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:o+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Bm),a3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o3=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ie.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=n[r],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=s[r],u[3]=l[r],r>0&&(u[0]=n[r-1],u[4]=s[r-1],u[5]=l[r-1]),r>1&&(u[8]=n[r-2],u[10]=s[r-2],u[11]=l[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=s[r+1],u[7]=l[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=s[r+2],u[13]=l[r+2]);try{for(var c=a3(u),d=c.next();!d.done;d=c.next()){var h=d.value;if(t.adjustRowNumber(o,h))return}}catch(p){i={error:p}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new Kd,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()},t}(),s3=function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),l3=function(){function t(){}return t.initialize=function(){for(var e=0;e<ie.SYMBOL_TABLE.length;e++)for(var r=ie.SYMBOL_TABLE[e],n=r&1,i=0;i<ie.BARS_IN_MODULE;i++){for(var a=0;(r&1)===n;)a+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(ie.BARS_IN_MODULE)),t.RATIOS_TABLE[e][ie.BARS_IN_MODULE-i-1]=Math.fround(a/ie.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=oe.sum(e),n=new Int32Array(ie.BARS_IN_MODULE),i=0,a=0,o=0;o<ie.MODULES_IN_CODEWORD;o++){var s=r/(2*ie.MODULES_IN_CODEWORD)+o*r/ie.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return ie.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=oe.sum(e),n=new Array(ie.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var a=Sc.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var l=0,u=t.RATIOS_TABLE[s],c=0;c<ie.BARS_IN_MODULE;c++){var d=Math.fround(u[c]-n[c]);if(l+=Math.fround(d*d),l>=a)break}l<a&&(a=l,o=ie.SYMBOL_TABLE[s])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(ie.SYMBOL_TABLE.length).map(function(e){return new Array(ie.BARS_IN_MODULE)}),t}(),u3=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),c0=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),c3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d3=function(t){c3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(kt),f3=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new d3;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new Wd;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),h3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p3=function(t){h3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(kt),v3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m3=function(t){v3(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new K("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new p3;i=te.MAX_VALUE}this.buf=Ge.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new Wd;this.ensureCapacity(this.count+i),ye.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ge.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(f3),he;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(he||(he={}));function zm(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Lo;function Hr(t){if(typeof Lo>"u"&&(Lo=zm()),Lo===null)throw new Error("BigInt is not supported!");return Lo(t)}function g3(){var t=[];t[0]=Hr(1);var e=Hr(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var y3=function(){function t(){}return t.decode=function(e,r){var n=new J(""),i=We.ISO8859_1;n.enableDecoding(i);for(var a=1,o=e[a++],s=new u3;a<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(o,e,i,a,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,n);break;case t.ECI_CHARSET:We.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new U;default:a--,a=t.textCompaction(e,a,n);break}if(a<e.length)o=e[a++];else throw U.getFormatInstance()}if(n.length()===0)throw U.getFormatInstance();var l=new ml(null,n.toString(),null,r);return l.setOther(s),l},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw U.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,r++)i[a]=e[r];n.setSegmentIndex(te.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new J;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new J;r=t.textCompaction(e,r+1,l),n.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new J;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new J;r=t.textCompaction(e,r+1,c),n.setAddressee(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new J;r=t.numericCompaction(e,r+1,d),n.setSegmentCount(te.parseInt(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new J;r=t.numericCompaction(e,r+1,h),n.setTimestamp(c0.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new J;r=t.numericCompaction(e,r+1,p),n.setChecksum(te.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new J;r=t.numericCompaction(e,r+1,v),n.setFileSize(c0.parseLong(v.toString()));break;default:throw U.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(s!==-1){var g=r-s;n.isLastSegment()&&g--,n.setOptionalData(Ge.copyOfRange(e,s,s+g))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),a=new Int32Array((e[0]-r)*2),o=0,s=!1;r<e[0]&&!s;){var l=e[r++];if(l<t.TEXT_COMPACTION_MODE_LATCH)i[o]=l/30,i[o+1]=l%30,o+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:i[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[r++],a[o]=l,o++;break}}return t.decodeTextCompaction(i,a,o,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var a=he.ALPHA,o=he.ALPHA,s=0;s<n;){var l=e[s],u="";switch(a){case he.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.LL:a=he.LOWER;break;case t.ML:a=he.MIXED;break;case t.PS:o=a,a=he.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=he.ALPHA;break}break;case he.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case t.AS:o=a,a=he.ALPHA_SHIFT;break;case t.ML:a=he.MIXED;break;case t.PS:o=a,a=he.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=he.ALPHA;break}break;case he.MIXED:if(l<t.PL)u=t.MIXED_CHARS[l];else switch(l){case t.PL:a=he.PUNCT;break;case 26:u=" ";break;case t.LL:a=he.LOWER;break;case t.AL:a=he.ALPHA;break;case t.PS:o=a,a=he.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=he.ALPHA;break}break;case he.PUNCT:if(l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=he.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=he.ALPHA;break}break;case he.ALPHA_SHIFT:if(a=o,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=he.ALPHA;break}break;case he.PUNCT_SHIFT:if(a=o,l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=he.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=he.ALPHA;break}break}u!==""&&i.append(u),s++}},t.byteCompaction=function(e,r,n,i,a){var o=new m3,s=0,l=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),d=r[i++];i<r[0]&&!u;)switch(c[s++]=d,l=900*l+d,d=r[i++],d){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(Hr(l)>>Hr(8*(5-h))));l=0,s=0}break}i===r[0]&&d<t.TEXT_COMPACTION_MODE_LATCH&&(c[s++]=d);for(var p=0;p<s;p++)o.write(c[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!u;){var v=r[i++];if(v<t.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+v;else switch(v){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(Hr(l)>>Hr(8*(5-h))));l=0,s=0}}break}return a.append(Xt.decode(o.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,a=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!a;){var s=e[r++];if(r===e[0]&&(a=!0),s<t.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(t.decodeBase900toBase10(o,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Hr(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*Hr(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new U;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=zm()?g3():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),sa=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x3=function(){function t(){}return t.decode=function(e,r,n,i,a,o,s){for(var l=new Nc(e,r,n,i,a),u=null,c=null,d,h=!0;;h=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,l,r,!0,o,s)),i!=null&&(c=t.getRowIndicatorColumn(e,l,i,!1,o,s)),d=t.merge(u,c),d==null)throw k.getNotFoundInstance();var p=d.getBoundingBox();if(h&&p!=null&&(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))l=p;else break}d.setBoundingBox(l);var v=d.getBarcodeColumnCount()+1;d.setDetectionResultColumn(0,u),d.setDetectionResultColumn(v,c);for(var g=u!=null,w=1;w<=v;w++){var m=g?w:v-w;if(d.getDetectionResultColumn(m)===void 0){var y=void 0;m===0||m===v?y=new u0(l,m===0):y=new Bm(l),d.setDetectionResultColumn(m,y);for(var x=-1,_=x,b=l.getMinY();b<=l.getMaxY();b++){if(x=t.getStartColumn(d,m,b,g),x<0||x>l.getMaxX()){if(_===-1)continue;x=_}var S=t.detectCodeword(e,l.getMinX(),l.getMaxX(),g,x,b,o,s);S!=null&&(y.setCodeword(b,S),_=x,o=Math.min(o,S.getWidth()),s=Math.max(s,S.getWidth()))}}}return t.createDecoderResult(d)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=Nc.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new o3(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=t.getMax(i),o=0;try{for(var s=sa(i),l=s.next();!l.done;l=s.next()){var u=l.value;if(o+=a-u,u>0)break}}catch(p){r={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var c=e.getCodewords(),d=0;o>0&&c[d]==null;d++)o--;for(var h=0,d=i.length-1;d>=0&&(h+=a-i[d],!(i[d]>0));d--);for(var d=c.length-1;h>0&&c[d]==null;d--)h--;return e.getBoundingBox().addMissingRows(o,h,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var a=sa(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,a,o){for(var s=new u0(r,i),l=0;l<2;l++)for(var u=l===0?1:-1,c=Math.trunc(Math.trunc(n.getX())),d=Math.trunc(Math.trunc(n.getY()));d<=r.getMaxY()&&d>=r.getMinY();d+=u){var h=t.detectCodeword(e,0,e.getWidth(),i,c,d,a,o);h!=null&&(s.setCodeword(d,h),i?c=h.getStartX():c=h.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>ie.MAX_CODEWORDS_IN_BARCODE)throw k.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=r[s][l+1].getValue(),c=s*e.getBarcodeColumnCount()+l;u.length===0?n.push(c):u.length===1?i[c]=u[0]:(o.push(c),a.push(u))}for(var d=new Array(a.length),h=0;h<d.length;h++)d[h]=a[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,ie.toIntArray(n),ie.toIntArray(o),d)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var l=0;l<o.length;l++)r[i[l]]=a[l][o[l]];try{return t.decodeCodewords(r,e,n)}catch(c){var u=c instanceof Ue;if(!u)throw c}if(o.length===0)throw Ue.getChecksumInstance();for(var l=0;l<o.length;l++)if(o[l]<a[l].length-1){o[l]++;break}else if(o[l]=0,l===o.length-1)throw Ue.getChecksumInstance()}throw Ue.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var l=0;l<o[s].length;l++)o[s][l]=new ma;var u=0;try{for(var c=sa(e.getDetectionResultColumns()),d=c.next();!d.done;d=c.next()){var h=d.value;if(h!=null)try{for(var p=(i=void 0,sa(h.getCodewords())),v=p.next();!v.done;v=p.next()){var g=v.value;if(g!=null){var w=g.getRowNumber();if(w>=0){if(w>=o.length)continue;o[w][u].setValue(g.getValue())}}}}catch(m){i={error:m}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u++}}catch(m){r={error:m}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var a,o,s=i?1:-1,l=null;if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodeword(n)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(r).getCodewordNearby(n),l!=null)return i?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),l!=null)return i?l.getEndX():l.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var c=(a=void 0,sa(e.getDetectionResultColumn(r).getCodewords())),d=c.next();!d.done;d=c.next()){var h=d.value;if(h!=null)return(i?h.getEndX():h.getStartX())+s*u*(h.getEndX()-h.getStartX())}}catch(p){a={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(a)throw a.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,a,o,s,l){a=t.adjustCodewordStartColumn(e,r,n,i,a,o);var u=t.getModuleBitCount(e,r,n,i,a,o);if(u==null)return null;var c,d=oe.sum(u);if(i)c=a+d;else{for(var h=0;h<u.length/2;h++){var p=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=p}c=a,a=c-d}if(!t.checkCodewordSkew(d,s,l))return null;var v=l3.getDecodedValue(u),g=ie.getCodeword(v);return g===-1?null:new s3(a,c,t.getCodewordBucketNumber(v),g)},t.getModuleBitCount=function(e,r,n,i,a,o){for(var s=a,l=new Int32Array(8),u=0,c=i?1:-1,d=i;(i?s<n:s>=r)&&u<l.length;)e.get(s,o)===d?(l[u]++,s+=c):(u++,d=!d);return u===l.length||s===(i?n:r)&&u===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,a,o){for(var s=a,l=i?-1:1,u=0;u<2;u++){for(;(i?s>=r:s<n)&&i===e.get(s,o);){if(Math.abs(a-s)>t.CODEWORD_SKEW_SIZE)return a;s+=l}l=-l,i=!i}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw U.getFormatInstance();var i=1<<r+1,a=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var o=y3.decode(e,""+r);return o.setErrorsCorrected(a),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw Ue.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw U.getFormatInstance();var n=e[0];if(n>e.length)throw U.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw U.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new Kd,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new Jb,t}(),w3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ws=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw k.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof U||n instanceof Ue?k.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,a,o=new Array,s=qb.detectMultiple(e,r,n);try{for(var l=w3(s.getPoints()),u=l.next();!u.done;u=l.next()){var c=u.value,d=x3.decode(s.getBits(),c[4],c[5],c[6],c[7],t.getMinCodewordWidth(c),t.getMaxCodewordWidth(c)),h=new pt(d.getText(),d.getRawBytes(),void 0,c,q.PDF_417);h.putMetadata(at.ERROR_CORRECTION_LEVEL,d.getECLevel());var p=d.getOther();p!=null&&h.putMetadata(at.PDF417_EXTRA_METADATA,p),o.push(h)}}catch(v){i={error:v}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return o.map(function(v){return v})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?te.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*ie.MODULES_IN_CODEWORD/ie.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*ie.MODULES_IN_CODEWORD/ie.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*ie.MODULES_IN_CODEWORD/ie.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*ie.MODULES_IN_CODEWORD/ie.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),_3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d0=function(t){_3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(kt),f0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fm=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(pe.TRY_HARDER)!==void 0,n=e==null?null:e.get(pe.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(o){return o===q.UPC_A||o===q.UPC_E||o===q.EAN_13||o===q.EAN_8||o===q.CODABAR||o===q.CODE_39||o===q.CODE_93||o===q.CODE_128||o===q.ITF||o===q.RSS_14||o===q.RSS_EXPANDED});a&&!r&&i.push(new mi(e)),n.includes(q.QR_CODE)&&i.push(new Hs),n.includes(q.DATA_MATRIX)&&i.push(new Vs),n.includes(q.AZTEC)&&i.push(new js),n.includes(q.PDF_417)&&i.push(new Ws),a&&r&&i.push(new mi(e))}i.length===0&&(r||i.push(new mi(e)),i.push(new Hs),i.push(new Vs),i.push(new js),i.push(new Ws),r&&i.push(new mi(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=f0(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new d0("No readers where selected, nothing can be read.");try{for(var i=f0(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof d0)continue}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new k("No MultiFormat Readers were able to detect the code.")},t}(),E3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){E3(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,a=new Fm;return a.setHints(r),i=t.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(Gi);var b3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){b3(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Ws,r)||this}return e})(Gi);var S3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){S3(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Hs,r)||this}return e})(Gi);var Ic;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Ic||(Ic={}));const Bo=Ic;var Um=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ln(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,a=r.length;a<=e;a++){var o=n.multiply(new ln(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new K("No error correction bytes");var n=e.length-r;if(n<=0)throw new K("No data bytes provided");var i=this.buildGenerator(r),a=new Int32Array(n);ye.arraycopy(e,0,a,0,n);var o=new ln(this.field,a);o=o.multiplyByMonomial(r,1);for(var s=o.divide(i)[1],l=s.getCoefficients(),u=r-l.length,c=0;c<u;c++)e[n+c]=0;ye.arraycopy(l,0,e,n+u,l.length)},t}(),ga=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=n[o],l=0;l<i-1;l++){var u=s[l];u===s[l+1]&&u===n[o+1][l]&&u===n[o+1][l+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var l=n[o];s+6<i&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(t.isWhiteHorizontal(l,s-4,s)||t.isWhiteHorizontal(l,s+7,s+11))&&r++,o+6<a&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(t.isWhiteVertical(n,s,o-4,o)||t.isWhiteVertical(n,s,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=n[o],l=0;l<i;l++)s[l]===1&&r++;var u=e.getHeight()*e.getWidth(),c=Math.floor(Math.abs(r*2-u)*10/u);return c*t.N4},t.getDataMaskBit=function(e,r,n){var i,a;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:a=n*r,i=(a&1)+a%3;break;case 6:a=n*r,i=(a&1)+a%3&1;break;case 7:a=n*r,i=a%3+(n+r&1)&1;break;default:throw new K("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),a=r?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var l=0,u=-1,c=0;c<a;c++){var d=r?o[s][c]:o[c][s];d===u?l++:(l>=5&&(n+=t.N1+(l-5)),l=1,u=d)}l>=5&&(n+=t.N1+(l-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),C3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A3=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=C3(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Ge.fill(o,e)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],o=r.bytes[n],s=0,l=this.width;s<l;++s)if(a[s]!==o[s])return!1;return!0},t.prototype.toString=function(){for(var e=new J,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Oc=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new J;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),N3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),we=function(t){N3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(kt),h0=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,a){t.clearMatrix(a),t.embedBasicPatterns(n,a),t.embedTypeInfo(r,i,a),t.maybeEmbedVersionInfo(n,a),t.embedDataBits(e,i,a)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new Qe;t.makeTypeInfoBits(e,r,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),l=t.TYPE_INFO_COORDINATES[a],u=l[0],c=l[1];if(n.setBoolean(u,c,s),a<8){var d=n.getWidth()-a-1,h=8;n.setBoolean(d,h,s)}else{var d=8,h=n.getHeight()-7+(a-8);n.setBoolean(d,h,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Qe;t.makeVersionInfoBits(e,n);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var s=n.get(i);i--,r.setBoolean(a,r.getHeight()-11+o,s),r.setBoolean(r.getHeight()-11+o,a,s)}}},t.embedDataBits=function(e,r,n){for(var i=0,a=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var u=o-l;if(t.isEmpty(n.get(u,s))){var c=void 0;i<e.getSize()?(c=e.get(i),++i):c=!1,r!==255&&ga.getDataMaskBit(r,u,s)&&(c=!c),n.setBoolean(u,s,c)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new we("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-te.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new K("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Oc.isValidMaskPattern(r))throw new we("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var a=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(a,10);var o=new Qe;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new we("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new we("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new we;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new we;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new we;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var a=t.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var a=t.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var l=0;l!==o;l++){var u=i[l];u>=0&&t.isEmpty(r.get(u,s))&&t.embedPositionAdjustmentPattern(u-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),I3=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),p0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return ga.applyMaskPenaltyRule1(e)+ga.applyMaskPenaltyRule2(e)+ga.applyMaskPenaltyRule3(e)+ga.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(Bo.CHARACTER_SET)!==void 0;a&&(i=n.get(Bo.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new Qe;if(o===_e.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=We.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(o,s);var u=new Qe;this.appendBytes(e,o,u,i);var c;if(n!==null&&n.get(Bo.QR_VERSION)!==void 0){var d=Number.parseInt(n.get(Bo.QR_VERSION).toString(),10);c=zn.getVersionForNumber(d);var h=this.calculateBitsNeeded(o,s,u,c);if(!this.willFit(h,c,r))throw new we("Data too big for requested version")}else c=this.recommendVersion(r,o,s,u);var p=new Qe;p.appendBitArray(s);var v=o===_e.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(v,c,o,p),p.appendBitArray(u);var g=c.getECBlocksForLevel(r),w=c.getTotalCodewords()-g.getTotalECCodewords();this.terminateBits(w,p);var m=this.interleaveWithECBytes(p,c.getTotalCodewords(),w,g.getNumBlocks()),y=new Oc;y.setECLevel(r),y.setMode(o),y.setVersion(c);var x=c.getDimensionForVersion(),_=new A3(x,x),b=this.chooseMaskPattern(m,r,c,_);return y.setMaskPattern(b),h0.buildMatrix(m,r,c,b,_),y.setMatrix(_),y},t.recommendVersion=function(e,r,n,i){var a=this.calculateBitsNeeded(r,n,i,zn.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(r,n,i,o);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),We.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return _e.KANJI;for(var n=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return _e.BYTE}return i?_e.ALPHANUMERIC:n?_e.NUMERIC:_e.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Xt.encode(e,We.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=r[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<Oc.NUM_MASK_PATTERNS;s++){h0.buildMatrix(e,r,n,s,i);var l=this.calculateMaskPenalty(i);l<a&&(a=l,o=s)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=zn.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new we("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),a=r.getECBlocksForLevel(n),o=a.getTotalECCodewords(),s=i-o,l=(e+7)/8;return s>=l},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new we("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var a=r.getSize()&7;if(a>0)for(var i=a;i<8;i++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),i=0;i<o;++i)r.appendBits(i&1?17:236,8);if(r.getSize()!==n)throw new we("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,a,o){if(i>=n)throw new we("Block ID too large");var s=e%n,l=n-s,u=Math.floor(e/n),c=u+1,d=Math.floor(r/n),h=d+1,p=u-d,v=c-h;if(p!==v)throw new we("EC bytes mismatch");if(n!==l+s)throw new we("RS blocks mismatch");if(e!==(d+p)*l+(h+v)*s)throw new we("Total bytes mismatch");i<l?(a[0]=d,o[0]=p):(a[0]=h,o[0]=v)},t.interleaveWithECBytes=function(e,r,n,i){var a,o,s,l;if(e.getSizeInBytes()!==n)throw new we("Number of bits and data bytes does not match");for(var u=0,c=0,d=0,h=new Array,p=0;p<i;++p){var v=new Int32Array(1),g=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,p,v,g);var w=v[0],m=new Uint8Array(w);e.toBytes(8*u,m,0,w);var y=t.generateECBytes(m,g[0]);h.push(new I3(m,y)),c=Math.max(c,w),d=Math.max(d,y.length),u+=v[0]}if(n!==u)throw new we("Data bytes does not match offset");for(var x=new Qe,p=0;p<c;++p)try{for(var _=(a=void 0,p0(h)),b=_.next();!b.done;b=_.next()){var S=b.value,m=S.getDataBytes();p<m.length&&x.appendBits(m[p],8)}}catch(I){a={error:I}}finally{try{b&&!b.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}for(var p=0;p<d;++p)try{for(var C=(s=void 0,p0(h)),T=C.next();!T.done;T=C.next()){var S=T.value,y=S.getErrorCorrectionBytes();p<y.length&&x.appendBits(y[p],8)}}catch(I){s={error:I}}finally{try{T&&!T.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}if(r!==x.getSizeInBytes())throw new we("Interleaving error: "+r+" and "+x.getSizeInBytes()+" differ.");return x},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),a=0;a<n;a++)i[a]=e[a]&255;new Um(At.QR_CODE_FIELD_256).encode(i,r);for(var o=new Uint8Array(r),a=0;a<r;a++)o[a]=i[n+a];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var a=n.getCharacterCountBits(r);if(e>=1<<a)throw new we(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},t.appendBytes=function(e,r,n,i){switch(r){case _e.NUMERIC:t.appendNumericBytes(e,n);break;case _e.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case _e.BYTE:t.append8BitBytes(e,n,i);break;case _e.KANJI:t.appendKanjiBytes(e,n);break;default:throw new we("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getDigit(e.charAt(i));if(i+2<n){var o=t.getDigit(e.charAt(i+1)),s=t.getDigit(e.charAt(i+2));r.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<n){var o=t.getDigit(e.charAt(i+1));r.appendBits(a*10+o,7),i+=2}else r.appendBits(a,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new we;if(i+1<n){var o=t.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new we;r.appendBits(a*45+o,11),i+=2}else r.appendBits(a,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=Xt.encode(e,n)}catch(l){throw new we(l)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Xt.encode(e,We.SJIS)}catch(d){throw new we(d)}for(var i=n.length,a=0;a<i;a+=2){var o=n[a]&255,s=n[a+1]&255,l=o<<8&4294967295|s,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new we("Invalid byte sequence");var c=(u>>8)*192+(u&255);r.appendBits(c,13)}},t.appendECI=function(e,r){r.appendBits(_e.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=We.UTF8.getName(),t})();var O3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){O3(e,t);function e(r,n,i,a,o,s,l,u){var c=t.call(this,s,l)||this;if(c.yuvData=r,c.dataWidth=n,c.dataHeight=i,c.left=a,c.top=o,a+s>n||o+l>i)throw new K("Crop rectangle does not fit within image data.");return u&&c.reverseHorizontal(s,l),c}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new K("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return ye.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ye.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<n;s++){var l=s*r;ye.arraycopy(this.yuvData,o,a,l,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*r,u=0;u<r;u++){var c=a[o+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+u]=4278190080|c*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<n;a++,o+=this.dataWidth)for(var s=o+r/2,l=o,u=o+r-1;l<s;l++,u--){var c=i[l];i[l]=i[u],i[u]=c}},e.prototype.invert=function(){return new vl(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(io);var T3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){T3(e,t);function e(r,n,i,a,o,s,l){var u=t.call(this,n,i)||this;if(u.dataWidth=a,u.dataHeight=o,u.left=s,u.top=l,r.BYTES_PER_ELEMENT===4){for(var c=n*i,d=new Uint8ClampedArray(c),h=0;h<c;h++){var p=r[h],v=p>>16&255,g=p>>7&510,w=p&255;d[h]=(v+g+w)/4&255}u.luminances=d}else u.luminances=r;if(a===void 0&&(u.dataWidth=n),o===void 0&&(u.dataHeight=i),s===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+i>u.dataHeight)throw new K("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new K("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return ye.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ye.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<n;s++){var l=s*r;ye.arraycopy(this.luminances,o,a,l,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new vl(this)},e})(io);var k3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R3=function(t){k3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(We),P3=function(){function t(){}return t.ISO_8859_1=We.ISO8859_1,t}(),Tc,D3=301,M3=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=D3);return{LOG:t,ALOG:e}};Tc=M3([],[]),Tc.LOG;Tc.ALOG;var v0;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(v0||(v0={}));var m0=129,jm=230,L3=231,B3=235,z3=236,F3=237,U3=238,j3=239,$3=240,nu=254,V3=254,g0="[)>05",y0="[)>06",x0="",de=0,nt=1,gt=2,$e=3,Ye=4,ct=5,H3=function(){function t(){}return t.prototype.getEncodingMode=function(){return de},t.prototype.encode=function(e){var r=ur.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=ur.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case ct:e.writeCodeword(L3),e.signalEncoderChange(ct);return;case nt:e.writeCodeword(jm),e.signalEncoderChange(nt);return;case $e:e.writeCodeword(U3),e.signalEncoderChange($e);break;case gt:e.writeCodeword(j3),e.signalEncoderChange(gt);break;case Ye:e.writeCodeword($3),e.signalEncoderChange(Ye);break;default:throw new Error("Illegal mode: "+i)}else ur.isExtendedASCII(n)?(e.writeCodeword(B3),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(ur.isDigit(e)&&ur.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),W3=function(){function t(){}return t.prototype.getEncodingMode=function(){return ct},t.prototype.encode=function(e){var r=new J;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var i=ur.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(de);break}}var a=r.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(a<=249)r.setCharAt(0,ne.getCharAt(a));else if(a<=1555)r.setCharAt(0,ne.getCharAt(Math.floor(a/250)+249)),r.insert(1,ne.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,i=e+n;return i<=255?i:i-256},t}(),Yd=function(){function t(){}return t.prototype.getEncodingMode=function(){return nt},t.prototype.encodeMaximal=function(e){for(var r=new J,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(i=e.pos,a=r.length())}if(a!==r.length()){var s=Math.floor(r.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var u=e.getSymbolInfo().getDataCapacity()-l,c=Math.floor(r.length()%3);(c===2&&u!==2||c===1&&(n>3||u!==1))&&(e.pos=i)}r.length()>0&&e.writeCodeword(jm),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new J;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,r),a=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var l=new J;for(r.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,r,l,i));r.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,r,l,i);break}var u=r.length();if(u%3===0){var c=ur.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode()){e.signalEncoderChange(de);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,i){var a=r.length(),o=r.toString().substring(0,a-i);r.setLengthToZero(),r.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),i=r.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(nu)}else if(o===1&&i===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(nu),e.pos--}else if(i===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(nu)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(de)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,i=r%256,a=new J;return a.append(n),a.append(i),a.toString()},t}(),G3=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ye},t.prototype.encode=function(e){for(var r=new J;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var i=r.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var a=r.toString().substring(4);r.setLengthToZero(),r.append(a);var o=ur.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(de);break}}}r.append(ne.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(r.toString()),l=!e.hasMoreCharacters(),u=l&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}u?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(de)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(ne.getCharAt(e-64)):ur.illegalCharacter(ne.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=r>=2?e.charAt(1).charCodeAt(0):0,a=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(a<<6)+o,l=s>>16&255,u=s>>8&255,c=s&255,d=new J;return d.append(l),r>=2&&d.append(u),r>=3&&d.append(c),d.toString()},t}(),q3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},le=function(){function t(e,r,n,i,a,o,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=l}return t.lookup=function(e,r,n,i,a){var o,s;r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var l=X3(Y3),u=l.next();!u.done;u=l.next()){var c=u.value;if(!(r===1&&c.rectangular)&&!(r===2&&!c.rectangular)&&!(n!=null&&(c.getSymbolWidth()<n.getWidth()||c.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(c.getSymbolWidth()>i.getWidth()||c.getSymbolHeight()>i.getHeight()))&&e<=c.dataCapacity)return c}}catch(d){o={error:d}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),K3=function(t){q3(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(le),Y3=[new le(!1,3,5,8,8,1),new le(!1,5,7,10,10,1),new le(!0,5,7,16,6,1),new le(!1,8,10,12,12,1),new le(!0,10,11,14,6,2),new le(!1,12,12,14,14,1),new le(!0,16,14,24,10,1),new le(!1,18,14,16,16,1),new le(!1,22,18,18,18,1),new le(!0,22,18,16,10,2),new le(!1,30,20,20,20,1),new le(!0,32,24,16,14,2),new le(!1,36,24,22,22,1),new le(!1,44,28,24,24,1),new le(!0,49,28,22,14,2),new le(!1,62,36,14,14,4),new le(!1,86,42,16,16,4),new le(!1,114,48,18,18,4),new le(!1,144,56,20,20,4),new le(!1,174,68,22,22,4),new le(!1,204,84,24,24,4,102,42),new le(!1,280,112,14,14,16,140,56),new le(!1,368,144,16,16,16,92,36),new le(!1,456,192,18,18,16,114,48),new le(!1,576,224,20,20,16,144,56),new le(!1,696,272,22,22,16,174,68),new le(!1,816,336,24,24,16,136,56),new le(!1,1050,408,18,18,36,175,68),new le(!1,1304,496,20,20,36,163,62),new K3],Z3=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new J,i=0,a=r.length;i<a;i++){var o=String.fromCharCode(r[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new J,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=le.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),Q3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J3=function(t){Q3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return $e},e.prototype.encode=function(r){for(var n=new J;r.hasMoreCharacters();){var i=r.getCurrentChar();r.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(r,n);var o=ur.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(de);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):ur.illegalCharacter(ne.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var i=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),a=n.length();r.pos-=a,(r.getRemainingCharacters()>1||i>1||r.getRemainingCharacters()!==i)&&r.writeCodeword(V3),r.getNewEncoding()<0&&r.signalEncoderChange(de)},e}(Yd),eS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tS=function(t){eS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return gt},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(r-128,n),i},e}(Yd),ur=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=m0+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,i,a){r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new Yd,s=[new H3,o,new tS,new J3,new G3,new W3],l=new Z3(e);l.setSymbolShape(r),l.setSizeConstraints(n,i),e.startsWith(g0)&&e.endsWith(x0)?(l.writeCodeword(z3),l.setSkipAtEnd(2),l.pos+=g0.length):e.startsWith(y0)&&e.endsWith(x0)&&(l.writeCodeword(F3),l.setSkipAtEnd(2),l.pos+=y0.length);var u=de;for(a&&(o.encodeMaximal(l),u=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[u].encode(l),l.getNewEncoding()>=0&&(u=l.getNewEncoding(),l.resetEncoderSignal());var c=l.getCodewordCount();l.updateSymbolInfo();var d=l.getSymbolInfo().getDataCapacity();c<d&&u!==de&&u!==ct&&u!==Ye&&l.writeCodeword("");var h=l.getCodewords();for(h.length()<d&&h.append(m0);h.length()<d;)h.append(this.randomize253State(h.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var i=this.lookAheadTestIntern(e,r,n);if(n===$e&&i===$e){for(var a=Math.min(r+3,e.length),o=r;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return de}else if(n===Ye&&i===Ye){for(var a=Math.min(r+4,e.length),o=r;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return de}return i},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var i;n===de?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(r+a===e.length){Ge.fill(o,0),Ge.fill(s,0);var l=this.findMinimums(i,s,te.MAX_VALUE,o),u=this.getMinimumCount(o);if(s[de]===l)return de;if(u===1){if(o[ct]>0)return ct;if(o[Ye]>0)return Ye;if(o[gt]>0)return gt;if(o[$e]>0)return $e}return nt}var c=e.charCodeAt(r+a);if(a++,this.isDigit(c)?i[de]+=.5:this.isExtendedASCII(c)?(i[de]=Math.ceil(i[de]),i[de]+=2):(i[de]=Math.ceil(i[de]),i[de]++),this.isNativeC40(c)?i[nt]+=2/3:this.isExtendedASCII(c)?i[nt]+=8/3:i[nt]+=4/3,this.isNativeText(c)?i[gt]+=2/3:this.isExtendedASCII(c)?i[gt]+=8/3:i[gt]+=4/3,this.isNativeX12(c)?i[$e]+=2/3:this.isExtendedASCII(c)?i[$e]+=13/3:i[$e]+=10/3,this.isNativeEDIFACT(c)?i[Ye]+=3/4:this.isExtendedASCII(c)?i[Ye]+=17/4:i[Ye]+=13/4,this.isSpecialB256(c)?i[ct]+=4:i[ct]++,a>=4){if(Ge.fill(o,0),Ge.fill(s,0),this.findMinimums(i,s,te.MAX_VALUE,o),s[de]<this.min(s[ct],s[nt],s[gt],s[$e],s[Ye]))return de;if(s[ct]<s[de]||s[ct]+1<this.min(s[nt],s[gt],s[$e],s[Ye]))return ct;if(s[Ye]+1<this.min(s[ct],s[nt],s[gt],s[$e],s[de]))return Ye;if(s[gt]+1<this.min(s[ct],s[nt],s[Ye],s[$e],s[de]))return gt;if(s[$e]+1<this.min(s[ct],s[nt],s[Ye],s[gt],s[de]))return $e;if(s[nt]+1<this.min(s[de],s[ct],s[Ye],s[gt])){if(s[nt]<s[$e])return nt;if(s[nt]===s[$e]){for(var d=r+a+1;d<e.length;){var h=e.charCodeAt(d);if(this.isX12TermSep(h))return $e;if(!this.isNativeX12(h))break;d++}return nt}}}}},t.min=function(e,r,n,i,a){var o=Math.min(e,Math.min(r,Math.min(n,i)));return a===void 0?o:Math.min(o,a)},t.findMinimums=function(e,r,n,i){for(var a=0;a<6;a++){var o=r[a]=Math.ceil(e[a]);n>o&&(n=o,Ge.fill(i,0)),n===o&&(i[a]=i[a]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,i=r;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-r},t.illegalCharacter=function(e){var r=te.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),iu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w0=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Xt.encode(e,this.charset)!=null}catch{return!1}},t}(),rS=function(){function t(e,r,n){var i,a,o,s,l,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(L){return new w0(R3.forName(L))}),this.encoders=[];var c=[];c.push(new w0(P3.ISO_8859_1));for(var d=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var p=!1;try{for(var v=(i=void 0,iu(c)),g=v.next();!g.done;g=v.next()){var w=g.value,m=e.charAt(h),y=m.charCodeAt(0);if(y===n||w.canEncode(m)){p=!0;break}}}catch(L){i={error:L}}finally{try{g&&!g.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}if(!p)try{for(var x=(o=void 0,iu(this.ENCODERS)),_=x.next();!_.done;_=x.next()){var w=_.value;if(w.canEncode(e.charAt(h))){c.push(w),p=!0;break}}}catch(L){o={error:L}}finally{try{_&&!_.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}p||(d=!0)}if(c.length===1&&!d)this.encoders=[c[0]];else{this.encoders=[];var b=0;try{for(var S=iu(c),C=S.next();!C.done;C=S.next()){var w=C.value;this.encoders[b++]=w}}catch(L){l={error:L}}finally{try{C&&!C.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}}var T=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){T=h;break}}this.priorityEncoderIndex=T}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Xt.encode(ne.getCharAt(e),this.encoders[r].name)},t}(),nS=3,iS=function(){function t(e,r,n){this.fnc1=n;var i=new rS(e,r,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,i,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new J,i=e;i<r;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,i,a,o){var s=e.charAt(i).charCodeAt(0),l=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(s===o||r.canEncode(s,r.getPriorityEncoderIndex()))&&(l=r.getPriorityEncoderIndex(),u=l+1);for(var c=l;c<u;c++)(s===o||r.canEncode(s,c))&&this.addEdge(n,i+1,new _0(s,r,c,a,o))},t.prototype.encodeMinimally=function(e,r,n){var i=e.length,a=new _0[i+1][r.length()];this.addEdges(e,r,a,0,null,n);for(var o=1;o<=i;o++){for(var s=0;s<r.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,r,a,o,a[o][s],n);for(var s=0;s<r.length();s++)a[o-1][s]=null}for(var l=-1,u=te.MAX_VALUE,s=0;s<r.length();s++)if(a[i][s]!=null){var c=a[i][s];c.cachedTotalSize<u&&(u=c.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var d=[],h=a[i][l];h!=null;){if(h.isFNC1())d.unshift(1e3);else for(var p=r.encode(h.c,h.encoderIndex),o=p.length-1;o>=0;o--)d.unshift(p[o]&255);var v=h.previous===null?0:h.previous.encoderIndex;v!==h.encoderIndex&&d.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var g=[],o=0;o<g.length;o++)g[o]=d[o];return g},t}(),_0=function(){function t(e,r,n,i,a){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(o+=nS),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),aS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var E0;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(E0||(E0={}));(function(t){aS(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(iS);var oS=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),b0=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),sS=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),lS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zd=function(t){lS(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+te.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(sS),uS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cS=function(t){uS(e,t);function e(r,n,i){var a=t.call(this,r,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Zd);function dS(t,e,r){return new cS(t,e,r)}function la(t,e,r){return new Zd(t,e,r)}var fS=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],un=0,Gs=1,Gt=2,$m=3,yr=4,hS=new Zd(null,0,0),au=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],pS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function vS(t){var e,r;try{for(var n=pS(t),i=n.next();!i.done;i=n.next()){var a=i.value;Ge.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[un][yr]=0,t[Gs][yr]=0,t[Gs][un]=28,t[$m][yr]=0,t[Gt][yr]=0,t[Gt][un]=15,t}var Vm=vS(Ge.createInt32Array(6,6)),mS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gS=function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=au[this.mode][e];i=la(i,a&65535,a>>16),n+=a>>16}var o=e===Gt?4:5;return i=la(i,r,o),new t(i,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===Gt?4:5;return n=la(n,Vm[this.mode][e],i),n=la(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===yr||this.mode===Gt){var a=au[n][un];r=la(r,a&65535,a>>16),i+=a>>16,n=un}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=dS(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(au[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Qe;try{for(var s=mS(i),l=s.next();!l.done;l=s.next()){var u=l.value;u.appendTo(o,e)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return ne.format("%s bits=%d bytes=%d",fS[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(hS,un,0,0),t}();function yS(t){var e=ne.getCharCode(" "),r=ne.getCharCode("."),n=ne.getCharCode(",");t[un][e]=1;for(var i=ne.getCharCode("Z"),a=ne.getCharCode("A"),o=a;o<=i;o++)t[un][o]=o-a+2;t[Gs][e]=1;for(var s=ne.getCharCode("z"),l=ne.getCharCode("a"),o=l;o<=s;o++)t[Gs][o]=o-l+2;t[Gt][e]=1;for(var u=ne.getCharCode("9"),c=ne.getCharCode("0"),o=c;o<=u;o++)t[Gt][o]=o-c+2;t[Gt][n]=12,t[Gt][r]=13;for(var d=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<d.length;h++)t[$m][ne.getCharCode(d[h])]=h;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<p.length;h++)ne.getCharCode(p[h])>0&&(t[yr][ne.getCharCode(p[h])]=h);return t}var ou=yS(Ge.createInt32Array(5,256)),zo=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xS=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=ne.getCharCode(" "),r=ne.getCharCode(`
`),n=b0.singletonList(gS.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ne.getCharCode("\r"):a=o===r?2:0;break;case ne.getCharCode("."):a=o===e?3:0;break;case ne.getCharCode(","):a=o===e?4:0;break;case ne.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(n=t.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var s=b0.min(n,function(l,u){return l.getBitCount()-u.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,a=[];try{for(var o=zo(e),s=o.next();!s.done;s=o.next()){var l=s.value;this.updateStateForChar(l,r,a)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,a=ou[e.getMode()][i]>0,o=null,s=0;s<=yr;s++){var l=ou[s][i];if(l>0){if(o==null&&(o=e.endBinaryShift(r)),!a||s===e.getMode()||s===Gt){var u=o.latchAndAppend(s,l);n.push(u)}if(!a&&Vm[e.getMode()][s]>=0){var c=o.shiftAndAppend(s,l);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||ou[e.getMode()][i]===0){var d=e.addBinaryShiftChar(r);n.push(d)}},t.updateStateListForPair=function(e,r,n){var i,a,o=[];try{for(var s=zo(e),l=s.next();!l.done;l=s.next()){var u=l.value;this.updateStateForPair(u,r,n,o)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,i){var a=e.endBinaryShift(r);if(i.push(a.latchAndAppend(yr,n)),e.getMode()!==yr&&i.push(a.shiftAndAppend(yr,n)),n===3||n===4){var o=a.latchAndAppend(Gt,16-n).latchAndAppend(Gt,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(s)}},t.simplifyStates=function(e){var r,n,i,a,o=[];try{for(var s=zo(e),l=s.next();!l.done;l=s.next()){var u=l.value,c=!0,d=function(w){if(w.isBetterThanOrEqualTo(u))return c=!1,"break";u.isBetterThanOrEqualTo(w)&&(o=o.filter(function(m){return m!==w}))};try{for(var h=(i=void 0,zo(o)),p=h.next();!p.done;p=h.next()){var v=p.value,g=d(v);if(g==="break")break}}catch(w){i={error:w}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}c&&o.push(u)}}catch(w){r={error:w}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t}(),wS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new xS(e).encode(),a=te.truncDivision(i.getSize()*r,100)+11,o=i.getSize()+a,s,l,u,c,d;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new K(ne.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(l,s),c=t.WORD_SIZE[l];var h=u-u%c;if(d=t.stuffBits(i,c),d.getSize()+a>h)throw new K("Data to large for user specified layer");if(s&&d.getSize()>c*64)throw new K("Data to large for user specified layer")}else{c=0,d=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new K("Data too large for an Aztec code");if(s=p<=3,l=s?p+1:p,u=t.totalBitsInLayer(l,s),!(o>u)){(d==null||c!==t.WORD_SIZE[l])&&(c=t.WORD_SIZE[l],d=t.stuffBits(i,c));var h=u-u%c;if(!(s&&d.getSize()>c*64)&&d.getSize()+a<=h)break}}}var v=t.generateCheckWords(d,u,c),g=d.getSize()/c,w=t.generateModeMessage(s,l,g),m=(s?11:14)+l*4,y=new Int32Array(m),x;if(s){x=m;for(var p=0;p<y.length;p++)y[p]=p}else{x=m+1+2*te.truncDivision(te.truncDivision(m,2)-1,15);for(var _=te.truncDivision(m,2),b=te.truncDivision(x,2),p=0;p<_;p++){var S=p+te.truncDivision(p,15);y[_-p-1]=b-S-1,y[_+p]=b+S+1}}for(var C=new _r(x),p=0,T=0;p<l;p++){for(var L=(l-p)*4+(s?9:12),I=0;I<L;I++)for(var R=I*2,B=0;B<2;B++)v.get(T+R+B)&&C.set(y[p*2+B],y[p*2+I]),v.get(T+L*2+R+B)&&C.set(y[p*2+I],y[m-1-p*2-B]),v.get(T+L*4+R+B)&&C.set(y[m-1-p*2-B],y[m-1-p*2-I]),v.get(T+L*6+R+B)&&C.set(y[m-1-p*2-I],y[p*2+B]);T+=L*8}if(t.drawModeMessage(C,s,x,w),s)t.drawBullsEye(C,te.truncDivision(x,2),5);else{t.drawBullsEye(C,te.truncDivision(x,2),7);for(var p=0,I=0;p<te.truncDivision(m,2)-1;p+=15,I+=16)for(var B=te.truncDivision(x,2)&1;B<x;B+=2)C.set(te.truncDivision(x,2)-I,B),C.set(te.truncDivision(x,2)+I,B),C.set(B,te.truncDivision(x,2)-I),C.set(B,te.truncDivision(x,2)+I)}var j=new oS;return j.setCompact(s),j.setSize(x),j.setLayers(l),j.setCodeWords(g),j.setMatrix(C),j},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var a=r-i;a<=r+i;a++)e.set(a,r-i),e.set(a,r+i),e.set(r-i,a),e.set(r+i,a);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new Qe;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var a=te.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+te.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},t.generateCheckWords=function(e,r,n){var i,a,o=e.getSize()/n,s=new Um(t.getGF(n)),l=te.truncDivision(r,n),u=t.bitsToWords(e,n,l);s.encode(u,l-o);var c=r%n,d=new Qe;d.appendBits(0,c);try{for(var h=wS(Array.from(u)),p=h.next();!p.done;p=h.next()){var v=p.value;d.appendBits(v,n)}}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return d},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),a,o;for(a=0,o=e.getSize()/r;a<o;a++){for(var s=0,l=0;l<r;l++)s|=e.get(a*r+l)?1<<r-l-1:0;i[a]=s}return i},t.getGF=function(e){switch(e){case 4:return At.AZTEC_PARAM;case 6:return At.AZTEC_DATA_6;case 8:return At.AZTEC_DATA_8;case 10:return At.AZTEC_DATA_10;case 12:return At.AZTEC_DATA_12;default:throw new K("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new Qe,i=e.getSize(),a=(1<<r)-2,o=0;o<i;o+=r){for(var s=0,l=0;l<r;l++)(o+l>=i||e.get(o+l))&&(s|=1<<r-1-l);(s&a)===a?(n.appendBits(s&a,r),o--):s&a?n.appendBits(s,r):(n.appendBits(s|1,r),o--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var _S=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ES=function(t){_S(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var i=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,i){for(var a=new Uint8ClampedArray(n*i),o=0,s=0,l=r.length;o<l;o+=4,s++){var u=void 0,c=r[o+3];if(c===0)u=255;else{var d=r[o],h=r[o+1],p=r[o+2];u=306*d+601*h+117*p+512>>10}a[s]=u}return a},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new K("Requested row is outside the image: "+r);var i=this.getWidth(),a=r*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return t.prototype.crop.call(this,r,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new vl(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var i=r*e.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),l=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);n.width=s,n.height=l;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(s/2,l/2),u.rotate(i),u.drawImage(this.canvas,a/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(io);function Hm(){return typeof navigator<"u"}function bS(){return Hm()&&!!navigator.mediaDevices}function SS(){return!!(bS()&&navigator.mediaDevices.enumerateDevices)}var yi=function(){return yi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},yi.apply(this,arguments)},Ae=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})},Ne=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},su=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CS={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},qi=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=yi(yi({},CS),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(pe.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return Ae(this,void 0,void 0,function(){return Ne(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,i=e.getVideoTracks();try{for(var a=su(i),o=a.next();!o.done;o=a.next()){var s=o.value;if(t.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new De("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new De("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new ES(e),n=new Im(r);return new Nm(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new De("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),i=n.width,a=n.height;return r.style.width=i+"px",r.style.height=a+"px",r.width=i,r.height=a,r},t.tryPlayVideo=function(e){return Ae(this,void 0,void 0,function(){var r;return Ne(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Ae(this,void 0,void 0,function(){var e,r,n,i,a,o,s,l,u,c,d,h;return Ne(this,function(p){switch(p.label){case 0:if(!Hm())throw new Error("Can't enumerate devices, navigator is not present.");if(!SS())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=su(e),i=n.next();!i.done;i=n.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,l=a.label||"Video device ".concat(r.length+1),u=a.groupId,c={deviceId:s,label:l,kind:o,groupId:u},r.push(c))}catch(v){d={error:v}}finally{try{i&&!i.done&&(h=n.return)&&h.call(n)}finally{if(d)throw d.error}}return[2,r]}})})},t.findDeviceById=function(e){return Ae(this,void 0,void 0,function(){var r;return Ne(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return Ae(this,void 0,void 0,function(){var n;return Ne(this,function(i){switch(i.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=i.sent(),n?[2,!0]:[2,new Promise(function(a,o){var s=setTimeout(function(){t.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",l))},r),l=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(s),e.removeEventListener("canplay",l),a(u)})};e.addEventListener("canplay",l)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),Ae(this,void 0,void 0,function(){var i;return Ne(this,function(a){switch(a.label){case 0:return i=t.prepareVideoElement(r),t.addVideoSource(i,e),[4,t.playVideoOnLoadAsync(i,n)];case 1:return a.sent(),[2,i]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var i=1e4,a=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",o),n())},i),o=function(){clearTimeout(a),e.removeEventListener("load",o),r()};e.addEventListener("load",o)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new De("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return Ae(this,void 0,void 0,function(){var r;return Ne(this,function(n){switch(n.label){case 0:if(!e)throw new De("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Ae(this,void 0,void 0,function(){var r;return Ne(this,function(n){switch(n.label){case 0:if(!e)throw new De("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Ae(this,void 0,void 0,function(){var i,a;return Ne(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(i,r,n)];case 3:return[2,o.sent()];case 4:throw a=o.sent(),t.disposeMediaStream(i),a;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return Ae(this,void 0,void 0,function(){var i,a,o,s,l,u,c,d,h,p=this;return Ne(this,function(v){switch(v.label){case 0:return t.checkCallbackFnOrThrow(n),i=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,i)];case 1:return a=v.sent(),o=function(){t.disposeMediaStream(e),t.cleanVideoSource(a)},s=this.scan(a,n,o),l=e.getVideoTracks(),u=yi(yi({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(g,w){return Ae(this,void 0,void 0,function(){var m,y,x,_,b,S,C;return Ne(this,function(T){switch(T.label){case 0:m=w?l.filter(w):l,T.label=1;case 1:T.trys.push([1,6,7,8]),y=su(m),x=y.next(),T.label=2;case 2:return x.done?[3,5]:(_=x.value,[4,_.applyConstraints(g)]);case 3:T.sent(),T.label=4;case 4:return x=y.next(),[3,2];case 5:return[3,8];case 6:return b=T.sent(),S={error:b},[3,8];case 7:try{x&&!x.done&&(C=y.return)&&C.call(y)}finally{if(S)throw S.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(g){return l.find(g).getConstraints()},streamVideoSettingsGet:function(g){return l.find(g).getSettings()},streamVideoCapabilitiesGet:function(g){return l.find(g).getCapabilities()}}),c=t.mediaStreamIsTorchCompatible(e),c&&(d=l==null?void 0:l.find(function(g){return t.mediaStreamIsTorchCompatibleTrack(g)}),h=function(g){return Ae(p,void 0,void 0,function(){return Ne(this,function(w){switch(w.label){case 0:return[4,t.mediaStreamSetTorch(d,g)];case 1:return w.sent(),[2]}})})},u.switchTorch=h,u.stop=function(){return Ae(p,void 0,void 0,function(){return Ne(this,function(g){switch(g.label){case 0:return s.stop(),[4,h(!1)];case 1:return g.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Ae(this,void 0,void 0,function(){var i,a;return Ne(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return Ae(this,void 0,void 0,function(){var n,i;return Ne(this,function(a){switch(a.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new De("A video element must be provided.");return n=t.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,i)];case 1:return a.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return Ae(this,void 0,void 0,function(){var n,i,a,o;return Ne(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new De("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,i=function(){t.cleanVideoSource(n)},a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),o=this.scan(n,r,i),[2,o]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Ae(this,void 0,void 0,function(){var n;return Ne(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Ae(this,void 0,void 0,function(){var n,i,a;return Ne(this,function(o){switch(o.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=o.sent(),[2,a];case 4:return n||t.cleanVideoSource(i),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Ae(this,void 0,void 0,function(){var n,i;return Ne(this,function(a){switch(a.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Ae(this,void 0,void 0,function(){var r,n;return Ne(this,function(i){switch(i.label){case 0:if(!e)throw new De("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return i.sent(),[4,this.scanOneResult(r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Ae(this,void 0,void 0,function(){var r,n;return Ne(this,function(i){switch(i.label){case 0:if(!e)throw new De("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,n];case 2:return[2,i.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,i){var a=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),i===void 0&&(i=!0),new Promise(function(o,s){a.scan(e,function(l,u,c){if(l){o(l),c.stop();return}if(u){if(u instanceof k&&r||u instanceof Ue&&n||u instanceof U&&i)return;c.stop(),s(u)}})})},t.prototype.scan=function(e,r,n){var i=this;t.checkCallbackFnOrThrow(r);var a=t.createCaptureCanvas(e),o;try{o=a.getContext("2d",{willReadFrequently:!0})}catch{o=a.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){o=void 0,a=void 0},l=!1,u,c=function(){l=!0,clearTimeout(u),s(),n&&n()},d={stop:c},h=function(){if(!l)try{t.drawImageOnCanvas(o,e);var p=i.decodeFromCanvas(a);r(p,void 0,d),u=setTimeout(h,i.options.delayBetweenScanSuccess)}catch(m){r(void 0,m,d);var v=m instanceof Ue,g=m instanceof U,w=m instanceof k;if(v||g||w){u=setTimeout(h,i.options.delayBetweenScanAttempts);return}s(),n&&n(m)}};return h(),d},t.prototype._decodeOnLoadImage=function(e){return Ae(this,void 0,void 0,function(){var r;return Ne(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Ae(this,void 0,void 0,function(){var r;return Ne(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),AS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){AS(e,t);function e(r,n){return t.call(this,new js,r,n)||this}return e})(qi);var NS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){NS(e,t);function e(r,n){return t.call(this,new mi(r),r,n)||this}return e})(qi);var IS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){IS(e,t);function e(r,n){return t.call(this,new Vs,r,n)||this}return e})(qi);var OS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lu=function(t){OS(e,t);function e(r,n){var i=this,a=new Fm;return a.setHints(r),i=t.call(this,a,r,n)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(pe.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(qi),TS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){TS(e,t);function e(r,n){return t.call(this,new Ws,r,n)||this}return e})(qi);var kS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){kS(e,t);function e(r,n){return t.call(this,new Hs,r,n)||this}return e})(qi);function yl({onScan:t,onClose:e}){const[r,n]=A.useState(null),[i,a]=A.useState(""),[o,s]=A.useState(!0),l=A.useRef(null),u=A.useRef(null),c=A.useRef(null);A.useEffect(()=>{c.current&&c.current.focus()},[]),A.useEffect(()=>{const p=new Map,v=[q.QR_CODE,q.CODE_128,q.EAN_13,q.EAN_8,q.UPC_A,q.UPC_E,q.CODE_39];p.set(pe.POSSIBLE_FORMATS,v),p.set(pe.TRY_HARDER,!0);const g=new lu(p,500);let w=!0;async function m(){var y;try{const x=await lu.listVideoInputDevices(),_=x.find(S=>S.label.toLowerCase().includes("back")||S.label.toLowerCase().includes("rear")),b=_?_.deviceId:((y=x[0])==null?void 0:y.deviceId)||void 0;w?u.current=await g.decodeFromVideoDevice(b,l.current,S=>{w&&S&&d(S.getText())}):n("No camera found")}catch(x){w&&(console.error("Camera error:",x),n(x.message||"Camera access denied"))}}return m(),()=>{w=!1,u.current&&u.current.stop()}},[]);function d(p){if(p){try{const v=window.AudioContext||window.webkitAudioContext;if(v){const g=new v,w=g.createOscillator(),m=g.createGain();w.connect(m),m.connect(g.destination),w.type="sine",w.frequency.setValueAtTime(1e3,g.currentTime),m.gain.setValueAtTime(.1,g.currentTime),w.start(),w.stop(g.currentTime+.1)}}catch(v){console.warn("Audio feedback failed",v)}navigator.vibrate&&navigator.vibrate(200),t(p)}}function h(p){p.preventDefault(),i.trim()&&d(i.trim())}return f.createElement("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-[100]"},f.createElement("div",{className:"bg-white dark:bg-[#1c1a16] rounded-2xl p-6 max-w-lg w-full border border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"flex items-center justify-between mb-4"},f.createElement("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white"},"Scan Barcode"),f.createElement("button",{onClick:e,className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors"},f.createElement("span",{className:"material-symbols-outlined text-zinc-600 dark:text-zinc-400"},"close"))),r&&f.createElement("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm"},r),f.createElement("div",{className:"relative aspect-video bg-zinc-900 rounded-lg overflow-hidden mb-4"},f.createElement("video",{ref:l,className:"w-full h-full object-cover",playsInline:!0,muted:!0}),o&&f.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},f.createElement("div",{className:"w-48 h-48 border-2 border-primary rounded-lg animate-pulse"}))),f.createElement("div",{className:"mb-4"},f.createElement("label",{className:"block w-full"},f.createElement("div",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white rounded-lg font-medium hover:bg-zinc-200 dark:hover:bg-zinc-700 cursor-pointer transition-colors"},f.createElement("span",{className:"material-symbols-outlined"},"upload_file"),f.createElement("span",null,"Upload Barcode Image")),f.createElement("input",{type:"file",accept:"image/*",className:"hidden",onChange:p=>{var g;const v=(g=p.target.files)==null?void 0:g[0];if(v){const w=new FileReader;w.onload=m=>{const y=new Image;y.onload=()=>{new lu().decodeFromImageElement(y).then(_=>{d(_.getText())}).catch(()=>{n("Could not read barcode from image")})},y.src=m.target.result},w.readAsDataURL(v)}}}))),f.createElement("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 text-center mb-4"},"Position the barcode within the frame or upload an image"),f.createElement("form",{onSubmit:h,className:"flex gap-2"},f.createElement("div",{className:"relative flex-1"},f.createElement("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500"},"keyboard"),f.createElement("input",{ref:c,type:"text",value:i,onChange:p=>a(p.target.value),placeholder:"Or type barcode...",className:"w-full pl-10 pr-4 py-3 bg-zinc-100 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-2 focus:ring-primary/50 outline-none"})),f.createElement("button",{type:"submit",disabled:!i.trim(),className:"px-6 font-bold bg-primary text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"},"Add"))))}function Xi({className:t,onClose:e,isOpen:r}){const n=Er(),i=hr();function a(){no(),i("/login")}const o=[{path:"/admin",icon:"dashboard",label:"Dashboard"},{path:"/products",icon:"inventory_2",label:"Product Management"},{path:"/transfer",icon:"sync_alt",label:"Transfers"},{path:"/return",icon:"keyboard_return",label:"Return Stock"},{path:"/reports",icon:"assessment",label:"Reports"}];return f.createElement(f.Fragment,null,r&&f.createElement("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:e}),f.createElement("aside",{className:`flex w-64 flex-col border-r border-zinc-200 dark:border-zinc-800 bg-white dark:bg-[#191714] p-4 fixed left-0 top-0 h-screen z-50 transition-transform duration-300 ${t||"hidden lg:flex"}`},f.createElement("div",{className:"flex items-center gap-2 mb-8"},f.createElement("img",{src:"/smart-florring-logo-main.png",alt:"Smart Floor",className:"w-8 h-8 object-contain"}),f.createElement("h1",{className:"text-lg font-bold text-zinc-900 dark:text-white"},"SMART FLOOR")),f.createElement("div",{className:"flex items-center gap-3 mb-8"},f.createElement("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 bg-primary/20 flex items-center justify-center text-primary font-bold"},"AU"),f.createElement("div",{className:"flex flex-col"},f.createElement("h1",{className:"text-zinc-900 dark:text-zinc-100 text-base font-medium leading-normal"},"Admin User"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-normal leading-normal"},"admin@smartfloor.co"))),f.createElement("nav",{className:"flex flex-col gap-2 flex-grow"},o.map(s=>{const l=n.pathname===s.path;return f.createElement(Mt,{key:s.path,to:s.path,className:`flex items-center gap-3 px-3 py-2 rounded-lg ${l?"bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary":"hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-800 dark:text-zinc-200"}`},f.createElement("span",{className:`material-symbols-outlined ${l?"fill":""}`},s.icon),f.createElement("p",{className:"text-sm font-medium leading-normal"},s.label))})),f.createElement("div",{className:"flex flex-col gap-1 mt-auto"},f.createElement(Mt,{to:"/profile",className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-800 dark:text-zinc-200"},f.createElement("span",{className:"material-symbols-outlined"},"settings"),f.createElement("p",{className:"text-sm font-medium leading-normal"},"Settings")),f.createElement("button",{onClick:a,className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-800 dark:text-zinc-200 text-left"},f.createElement("span",{className:"material-symbols-outlined"},"logout"),f.createElement("p",{className:"text-sm font-medium leading-normal"},"Logout")))))}function zr({onMenuClick:t,title:e}){return f.createElement("div",{className:"lg:hidden flex items-center justify-between p-4 bg-white dark:bg-[#191714] border-b border-zinc-200 dark:border-zinc-800 sticky top-0 z-40"},f.createElement("div",{className:"flex items-center gap-3"},f.createElement("button",{onClick:t,className:"p-2 -ml-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-900 dark:text-white"},f.createElement("span",{className:"material-symbols-outlined"},"menu")),f.createElement("h1",{className:"font-bold text-zinc-900 dark:text-white text-lg truncate"},e||"Smart Floor")),f.createElement("img",{src:"/smart-florring-logo-main.png",alt:"Smart Floor",className:"w-8 h-8 object-contain"}))}function RS(){const[t,e]=A.useState(!1),[r,n]=A.useState("overview"),[i,a]=A.useState([]),[o,s]=A.useState([]),[l,u]=A.useState({totalProducts:0,totalStock:0,stockValue:0,pendingReturns:0}),[c,d]=A.useState([]),[h,p]=A.useState([]),[v,g]=A.useState("today"),[w,m]=A.useState(""),[y,x]=A.useState(""),[_,b]=A.useState(""),[S,C]=A.useState(!1),[T,L]=A.useState(!0),[I,R]=A.useState(!1),[B,j]=A.useState(null),[X,M]=A.useState({name:"",category:"",size:"",stock_qty:"",selling_price:"",barcode:"",image_url:""}),[P,Z]=A.useState(""),[D,F]=A.useState(null),[H,ee]=A.useState("");A.useEffect(()=>{ve()},[]),A.useEffect(()=>{var O,Q;if(r==="overview"){const be=Sr();br((O=be==null?void 0:be.start)==null?void 0:O.toISOString(),(Q=be==null?void 0:be.end)==null?void 0:Q.toISOString())}},[r,v,w,y,c]);async function ve(){L(!0);try{const[O,Q,be,Rt]=await Promise.all([Bn(),pi(),ts(),Vd()]);a(O),s(Q),u(be),d(Rt)}catch(O){console.error("Failed to load data",O)}finally{L(!1)}}async function br(O,Q){if(!(v==="custom"&&(!O||!Q)))try{const Rt=(await bm(O,Q)).map(Jt=>{var Zi,tf;const Pe=c.find(Xm=>Xm.id===Jt.user_id),oo=(Pe==null?void 0:Pe.name)||((Zi=Pe==null?void 0:Pe.raw_user_meta_data)==null?void 0:Zi.name)||((tf=Pe==null?void 0:Pe.user_metadata)==null?void 0:tf.name);return{...Jt,user_name:oo||(Pe==null?void 0:Pe.email)||"User"}});p(Rt)}catch(be){console.error("Failed to load transactions",be)}}function Sr(){const O=new Date;O.setHours(0,0,0,0);const Q=new Date(O);switch(Q.setHours(23,59,59,999),v){case"today":return{start:O,end:Q};case"yesterday":const be=new Date(O);be.setDate(be.getDate()-1);const Rt=new Date(be);return Rt.setHours(23,59,59,999),{start:be,end:Rt};case"last7days":const Jt=new Date(O);return Jt.setDate(Jt.getDate()-7),{start:Jt,end:Q};case"last30days":const Pe=new Date(O);return Pe.setDate(Pe.getDate()-30),{start:Pe,end:Q};case"custom":if(w&&y){const oo=new Date(w);oo.setHours(0,0,0,0);const Zi=new Date(y);return Zi.setHours(23,59,59,999),{start:oo,end:Zi}}return null;default:return null}}const Zt=h.filter(O=>{var Q,be,Rt,Jt;if(_.trim()){const Pe=_.toLowerCase();return((Q=O.user_name)==null?void 0:Q.toLowerCase().includes(Pe))||((be=O.product_name)==null?void 0:be.toLowerCase().includes(Pe))||((Rt=O.product_barcode)==null?void 0:Rt.toLowerCase().includes(Pe))||((Jt=O.customer_name)==null?void 0:Jt.toLowerCase().includes(Pe))}return!0}),Qt={totalUsed:Zt.filter(O=>O.type==="TRANSFER").reduce((O,Q)=>O+Q.quantity,0),totalReturned:Zt.filter(O=>O.type==="RETURN").reduce((O,Q)=>O+Q.quantity,0),uniqueUsers:new Set(Zt.map(O=>O.user_id)).size};function Gn(O){C(!1),I?M(Q=>({...Q,barcode:O})):alert(`Scanned: ${O}`)}async function Gm(O){var Q,be;if(O.preventDefault(),L(!0),!((Q=X.name)!=null&&Q.trim())||!X.category||!((be=X.barcode)!=null&&be.trim())){alert("Please fill in all required fields (Name, Category, Barcode)"),L(!1);return}try{B?await jd(B.id||B.barcode,X):await Ud(X),M({name:"",category:"",size:"",stock_qty:"",selling_price:"",barcode:"",image_url:""}),j(null),R(!1);const Rt=await Bn();a(Rt);const Jt=await ts();u(Jt)}catch(Rt){console.error("Failed to save product",Rt),alert("Failed to save product. Please try again.")}finally{L(!1)}}function Qd(O){j(O),M({name:O.name||"",category:O.category||"",size:O.size||"",stock_qty:O.stock_qty||"",selling_price:O.selling_price||"",barcode:O.barcode||"",image_url:O.image_url||""}),R(!0)}async function Jd(O){if(confirm("Are you sure you want to delete this product?")){L(!0);try{await $d(O);const Q=await Bn();a(Q);const be=await ts();u(be)}catch(Q){console.error("Failed to delete product",Q)}finally{L(!1)}}}async function qm(O){if(O.preventDefault(),!!P.trim()){L(!0);try{await wm(P),Z("");const Q=await pi();s(Q)}catch(Q){console.error("Failed to create category",Q),alert("Failed to create category")}finally{L(!1)}}}async function Yi(O){if(O.preventDefault(),!(!D||!P.trim())){L(!0);try{await _m(D.id,P),Z(""),F(null);const Q=await pi();s(Q)}catch(Q){console.error("Failed to update category",Q)}finally{L(!1)}}}async function ef(O){if(confirm("Delete this category?")){L(!0);try{await Em(O);const Q=await pi();s(Q)}catch(Q){console.error("Failed to delete category",Q)}finally{L(!1)}}}return f.createElement("div",{className:"flex min-h-screen bg-zinc-50 dark:bg-[#1c1a16]"},S&&f.createElement(yl,{onScan:Gn,onClose:()=>C(!1)}),f.createElement(Xi,{className:`${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>e(!1),isOpen:t}),f.createElement("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64"},f.createElement(zr,{onMenuClick:()=>e(!0),title:"Admin Dashboard"}),f.createElement("main",{className:"flex-1 p-4 lg:p-8 pb-24"},f.createElement("div",{className:"flex gap-4 border-b border-zinc-200 dark:border-zinc-800 mb-6 overflow-x-auto"},f.createElement("button",{onClick:()=>n("overview"),className:`pb-2 px-1 whitespace-nowrap ${r==="overview"?"border-b-2 border-primary font-bold text-zinc-900 dark:text-white":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`},"Overview"),f.createElement("button",{onClick:()=>n("products"),className:`pb-2 px-1 whitespace-nowrap ${r==="products"?"border-b-2 border-primary font-bold text-zinc-900 dark:text-white":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`},"Products"),f.createElement("button",{onClick:()=>n("categories"),className:`pb-2 px-1 whitespace-nowrap ${r==="categories"?"border-b-2 border-primary font-bold text-zinc-900 dark:text-white":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`},"Categories")),r==="overview"&&f.createElement("div",{className:"space-y-8"},f.createElement("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},f.createElement("div",{className:"bg-white dark:bg-[#191714] p-6 rounded-xl border border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"text-sm text-zinc-500"},"Total Products"),f.createElement("div",{className:"text-3xl font-bold text-zinc-900 dark:text-white"},l.totalProducts.toLocaleString()),f.createElement("p",{className:"text-green-600 text-sm font-medium leading-normal"},"+5.2%")),f.createElement("div",{className:"bg-white dark:bg-[#191714] p-6 rounded-xl border border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"text-sm text-zinc-500"},"Total Stock"),f.createElement("div",{className:"text-3xl font-bold text-zinc-900 dark:text-white"},l.totalStock.toLocaleString()),f.createElement("p",{className:"text-green-600 text-sm font-medium leading-normal"},"+1.8%")),f.createElement("div",{className:"bg-white dark:bg-[#191714] p-6 rounded-xl border border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"text-sm text-zinc-500"},"Stock Value"),f.createElement("div",{className:"text-3xl font-bold text-zinc-900 dark:text-white"},"$",l.stockValue.toLocaleString()),f.createElement("p",{className:"text-green-600 text-sm font-medium leading-normal"},"+3.1%")),f.createElement("div",{className:"bg-white dark:bg-[#191714] p-6 rounded-xl border-2 border-primary"},f.createElement("div",{className:"text-sm text-zinc-500"},"Pending Returns"),f.createElement("div",{className:"text-3xl font-bold text-zinc-900 dark:text-white"},l.pendingReturns),f.createElement("p",{className:"text-red-600 text-sm font-medium leading-normal"},"-0.5%"))),f.createElement("div",null,f.createElement("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-4"},"Daily Activities & Transactions"),f.createElement("div",{className:"bg-white dark:bg-[#191714] p-4 rounded-xl border border-zinc-200 dark:border-zinc-800 flex flex-col md:flex-row gap-4 justify-between items-center mb-6"},f.createElement("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto"},f.createElement("select",{value:v,onChange:O=>g(O.target.value),className:"px-4 py-2 bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"},f.createElement("option",{value:"today"},"Today"),f.createElement("option",{value:"yesterday"},"Yesterday"),f.createElement("option",{value:"last7days"},"Last 7 Days"),f.createElement("option",{value:"last30days"},"Last 30 Days"),f.createElement("option",{value:"all"},"All Time"),f.createElement("option",{value:"custom"},"Custom Range")),v==="custom"&&f.createElement("div",{className:"flex gap-2"},f.createElement("input",{type:"date",value:w,onChange:O=>m(O.target.value),className:"input-field py-2"}),f.createElement("input",{type:"date",value:y,onChange:O=>x(O.target.value),className:"input-field py-2"}))),f.createElement("div",{className:"relative w-full md:w-64"},f.createElement("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400"},"search"),f.createElement("input",{type:"text",placeholder:"Search users or products...",value:_,onChange:O=>b(O.target.value),className:"w-full pl-10 pr-4 py-2 bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"}))),f.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6"},f.createElement("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 p-4 rounded-xl border border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"text-sm text-zinc-500"},"Stock Used (Selected Period)"),f.createElement("div",{className:"text-2xl font-bold text-zinc-900 dark:text-white"},Qt.totalUsed)),f.createElement("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 p-4 rounded-xl border border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"text-sm text-zinc-500"},"Stock Returned (Selected Period)"),f.createElement("div",{className:"text-2xl font-bold text-green-600"},Qt.totalReturned)),f.createElement("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 p-4 rounded-xl border border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"text-sm text-zinc-500"},"Active Users"),f.createElement("div",{className:"text-2xl font-bold text-blue-600"},Qt.uniqueUsers))),f.createElement("div",{className:"md:hidden space-y-4"},Zt.length===0?f.createElement("div",{className:"text-center py-12 text-zinc-500"},"No activity found"):Zt.map(O=>f.createElement("div",{key:O.id,className:"bg-white dark:bg-[#191714] p-4 rounded-xl border border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"flex justify-between items-start mb-2"},f.createElement("div",null,f.createElement("div",{className:"font-bold text-zinc-900 dark:text-white"},O.product_name||"Unknown Product"),f.createElement("div",{className:"text-xs text-zinc-500"},O.product_barcode)),f.createElement("span",{className:`px-2 py-1 rounded text-xs font-bold ${O.type==="RETURN"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":O.type==="RECEIVE"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:text-zinc-300"}`},O.type==="TRANSFER"?"USED":O.type)),f.createElement("div",{className:"flex justify-between items-end mt-3"},f.createElement("div",{className:"text-sm"},f.createElement("div",{className:"text-zinc-900 dark:text-white font-medium"},O.user_name),f.createElement("div",{className:"text-xs text-zinc-500"},new Date(O.created_at).toLocaleString())),f.createElement("div",{className:"text-right"},f.createElement("div",{className:"font-bold text-lg text-zinc-900 dark:text-white"},O.quantity),O.customer_name&&f.createElement("div",{className:"text-xs text-zinc-500"},O.customer_name)))))),f.createElement("div",{className:"hidden md:block bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden"},f.createElement("div",{className:"overflow-x-auto"},f.createElement("table",{className:"w-full text-sm text-left"},f.createElement("thead",{className:"bg-zinc-50 dark:bg-zinc-900/50 text-zinc-500 dark:text-zinc-400 uppercase text-xs"},f.createElement("tr",null,f.createElement("th",{className:"px-6 py-3 whitespace-nowrap"},"Time"),f.createElement("th",{className:"px-6 py-3 whitespace-nowrap"},"User"),f.createElement("th",{className:"px-6 py-3 whitespace-nowrap"},"Action"),f.createElement("th",{className:"px-6 py-3 whitespace-nowrap"},"Product"),f.createElement("th",{className:"px-6 py-3 whitespace-nowrap text-center"},"Qty"),f.createElement("th",{className:"px-6 py-3 whitespace-nowrap"},"Details"))),f.createElement("tbody",{className:"divide-y divide-zinc-100 dark:divide-zinc-800/50"},Zt.length===0?f.createElement("tr",null,f.createElement("td",{colSpan:"6",className:"px-6 py-12 text-center text-zinc-500"},"No activity found in this period")):Zt.map(O=>f.createElement("tr",{key:O.id,className:"hover:bg-zinc-50 dark:hover:bg-zinc-800/30 transition-colors"},f.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-zinc-500 dark:text-zinc-400"},new Date(O.created_at).toLocaleString()),f.createElement("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-zinc-900 dark:text-white"},O.user_name),f.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},f.createElement("span",{className:`px-2 py-1 rounded text-xs font-bold ${O.type==="RETURN"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":O.type==="RECEIVE"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:text-zinc-300"}`},O.type==="TRANSFER"?"USED / SENT":O.type)),f.createElement("td",{className:"px-6 py-4 text-zinc-900 dark:text-white"},f.createElement("div",null,O.product_name),f.createElement("div",{className:"text-xs text-zinc-500"},O.product_barcode)),f.createElement("td",{className:"px-6 py-4 text-center font-bold text-zinc-900 dark:text-white"},O.quantity),f.createElement("td",{className:"px-6 py-4 text-zinc-500 dark:text-zinc-400 text-xs"},O.customer_name||"-"))))))))),r==="categories"&&f.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},f.createElement("div",{className:"bg-white dark:bg-[#191714] p-8 rounded-2xl border border-zinc-200 dark:border-zinc-800 h-fit shadow-sm relative overflow-hidden group"},f.createElement("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity"},f.createElement("span",{className:"material-symbols-outlined text-9xl text-primary transform rotate-12"},"category")),f.createElement("div",{className:"relative z-10"},f.createElement("div",{className:"space-y-4"},f.createElement("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-4 text-primary"},f.createElement("span",{className:"material-symbols-outlined text-2xl"},"add_circle")),f.createElement("div",null,f.createElement("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2"},"Create New Category"),f.createElement("p",{className:"text-sm text-zinc-500 dark:text-zinc-400"},"Organize your inventory by adding new product categories.")),f.createElement("form",{onSubmit:qm,className:"space-y-4 mt-6"},f.createElement("div",null,f.createElement("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase mb-2 tracking-wider"},"Category Name"),f.createElement("input",{type:"text",placeholder:"e.g. Marble Tiles",value:P,onChange:O=>Z(O.target.value),className:"w-full px-4 py-3 bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-700 rounded-xl outline-none focus:ring-2 focus:ring-primary/20 dark:text-white transition-all focus:border-primary"})),f.createElement("button",{type:"submit",disabled:!P.trim(),className:"w-full py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold hover:bg-zinc-800 dark:hover:bg-zinc-100 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed text-sm"},f.createElement("span",{className:"material-symbols-outlined text-lg"},"add"),"Create Category"))))),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden shadow-sm"},f.createElement("div",{className:"p-4 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50"},f.createElement("h3",{className:"font-bold text-zinc-900 dark:text-white"},"Existing Categories")),o.length===0&&f.createElement("div",{className:"p-8 text-center text-zinc-500 dark:text-zinc-400"},f.createElement("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50"},"toc"),f.createElement("p",null,"No categories found. Create your first one above!")),f.createElement("div",{className:"md:hidden divide-y divide-zinc-100 dark:divide-zinc-800"},o.map(O=>f.createElement("div",{key:O.id,className:"p-4 flex items-center justify-between"},(D==null?void 0:D.id)===O.id?f.createElement("div",{className:"flex-1 flex gap-2"},f.createElement("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-white dark:bg-zinc-900 border border-primary rounded-lg outline-none text-sm",value:D.name,onChange:Q=>F({...D,name:Q.target.value}),onBlur:()=>Yi(O.id,D.name)}),f.createElement("button",{onClick:()=>Yi(O.id,D.name),className:"p-2 text-green-600"},f.createElement("span",{className:"material-symbols-outlined"},"check"))):f.createElement(f.Fragment,null,f.createElement("div",{className:"flex items-center gap-3"},f.createElement("div",{className:"w-8 h-8 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-400"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"category")),f.createElement("span",{className:"font-medium text-zinc-900 dark:text-white"},O.name)),f.createElement("div",{className:"flex gap-1"},f.createElement("button",{onClick:()=>F(O),className:"p-2 text-zinc-400 hover:text-blue-500"},f.createElement("span",{className:"material-symbols-outlined"},"edit")),f.createElement("button",{onClick:()=>ef(O.id),className:"p-2 text-zinc-400 hover:text-red-500"},f.createElement("span",{className:"material-symbols-outlined"},"delete"))))))),f.createElement("div",{className:"hidden md:block overflow-x-auto"},f.createElement("table",{className:"w-full text-sm text-left"},f.createElement("thead",{className:"bg-zinc-50 dark:bg-zinc-900/50 text-zinc-500 dark:text-zinc-400 uppercase text-xs font-semibold"},f.createElement("tr",null,f.createElement("th",{className:"px-6 py-4"},"Category Name"),f.createElement("th",{className:"px-6 py-4 text-right w-40"},"Actions"))),f.createElement("tbody",{className:"divide-y divide-zinc-100 dark:divide-zinc-800/50"},o.map(O=>f.createElement("tr",{key:O.id,className:"hover:bg-zinc-50/50 dark:hover:bg-zinc-800/20 transition-colors"},f.createElement("td",{className:"px-6 py-4 font-medium text-zinc-900 dark:text-white"},(D==null?void 0:D.id)===O.id?f.createElement("div",{className:"flex items-center gap-2"},f.createElement("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-white dark:bg-zinc-900 border border-primary rounded-lg outline-none text-sm shadow-sm",value:D.name,onChange:Q=>F({...D,name:Q.target.value}),onBlur:()=>Yi(O.id,D.name),onKeyDown:Q=>Q.key==="Enter"&&Yi(O.id,D.name)}),f.createElement("span",{className:"text-xs text-zinc-400 whitespace-nowrap hidden sm:inline"},"Press Enter to save")):f.createElement("div",{className:"flex items-center gap-3"},f.createElement("div",{className:"w-8 h-8 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-400"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"category")),f.createElement("span",null,O.name))),f.createElement("td",{className:"px-6 py-4 text-right"},f.createElement("div",{className:"flex justify-end gap-2"},(D==null?void 0:D.id)===O.id?f.createElement("button",{onClick:()=>Yi(O.id,D.name),className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Save"},f.createElement("span",{className:"material-symbols-outlined text-lg"},"check")):f.createElement(f.Fragment,null,f.createElement("button",{onClick:()=>F(O),className:"p-2 text-zinc-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors group",title:"Edit"},f.createElement("span",{className:"material-symbols-outlined text-lg group-hover:scale-110 transition-transform"},"edit")),f.createElement("button",{onClick:()=>ef(O.id),className:"p-2 text-zinc-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors group",title:"Delete"},f.createElement("span",{className:"material-symbols-outlined text-lg group-hover:scale-110 transition-transform"},"delete")))))))))))),r==="products"&&f.createElement("div",null,f.createElement("div",{className:"flex flex-col md:flex-row justify-between mb-4 gap-4"},f.createElement("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white"},"Product Management"),f.createElement("div",{className:"flex flex-col md:flex-row gap-2"},f.createElement("select",{className:"px-4 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg outline-none text-sm text-zinc-900 dark:text-white",value:H,onChange:O=>ee(O.target.value)},f.createElement("option",{value:""},"All Categories"),o.map(O=>f.createElement("option",{key:O.id,value:O.name},O.name))),f.createElement("button",{onClick:()=>{j(null),M({name:"",category:"",size:"",stock_qty:"",selling_price:"",barcode:"",image_url:""}),R(!I)},className:"w-full md:w-auto px-4 py-2 bg-primary text-white rounded-lg font-medium hover:bg-primary/90"},I?"Cancel":"Add Product"))),I&&f.createElement("div",{className:"bg-white dark:bg-[#191714] p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 mb-6 animate-in slide-in-from-top-4"},f.createElement("h3",{className:"font-bold mb-4 dark:text-white"},B?"Edit Product":"New Product"),f.createElement("form",{onSubmit:Gm,className:"grid grid-cols-1 md:grid-cols-2 gap-4"},f.createElement("input",{className:"input-field",placeholder:"Product Name",required:!0,value:X.name,onChange:O=>M({...X,name:O.target.value})}),f.createElement("select",{className:"input-field",required:!0,value:X.category,onChange:O=>M({...X,category:O.target.value})},f.createElement("option",{value:""},"Select Category"),o.map(O=>f.createElement("option",{key:O.id,value:O.name},O.name))),f.createElement("input",{className:"input-field",placeholder:"Size",value:X.size,onChange:O=>M({...X,size:O.target.value})}),f.createElement("input",{className:"input-field",type:"number",placeholder:"Stock Qty",required:!0,value:X.stock_qty,onChange:O=>M({...X,stock_qty:O.target.value})}),f.createElement("input",{className:"input-field",type:"number",placeholder:"Price",required:!0,value:X.selling_price,onChange:O=>M({...X,selling_price:O.target.value})}),f.createElement("div",{className:"flex gap-2"},f.createElement("input",{className:"input-field flex-1",placeholder:"Barcode",required:!0,value:X.barcode,onChange:O=>M({...X,barcode:O.target.value})}),f.createElement("button",{type:"button",onClick:()=>C(!0),className:"px-3 bg-zinc-200 dark:bg-zinc-700 rounded-lg"},f.createElement("span",{className:"material-symbols-outlined"},"qr_code_scanner"))),f.createElement("div",{className:"md:col-span-2"})," ",f.createElement("button",{type:"submit",className:"md:col-span-2 py-3 bg-primary text-white rounded-lg font-bold hover:bg-primary/90"},"Save Product"))),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden"},f.createElement("div",{className:"md:hidden space-y-2 p-2 divide-y divide-zinc-100 dark:divide-zinc-800"},i.filter(O=>!H||O.category===H).map(O=>f.createElement("div",{key:O.id,className:"p-4 bg-zinc-50 dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 mb-2"},f.createElement("div",{className:"flex justify-between items-start mb-2"},f.createElement("div",null,f.createElement("div",{className:"font-bold text-zinc-900 dark:text-white"},O.name),f.createElement("div",{className:"text-xs text-zinc-500"},O.barcode),f.createElement("div",{className:"text-xs text-zinc-400 mt-1"},O.category)),f.createElement("div",{className:"text-right"},f.createElement("div",{className:"text-sm font-bold"},O.stock_qty||O.stock," left"))),f.createElement("div",{className:"flex justify-end gap-2 mt-4 pt-2 border-t border-zinc-200 dark:border-zinc-700"},f.createElement("button",{onClick:()=>Qd(O),className:"flex items-center gap-1 text-sm text-blue-600"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"edit")," Edit"),f.createElement("button",{onClick:()=>Jd(O.id),className:"flex items-center gap-1 text-sm text-red-600"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"delete")," Delete"))))),f.createElement("div",{className:"hidden md:block overflow-x-auto"},f.createElement("table",{className:"w-full text-sm text-left"},f.createElement("thead",{className:"bg-zinc-50 dark:bg-zinc-900/50 text-zinc-500 dark:text-zinc-400 uppercase text-xs"},f.createElement("tr",null,f.createElement("th",{className:"px-6 py-3 min-w-[200px]"},"Product"),f.createElement("th",{className:"px-6 py-3 whitespace-nowrap"},"Category"),f.createElement("th",{className:"px-6 py-3 whitespace-nowrap"},"Stock"),f.createElement("th",{className:"px-6 py-3 text-right whitespace-nowrap"},"Actions"))),f.createElement("tbody",null,i.filter(O=>!H||O.category===H).map(O=>f.createElement("tr",{key:O.id,className:"border-b border-zinc-100 dark:border-zinc-800/50 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 transition-colors"},f.createElement("td",{className:"px-6 py-4 font-medium text-zinc-900 dark:text-white"},O.name," ",f.createElement("br",null)," ",f.createElement("span",{className:"text-zinc-500 font-normal text-xs"},O.barcode)),f.createElement("td",{className:"px-6 py-4 dark:text-zinc-300 whitespace-nowrap"},O.category),f.createElement("td",{className:"px-6 py-4 dark:text-zinc-300 whitespace-nowrap"},O.stock_qty||O.stock),f.createElement("td",{className:"px-6 py-4 text-right gap-2 whitespace-nowrap"},f.createElement("button",{onClick:()=>Qd(O),className:"text-blue-600 hover:text-blue-500 mr-3"},"Edit"),f.createElement("button",{onClick:()=>Jd(O.id),className:"text-red-600 hover:text-red-500"},"Delete"))))))))))),f.createElement("style",null,`
        .input-field {
          width: 100%;
          padding: 0.75rem 1rem;
          background-color: var(--bg-zinc-50);
          border: 1px solid var(--border-zinc-200);
          border-radius: 0.5rem;
          outline: none;
        }
        .dark .input-field {
           background-color: #27272a;
           border-color: #3f3f46;
           color: white;
        }
      `))}function PS(){try{const t=localStorage.getItem("tsm_user");return t?JSON.parse(t):null}catch{return null}}function Ki({className:t,onClose:e,isOpen:r}){var l;const n=Er(),i=hr(),a=PS(),o=u=>n.pathname===u;function s(){no(),i("/login")}return f.createElement(f.Fragment,null,r&&f.createElement("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:e}),f.createElement("aside",{className:`flex w-64 flex-col border-r border-zinc-200 dark:border-zinc-800 bg-white dark:bg-[#191714] p-4 fixed left-0 top-0 h-screen z-50 transition-transform duration-300 ${t||"hidden lg:flex"}`},f.createElement("div",{className:"flex items-center gap-2 mb-8"},f.createElement("img",{src:"/smart-florring-logo-main.png",alt:"Smart Floor",className:"w-8 h-8 object-contain"}),f.createElement("h1",{className:"text-lg font-bold text-zinc-900 dark:text-white"},"SMART FLOOR")),f.createElement("div",{className:"flex items-center gap-3 mb-8 pb-8 border-b border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold"},((l=a==null?void 0:a.name)==null?void 0:l.charAt(0))||"U"),f.createElement("div",null,f.createElement("div",{className:"text-sm font-medium text-zinc-900 dark:text-white"},(a==null?void 0:a.name)||"User"),f.createElement("div",{className:"text-xs text-zinc-500 dark:text-zinc-400"},(a==null?void 0:a.role)||"Sales Staff"))),f.createElement("nav",{className:"flex flex-col gap-2 flex-grow"},f.createElement(Mt,{to:"/user",className:`flex items-center gap-3 px-3 py-2 rounded-lg ${o("/user")?"bg-primary/10 text-primary dark:bg-primary/20":"hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-800 dark:text-zinc-200"}`},f.createElement("span",{className:"material-symbols-outlined"},"dashboard"),f.createElement("span",{className:"text-sm font-medium"},"Dashboard")),f.createElement(Mt,{to:"/catalog",className:`flex items-center gap-3 px-3 py-2 rounded-lg ${o("/catalog")?"bg-primary/10 text-primary dark:bg-primary/20":"hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-800 dark:text-zinc-200"}`},f.createElement("span",{className:"material-symbols-outlined"},"inventory_2"),f.createElement("span",{className:"text-sm font-medium"},"Product Catalog")),f.createElement(Mt,{to:"/transfer",className:`flex items-center gap-3 px-3 py-2 rounded-lg ${o("/transfer")?"bg-primary/10 text-primary dark:bg-primary/20":"hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-800 dark:text-zinc-200"}`},f.createElement("span",{className:"material-symbols-outlined"},"sync_alt"),f.createElement("span",{className:"text-sm font-medium"},"Job / Sales")),f.createElement(Mt,{to:"/return",className:`flex items-center gap-3 px-3 py-2 rounded-lg ${o("/return")?"bg-primary/10 text-primary dark:bg-primary/20":"hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-800 dark:text-zinc-200"}`},f.createElement("span",{className:"material-symbols-outlined"},"keyboard_return"),f.createElement("span",{className:"text-sm font-medium"},"Returns")),f.createElement(Mt,{to:"/transactions",className:`flex items-center gap-3 px-3 py-2 rounded-lg ${o("/transactions")?"bg-primary/10 text-primary dark:bg-primary/20":"hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-800 dark:text-zinc-200"}`},f.createElement("span",{className:"material-symbols-outlined"},"history"),f.createElement("span",{className:"text-sm font-medium"},"Transaction History"))),f.createElement("div",{className:"flex flex-col gap-1 mt-auto"},f.createElement(Mt,{to:"/profile",className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-800 dark:text-zinc-200"},f.createElement("span",{className:"material-symbols-outlined"},"settings"),f.createElement("span",{className:"text-sm font-medium"},"Settings")),f.createElement("button",{onClick:s,className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-800 dark:text-zinc-200"},f.createElement("span",{className:"material-symbols-outlined"},"logout"),f.createElement("span",{className:"text-sm font-medium"},"Log Out")))))}function DS(){try{const t=localStorage.getItem("tsm_user");return t?JSON.parse(t):null}catch{return null}}function MS(){var I;const t=hr(),e=DS(),[r,n]=A.useState(!1),[i,a]=A.useState(""),[o,s]=A.useState("today"),[l,u]=A.useState(""),[c,d]=A.useState(""),[h,p]=A.useState([]),[v,g]=A.useState([]),[w,m]=A.useState({productsTaken:0,currentStockHolding:0}),[y,x]=A.useState(!0);A.useEffect(()=>{_()},[]),A.useEffect(()=>{const{start:R,end:B}=S();b(R,B)},[o,l,c]),A.useEffect(()=>{let R=h;if(i.trim()){const B=i.toLowerCase();R=h.filter(j=>{var X,M;return((X=j.product_name)==null?void 0:X.toLowerCase().includes(B))||((M=j.product_barcode)==null?void 0:M.toLowerCase().includes(B))})}g(R)},[i,h]);async function _(){try{const R=await Sm();m({productsTaken:R.productsTaken,currentStockHolding:R.currentStockHolding})}catch(R){console.error("Failed to load stats:",R)}}async function b(R,B){if(!(o==="custom"&&(!R||!B)))try{x(!0);const j=R?R.toISOString():null,X=B?B.toISOString():null,M=await Hd(j,X);p(M),g(M)}catch(j){console.error("Failed to load transactions:",j)}finally{x(!1)}}function S(){const R=new Date;R.setHours(0,0,0,0);const B=new Date(R);switch(B.setHours(23,59,59,999),o){case"today":return{start:R,end:B};case"yesterday":const j=new Date(R);j.setDate(j.getDate()-1);const X=new Date(j);return X.setHours(23,59,59,999),{start:j,end:X};case"last7days":const M=new Date(R);return M.setDate(M.getDate()-7),{start:M,end:B};case"last30days":const P=new Date(R);return P.setDate(P.getDate()-30),{start:P,end:B};case"custom":if(l&&c){const Z=new Date(l);Z.setHours(0,0,0,0);const D=new Date(c);return D.setHours(23,59,59,999),{start:Z,end:D}}return{start:null,end:null};case"all":default:return{start:null,end:null}}}const T=v.filter(R=>{var B,j;return R.type!=="TRANSFER"?!1:i.trim()?((B=R.product_name)==null?void 0:B.toLowerCase().includes(i.toLowerCase()))||((j=R.product_barcode)==null?void 0:j.toLowerCase().includes(i.toLowerCase())):!0}).reduce((R,B)=>{const j=B.product_id;return R[j]||(R[j]={product_id:B.product_id,product_name:B.product_name,product_barcode:B.product_barcode,total_quantity:0,transaction_count:0}),R[j].total_quantity+=B.quantity,R[j].transaction_count+=1,R},{}),L=Object.values(T);return f.createElement("div",{className:"flex min-h-screen bg-zinc-50 dark:bg-[#1c1a16]"},f.createElement(Ki,{className:`${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>n(!1),isOpen:r}),f.createElement("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64"},f.createElement(zr,{onMenuClick:()=>n(!0),title:"Dashboard"}),f.createElement("main",{className:"flex-1 p-4 lg:p-8 pb-24"},f.createElement("div",{className:"max-w-7xl mx-auto"},f.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4"},f.createElement("div",null,f.createElement("h1",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white mb-1"},"Welcome, ",((I=e==null?void 0:e.name)==null?void 0:I.split(" ")[0])||"User","."),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400"},"Here's your stock transfer summary.")),f.createElement("button",{onClick:()=>t("/transfer"),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90"},f.createElement("span",{className:"material-symbols-outlined"},"add"),"Transfer Stock")),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-lg border border-zinc-200 dark:border-zinc-800 p-4 mb-6"},f.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-4"},f.createElement("div",{className:"flex items-center gap-4 w-full md:w-auto"},f.createElement("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300"},"Period:"),f.createElement("select",{value:o,onChange:R=>s(R.target.value),className:"flex-1 md:flex-none px-4 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20 min-w-[200px]"},f.createElement("option",{value:"all"},"All Time"),f.createElement("option",{value:"today"},"Today"),f.createElement("option",{value:"yesterday"},"Yesterday"),f.createElement("option",{value:"last7days"},"Last 7 Days"),f.createElement("option",{value:"last30days"},"Last 30 Days"),f.createElement("option",{value:"custom"},"Custom Range"))),o==="custom"&&f.createElement("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto"},f.createElement("div",{className:"flex items-center gap-2"},f.createElement("label",{className:"text-sm text-zinc-600 dark:text-zinc-400"},"From:"),f.createElement("input",{type:"date",value:l,onChange:R=>u(R.target.value),className:"w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"})),f.createElement("div",{className:"flex items-center gap-2"},f.createElement("label",{className:"text-sm text-zinc-600 dark:text-zinc-400"},"To:"),f.createElement("input",{type:"date",value:c,onChange:R=>d(R.target.value),className:"w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"}))))),f.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 p-6"},f.createElement("div",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-2"},"Unique Products Transferred"),f.createElement("div",{className:"text-4xl font-bold text-zinc-900 dark:text-white"},y?"...":L.length)),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 p-6"},f.createElement("div",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-2"},"Total Items Holding"),f.createElement("div",{className:"text-4xl font-bold text-zinc-900 dark:text-white"},y?"...":w.currentStockHolding))),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden"},f.createElement("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"flex items-center justify-between mb-4"},f.createElement("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white"},"Transfer History")),f.createElement("div",{className:"relative"},f.createElement("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400"},"search"),f.createElement("input",{type:"text",placeholder:"Search products...",value:i,onChange:R=>a(R.target.value),className:"w-full pl-10 pr-4 py-2 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm text-zinc-900 dark:text-white placeholder-zinc-400 outline-none focus:ring-2 focus:ring-primary/20"}))),/_ Transfer History List _/,y?f.createElement("div",{className:"text-center py-12 text-zinc-500 dark:text-zinc-400"},"Loading transfers..."):L.length>0?f.createElement(f.Fragment,null,/_ Mobile Card View _/,f.createElement("div",{className:"md:hidden space-y-4 p-4"},L.map(R=>f.createElement("div",{key:R.product_id,className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4"},f.createElement("div",{className:"flex justify-between items-start mb-2"},f.createElement("div",null,f.createElement("div",{className:"font-bold text-zinc-900 dark:text-white"},R.product_name||"Unknown"),f.createElement("div",{className:"text-xs text-zinc-500"},R.product_barcode||"N/A")),f.createElement("div",{className:"bg-primary/10 text-primary px-2 py-1 rounded text-xs font-bold"},R.total_quantity," qty")),f.createElement("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2"},"Across ",R.transaction_count," transactions")))),/_ Desktop Table View _/,f.createElement("div",{className:"hidden md:block overflow-x-auto"},f.createElement("table",{className:"w-full"},f.createElement("thead",null,f.createElement("tr",{className:"border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50"},f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Product"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"SKU"),f.createElement("th",{className:"text-center text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Total Qty Taken"),f.createElement("th",{className:"text-center text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Transactions"))),f.createElement("tbody",null,L.map(R=>f.createElement("tr",{key:R.product_id,className:"border-b border-zinc-100 dark:border-zinc-800/50 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 transition-colors"},f.createElement("td",{className:"px-6 py-4"},f.createElement("div",{className:"font-medium text-sm text-zinc-900 dark:text-white"},R.product_name||"Unknown")),f.createElement("td",{className:"px-6 py-4 text-sm text-zinc-500 dark:text-zinc-400 whitespace-nowrap"},R.product_barcode||"N/A"),f.createElement("td",{className:"px-6 py-4 text-center text-sm font-medium text-zinc-900 dark:text-white whitespace-nowrap"},R.total_quantity),f.createElement("td",{className:"px-6 py-4 text-center text-sm text-zinc-500 dark:text-zinc-400 whitespace-nowrap"},R.transaction_count))))))):f.createElement("div",{className:"text-center py-12 text-zinc-500 dark:text-zinc-400"},i?`No results for "${i}"`:o!=="all"?"No transfers in this period":"No transfers yet")),/_ New Section: Your Returns _/,f.createElement("div",{className:"mt-8 bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden"},f.createElement("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800"},f.createElement("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white"},"Your Returns")),f.createElement("div",null,(()=>{const R=h.filter(B=>{var j;return B.type==="RETURN"&&(!i||((j=B.product_name)==null?void 0:j.toLowerCase().includes(i.toLowerCase())))});return y?f.createElement("div",{className:"p-6 text-center text-zinc-500"},"Loading..."):R.length===0?f.createElement("div",{className:"p-6 text-center text-zinc-500"},"No returns found."):f.createElement(f.Fragment,null,/_ Mobile Card View for Returns _/,f.createElement("div",{className:"md:hidden space-y-4 p-4"},R.map(B=>f.createElement("div",{key:B.id,className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4"},f.createElement("div",{className:"flex justify-between items-start mb-2"},f.createElement("div",null,f.createElement("div",{className:"font-medium text-zinc-900 dark:text-white"},B.product_name),f.createElement("div",{className:"text-xs text-zinc-500"},B.product_barcode)),f.createElement("div",{className:"text-right"},f.createElement("span",{className:"text-sm font-bold text-orange-600 dark:text-orange-400"},B.quantity," returned"),f.createElement("div",{className:"text-xs text-zinc-400 mt-1"},new Date(B.created_at).toLocaleDateString())))))),/_ Desktop Table View for Returns _/,f.createElement("div",{className:"hidden md:block overflow-x-auto"},f.createElement("table",{className:"w-full"},f.createElement("thead",null,f.createElement("tr",{className:"border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50"},f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Date"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Product"),f.createElement("th",{className:"text-center text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Returned Qty"))),f.createElement("tbody",null,R.map(B=>f.createElement("tr",{key:B.id,className:"border-b border-zinc-100 dark:border-zinc-800/50 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 transition-colors"},f.createElement("td",{className:"px-6 py-4 text-sm text-zinc-500 dark:text-zinc-400 whitespace-nowrap"},new Date(B.created_at).toLocaleDateString()),f.createElement("td",{className:"px-6 py-4"},f.createElement("div",{className:"font-medium text-sm text-zinc-900 dark:text-white"},B.product_name),f.createElement("div",{className:"text-xs text-zinc-500 whitespace-nowrap"},B.product_barcode)),f.createElement("td",{className:"px-6 py-4 text-center font-bold text-orange-600 dark:text-orange-400 whitespace-nowrap"},B.quantity)))))))})()))))))}function LS({open:t,title:e="Confirm",message:r="",onCancel:n=()=>{},onConfirm:i=()=>{}}){return t?f.createElement("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.3)"}},f.createElement("div",{className:"card",style:{maxWidth:420,width:"90%"}},f.createElement("h3",null,e),f.createElement("div",{style:{margin:"8px 0"}},r),f.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12}},f.createElement("button",{className:"btn secondary",onClick:n},"Cancel"),f.createElement("button",{className:"btn",onClick:i},"Confirm")))):null}function BS(){const[t,e]=A.useState([]),[r,n]=A.useState(!1),[i,a]=A.useState(!1),[o,s]=A.useState(null),[l,u]=A.useState({name:"",category:"",size:"",buying_price:"",selling_price:"",stock_qty:"",barcode:"",image_url:""}),[c,d]=A.useState(""),[h,p]=A.useState("All Categories"),[v,g]=A.useState(!1),[w,m]=A.useState(null),[y,x]=A.useState(!1),[_,b]=A.useState(1),S=10;A.useEffect(()=>{Bn().then(P=>e(P)).catch(()=>{})},[]);function C(){s(null),u({name:"",category:"",size:"",buying_price:"",selling_price:"",stock_qty:"",barcode:"",image_url:""}),a(!0)}function T(P){const Z=String(P||"");if(x(!1),i){u(F=>({...F,barcode:Z}));return}const D=t.find(F=>F.barcode===Z);D?(d(Z),alert(`Product "${D.name}" already exists.`)):(s(null),u({name:"",category:"",size:"",buying_price:"",selling_price:"",stock_qty:"",barcode:Z,image_url:""}),a(!0))}function L(P){P&&(s(P),u({name:P.name||"",category:P.category||"",size:P.size||"",buying_price:P.buying_price||"",selling_price:P.selling_price||"",stock_qty:P.stock_qty||"",barcode:P.barcode||"",image_url:P.image_url||""}),a(!0))}async function I(P){var Z,D;if(P.preventDefault(),!((Z=l.name)!=null&&Z.trim())){alert("Please enter a product name");return}if(!l.category){alert("Please select a category");return}if(!((D=l.barcode)!=null&&D.trim())){alert("Please enter a barcode");return}try{if(o){const F=await jd(o.id||o.barcode,l);e(H=>H.map(ee=>ee.id===F.id||ee.barcode===F.barcode?F:ee))}else{const F=await Ud(l);e(H=>[...H,F])}a(!1),s(null)}catch(F){console.error(F),alert("Failed to save product. Please try again.")}}function R(P){m(P),g(!0)}async function B(){try{await $d(w.id||w.barcode),e(P=>P.filter(Z=>Z.id!==w.id&&Z.barcode!==w.barcode))}catch(P){console.error(P)}g(!1),m(null)}const j=t.filter(P=>{var Z,D;return(((Z=P.name)==null?void 0:Z.toLowerCase().includes(c.toLowerCase()))||((D=P.barcode)==null?void 0:D.toString().includes(c)))&&(h==="All Categories"||P.category===h)}),X=Math.ceil(j.length/S),M=j.slice((_-1)*S,_*S);return f.createElement("div",{className:"flex min-h-screen bg-zinc-50 dark:bg-[#1c1a16]"},y&&f.createElement(yl,{onScan:T,onClose:()=>x(!1)}),f.createElement(Xi,{className:`${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>n(!1),isOpen:r}),f.createElement("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64"},f.createElement(zr,{onMenuClick:()=>n(!0),title:"Products"}),f.createElement("main",{className:"flex-1 p-4 lg:p-8 pb-24"},f.createElement("div",{className:"max-w-7xl mx-auto"},f.createElement("div",{className:"mb-6"},f.createElement("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-white mb-2"},"Product Management")),f.createElement("div",{className:"flex flex-col lg:flex-row items-stretch lg:items-center gap-4 mb-6"},f.createElement("div",{className:"flex-1 flex items-center gap-2 px-4 py-2 bg-white dark:bg-[#191714] border border-zinc-200 dark:border-zinc-800 rounded-lg"},f.createElement("span",{className:"material-symbols-outlined text-zinc-400"},"search"),f.createElement("input",{type:"text",placeholder:"Search by name or barcode...",value:c,onChange:P=>d(P.target.value),className:"flex-1 bg-transparent outline-none text-sm text-zinc-900 dark:text-white placeholder:text-zinc-400"})),f.createElement("div",{className:"flex flex-wrap gap-4"},f.createElement("select",{value:h,onChange:P=>p(P.target.value),className:"flex-1 lg:flex-none px-4 py-2 bg-white dark:bg-[#191714] border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm text-zinc-900 dark:text-white outline-none cursor-pointer"},f.createElement("option",null,"All Categories"),f.createElement("option",null,"Marble Look"),f.createElement("option",null,"Porcelain"),f.createElement("option",null,"Ceramic"),f.createElement("option",null,"Wood Look"),f.createElement("option",null,"Natural Stone")),f.createElement("button",{onClick:()=>x(!0),className:"flex-1 lg:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-white dark:bg-[#191714] border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm font-medium text-zinc-900 dark:text-white hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors"},f.createElement("span",{className:"material-symbols-outlined text-primary"},"qr_code_scanner"),f.createElement("span",{className:"whitespace-nowrap"},"Scan to Add")),f.createElement("button",{onClick:C,className:"flex-1 lg:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors"},f.createElement("span",{className:"text-lg"},"+"),f.createElement("span",{className:"whitespace-nowrap"},"Add Product")))),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden mb-6"},f.createElement("div",{className:"md:hidden divide-y divide-zinc-100 dark:divide-zinc-800"},M.map(P=>f.createElement("div",{key:P.id||P.barcode,className:"p-4 bg-white dark:bg-[#191714]"},f.createElement("div",{className:"flex justify-between items-start mb-2"},f.createElement("div",null,f.createElement("div",{className:"font-bold text-zinc-900 dark:text-white"},P.name||"N/A"),f.createElement("div",{className:"text-xs text-zinc-500"},P.barcode||"N/A"),f.createElement("div",{className:"text-xs text-zinc-400 mt-1"},P.category||"N/A")),f.createElement("div",{className:"text-right"},f.createElement("div",{className:"font-bold text-zinc-900 dark:text-white"},P.stock_qty||0),f.createElement("div",{className:"text-xs text-zinc-500"},"stock"))),f.createElement("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-zinc-50 dark:border-zinc-800/50"},f.createElement("div",{className:"text-sm font-medium text-zinc-900 dark:text-white"},"$",P.selling_price||"0.00"," ",f.createElement("span",{className:"text-zinc-400 font-normal text-xs"},"/sq ft")),f.createElement("div",{className:"flex gap-2"},f.createElement("button",{onClick:()=>L(P),className:"p-2 bg-zinc-100 dark:bg-zinc-800 rounded-lg text-blue-600 dark:text-blue-400"},f.createElement("span",{className:"material-symbols-outlined text-lg"},"edit")),f.createElement("button",{onClick:()=>R(P),className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg text-red-600 dark:text-red-400"},f.createElement("span",{className:"material-symbols-outlined text-lg"},"delete"))))))),f.createElement("div",{className:"hidden md:block overflow-x-auto"},f.createElement("table",{className:"w-full"},f.createElement("thead",null,f.createElement("tr",{className:"border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50"},f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Product Name"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Category"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Tile Size"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Price"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Stock Count"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Barcode"),f.createElement("th",{className:"text-center text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Actions"))),f.createElement("tbody",null,M.map(P=>f.createElement("tr",{key:P.id||P.barcode,className:"border-b border-zinc-100 dark:border-zinc-800/50 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 transition-colors"},f.createElement("td",{className:"px-6 py-4 text-sm font-medium text-zinc-900 dark:text-white whitespace-nowrap"},P.name||"N/A"),f.createElement("td",{className:"px-6 py-4 text-sm text-zinc-900 dark:text-white whitespace-nowrap"},P.category||"N/A"),f.createElement("td",{className:"px-6 py-4 text-sm text-zinc-500 dark:text-zinc-400 whitespace-nowrap"},P.size||"N/A"),f.createElement("td",{className:"px-6 py-4 text-sm text-zinc-900 dark:text-white whitespace-nowrap"},"$",P.selling_price||"0.00"," / sq ft"),f.createElement("td",{className:"px-6 py-4 text-sm text-zinc-900 dark:text-white whitespace-nowrap"},P.stock_qty||0),f.createElement("td",{className:"px-6 py-4 text-sm text-zinc-500 dark:text-zinc-400 whitespace-nowrap"},P.barcode||"N/A"),f.createElement("td",{className:"px-6 py-4"},f.createElement("div",{className:"flex items-center justify-center gap-2"},f.createElement("button",{onClick:()=>L(P),className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded transition-colors"},f.createElement("span",{className:"material-symbols-outlined text-zinc-600 dark:text-zinc-400 text-lg"},"edit")),f.createElement("button",{onClick:()=>R(P),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors"},f.createElement("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400 text-lg"},"delete")))))))))),X>1&&f.createElement("div",{className:"flex items-center justify-center gap-2"},f.createElement("button",{onClick:()=>b(P=>Math.max(1,P-1)),disabled:_===1,className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},f.createElement("span",{className:"material-symbols-outlined text-zinc-600 dark:text-zinc-400"},"chevron_left")),Array.from({length:X},(P,Z)=>Z+1).map(P=>f.createElement("button",{key:P,onClick:()=>b(P),className:`w-8 h-8 rounded text-sm font-medium transition-colors ${P===_?"bg-primary text-white":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"}`},P)),f.createElement("button",{onClick:()=>b(P=>Math.min(X,P+1)),disabled:_===X,className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},f.createElement("span",{className:"material-symbols-outlined text-zinc-600 dark:text-zinc-400"},"chevron_right")))))),i&&f.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl max-w-2xl w-full p-6 border border-zinc-200 dark:border-zinc-800 max-h-[90vh] overflow-y-auto"},f.createElement("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6"},o?"Edit Product":"Add Product"),f.createElement("form",{onSubmit:I,className:"grid grid-cols-2 gap-4"},f.createElement("div",{className:"col-span-2"},f.createElement("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"},"Name *"),f.createElement("input",{className:"auth-input",required:!0,value:l.name,onChange:P=>u({...l,name:P.target.value})})),f.createElement("div",null,f.createElement("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"},"Category *"),f.createElement("select",{className:"auth-input",required:!0,value:l.category,onChange:P=>u({...l,category:P.target.value})},f.createElement("option",{value:""},"Select Category"),f.createElement("option",{value:"Marble Look"},"Marble Look"),f.createElement("option",{value:"Wood Look"},"Wood Look"),f.createElement("option",{value:"Concrete Look"},"Concrete Look"),f.createElement("option",{value:"Stone Look"},"Stone Look"),f.createElement("option",{value:"Granite Look"},"Granite Look"),f.createElement("option",{value:"Decorative"},"Decorative"),f.createElement("option",{value:"Solid Color"},"Solid Color"))),f.createElement("div",null,f.createElement("label",{className:"block mb-2 text-sm font-bold text-zinc-700 dark:text-zinc-300"},"Size (e.g., 2424)"),f.createElement("input",{className:"auth-input",placeholder:"e.g., 2424 or 1224",value:l.size,onChange:P=>u({...l,size:P.target.value})})),f.createElement("div",null,f.createElement("label",{className:"block mb-2 text-sm font-bold text-zinc-700 dark:text-zinc-300"},"Buying Price"),f.createElement("input",{type:"number",step:"0.01",className:"auth-input",value:l.buying_price,onChange:P=>u({...l,buying_price:P.target.value})})),f.createElement("div",null,f.createElement("label",{className:"block mb-2 text-sm font-bold text-zinc-700 dark:text-zinc-300"},"Selling Price"),f.createElement("input",{type:"number",step:"0.01",className:"auth-input",value:l.selling_price,onChange:P=>u({...l,selling_price:P.target.value})})),f.createElement("div",null,f.createElement("label",{className:"block mb-2 text-sm font-bold text-zinc-700 dark:text-zinc-300"},"Stock Quantity"),f.createElement("input",{type:"number",className:"auth-input",value:l.stock_qty,onChange:P=>u({...l,stock_qty:P.target.value})})),f.createElement("div",null,f.createElement("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"},"Barcode *"),f.createElement("div",{className:"flex gap-2"},f.createElement("input",{className:"auth-input flex-1",required:!0,value:l.barcode,onChange:P=>u({...l,barcode:P.target.value}),placeholder:"Enter or scan barcode"}),f.createElement("button",{type:"button",onClick:()=>x(!0),className:"px-4 py-2 bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white rounded-lg font-medium hover:bg-zinc-200 dark:hover:bg-zinc-700 flex items-center gap-2"},f.createElement("span",{className:"material-symbols-outlined text-xl"},"qr_code_scanner"),"Scan"))),f.createElement("div",{className:"col-span-2 flex gap-3 mt-4"},f.createElement("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg font-medium hover:bg-primary/90"},"Save Product"),f.createElement("button",{type:"button",onClick:()=>{a(!1),s(null)},className:"px-4 py-2 bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white rounded-lg font-medium"},"Cancel"))))),f.createElement(LS,{open:v,title:"Delete product",message:`Delete ${(w==null?void 0:w.name)||""}?`,onCancel:()=>g(!1),onConfirm:B}))}function zS(){try{const t=localStorage.getItem("tsm_user");return t?JSON.parse(t):null}catch{return null}}function FS(){const[t,e]=A.useState(!1),[r,n]=A.useState([]),[i,a]=A.useState([]),[o,s]=A.useState([]),[l,u]=A.useState(""),[c,d]=A.useState(!1),[h,p]=A.useState(""),[v,g]=A.useState(null),w=zS(),m=(w==null?void 0:w.role)==="ADMIN",y=Er();A.useEffect(()=>{let I=!0;return Vd().then(R=>I&&n(R)).catch(()=>{}),Bn().then(R=>{var B;if(I){a(R);const j=(B=y.state)==null?void 0:B.selectedProductId;if(j){const X=R.find(M=>M.id===parseInt(j));X&&(g(X),window.history.replaceState({},document.title))}}}).catch(()=>{}),()=>I=!1},[y.state]);function x(I){d(!1);const R=i.find(B=>B.barcode===I);R?g(R):alert("Product not found")}function _(){if(!h.trim())return;const I=i.find(R=>{var B;return R.barcode===h||((B=R.name)==null?void 0:B.toLowerCase().includes(h.toLowerCase()))});I?(g(I),p("")):alert("Product not found")}function b(){v&&(S(v),g(null))}function S(I){s(R=>R.find(j=>j.id===I.id)?R.map(j=>j.id===I.id?{...j,qty:j.qty+1}:j):[...R,{...I,qty:1}])}function C(I,R){s(B=>B.map(j=>j.id===I?{...j,qty:Math.max(1,j.qty+R)}:j))}function T(I){s(R=>R.filter(B=>B.id!==I))}async function L(){if(m&&!l)return alert("Select which user is transferring stock");if(o.length===0)return alert("Add items to transfer");try{for(const I of o)await Us({user_id:m?l:void 0,product_id:I.id,type:"TRANSFER",quantity:I.qty,customer_name:null});alert(" Stock Transferred Successfully!"),s([]),u("")}catch(I){const R=I.message||"Transaction failed";alert(` ${R}`)}}return f.createElement("div",{className:"flex min-h-screen bg-zinc-50 dark:bg-[#1c1a16]"},c&&f.createElement(yl,{onScan:x,onClose:()=>d(!1)}),v&&f.createElement("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm"},f.createElement("div",{className:"w-full max-w-md bg-white dark:bg-[#191714] rounded-2xl overflow-hidden shadow-2xl border border-zinc-200 dark:border-zinc-800 animate-in fade-in zoom-in duration-200"},f.createElement("div",{className:"p-6"},f.createElement("div",{className:"flex justify-end mb-2"},f.createElement("button",{onClick:()=>g(null),className:"p-2 -mr-2 -mt-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full text-zinc-500 transition-colors"},f.createElement("span",{className:"material-symbols-outlined text-lg"},"close"))),f.createElement("div",{className:"mb-6"},f.createElement("div",{className:"text-sm font-medium text-primary mb-1"},v.category),f.createElement("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2"},v.name),f.createElement("div",{className:"flex items-center justify-between text-sm text-zinc-500 dark:text-zinc-400"},f.createElement("span",null,"Size: ",v.size),f.createElement("span",null,"SKU: ",v.barcode))),f.createElement("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl mb-6"},f.createElement("div",null,f.createElement("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 uppercase tracking-wider font-semibold"},"Stock Available"),f.createElement("div",{className:"text-xl font-bold text-zinc-900 dark:text-white"},v.stock_qty," sqft")),f.createElement("div",{className:"text-right"},f.createElement("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 uppercase tracking-wider font-semibold"},"Selling Price"),f.createElement("div",{className:"text-xl font-bold text-zinc-900 dark:text-white"},"$",v.selling_price))),f.createElement("div",{className:"flex gap-3"},f.createElement("button",{onClick:()=>g(null),className:"flex-1 py-3 px-4 rounded-xl border border-zinc-200 dark:border-zinc-700 font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors"},"Cancel"),f.createElement("button",{onClick:b,className:"flex-1 py-3 px-4 rounded-xl bg-primary text-white font-bold hover:bg-primary/90 transition-colors flex items-center justify-center gap-2"},f.createElement("span",{className:"material-symbols-outlined"},"add_circle"),"Add to List"))))),(w==null?void 0:w.role)==="ADMIN"?f.createElement(Xi,{className:`${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>e(!1),isOpen:t}):f.createElement(Ki,{className:`${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>e(!1),isOpen:t}),f.createElement("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64"},f.createElement(zr,{onMenuClick:()=>e(!0),title:m?"Transfer Stock":"Take Stock"}),f.createElement("main",{className:"flex-1 p-4 lg:p-8 pb-24"},f.createElement("div",{className:"max-w-4xl mx-auto"},f.createElement("div",{className:"mb-8"},f.createElement("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-white mb-2"},m?"Transfer Stock":"Take Stock from Warehouse"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400"},m?"Move stock from warehouse to staff":"Select products to take from the warehouse for your jobs.")),f.createElement("div",{className:"grid grid-cols-1 gap-6"},f.createElement("div",{className:"space-y-6"},m&&f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 p-6"},f.createElement("h2",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-4"},"1. Select Recipient"),f.createElement("div",null,f.createElement("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"},"Transfer To"),f.createElement("select",{value:l,onChange:I=>u(I.target.value),className:"w-full px-4 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"},f.createElement("option",{value:""},"Search for a user..."),r.map(I=>f.createElement("option",{key:I.id,value:I.id},I.name," (",I.role,")"))))),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 p-6"},f.createElement("h2",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-4"},m?"2.":"1."," Add Items"),f.createElement("div",{className:"mb-4"},f.createElement("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"},"Search by Product Name"),f.createElement("select",{value:"",onChange:I=>{if(I.target.value){const R=i.find(B=>B.id===parseInt(I.target.value));R&&g(R)}},className:"w-full px-4 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"},f.createElement("option",{value:""},"Select a product..."),i.map(I=>f.createElement("option",{key:I.id,value:I.id},I.name," - ",I.barcode," (Stock: ",I.stock_qty,")")))),f.createElement("button",{onClick:()=>d(!0),className:"mb-4 w-full flex items-center justify-center gap-2 px-4 py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90"},f.createElement("span",{className:"material-symbols-outlined"},"qr_code_scanner"),"Scan Barcode"),f.createElement("div",{className:"mb-4"},f.createElement("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"},"Or Enter Barcode/SKU Manually"),f.createElement("div",{className:"flex gap-2"},f.createElement("input",{type:"text",placeholder:"Enter barcode or SKU...",value:h,onChange:I=>p(I.target.value),onKeyPress:I=>I.key==="Enter"&&_(),className:"flex-1 px-4 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"}),f.createElement("button",{onClick:_,className:"px-6 py-2 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 flex items-center gap-2"},f.createElement("span",{className:"material-symbols-outlined"},"add"),"Add"))))),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 p-6"},f.createElement("div",{className:"flex items-center justify-between mb-6"},f.createElement("h2",{className:"text-lg font-bold text-zinc-900 dark:text-white"},"Items for Transfer (",o.length,")")),o.length===0?f.createElement("div",{className:"text-center py-12 text-zinc-500 dark:text-zinc-400"},"No items added yet"):f.createElement("div",{className:"space-y-4"},o.map(I=>f.createElement("div",{key:I.id,className:"flex flex-col sm:flex-row sm:items-center gap-4 p-4 bg-zinc-50 dark:bg-zinc-900/50 rounded-lg"},f.createElement("div",{className:"flex-1"},f.createElement("div",{className:"font-medium text-zinc-900 dark:text-white"},I.name),f.createElement("div",{className:"text-sm text-zinc-500 dark:text-zinc-400"},"SKU: ",I.barcode)),f.createElement("div",{className:"flex items-center justify-between sm:justify-end gap-3 w-full sm:w-auto mt-2 sm:mt-0"},f.createElement("div",{className:"flex items-center gap-2"},f.createElement("button",{onClick:()=>C(I.id,-1),className:"w-10 h-10 flex items-center justify-center bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-700 active:scale-95 transition-transform"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"remove")),f.createElement("input",{type:"number",min:"1",value:I.qty,onChange:R=>{const B=parseInt(R.target.value)||1;s(j=>j.map(X=>X.id===I.id?{...X,qty:Math.max(1,B)}:X))},className:"w-16 text-center font-bold text-lg text-zinc-900 dark:text-white bg-transparent outline-none"}),f.createElement("button",{onClick:()=>C(I.id,1),className:"w-10 h-10 flex items-center justify-center bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-700 active:scale-95 transition-transform"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"add"))),f.createElement("button",{onClick:()=>T(I.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400"},f.createElement("span",{className:"material-symbols-outlined text-xl"},"delete"))))),f.createElement("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-4 mt-4"},f.createElement("div",{className:"flex justify-between text-sm mb-2"},f.createElement("span",{className:"text-zinc-600 dark:text-zinc-400"},"Total Unique Items"),f.createElement("span",{className:"font-medium text-zinc-900 dark:text-white"},o.length)),f.createElement("div",{className:"flex justify-between text-sm"},f.createElement("span",{className:"text-zinc-600 dark:text-zinc-400"},"Total Quantity"),f.createElement("span",{className:"font-medium text-zinc-900 dark:text-white"},o.reduce((I,R)=>I+R.qty,0)))),f.createElement("div",{className:"flex gap-3 mt-6"},f.createElement("button",{onClick:()=>s([]),className:"flex-1 px-4 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white rounded-lg font-medium hover:bg-zinc-200 dark:hover:bg-zinc-700"},"Clear All"),f.createElement("button",{onClick:L,className:`flex-1 px-4 py-3 rounded-lg font-bold text-white transition-all active:scale-[0.98] ${o.length===0?"bg-zinc-300 dark:bg-zinc-700 cursor-not-allowed":"bg-primary hover:bg-primary/90"}`,disabled:o.length===0},m?"Confirm Transfer":"Confirm Take Stock")))))))))}const US="modulepreload",jS=function(t){return"/"+t},S0={},$S=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=jS(l),l in S0)return;S0[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":US,u||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function VS(){try{const t=localStorage.getItem("tsm_user");return t?JSON.parse(t):null}catch{return null}}function HS(){const[t,e]=A.useState(!1),[r,n]=A.useState([]),[i,a]=A.useState({}),[o,s]=A.useState({}),[l,u]=A.useState(!0),[c,d]=A.useState(""),[h,p]=A.useState(!1),[v,g]=A.useState(""),[w,m]=A.useState([]),[y,x]=A.useState(""),_=VS(),b=(_==null?void 0:_.role)==="ADMIN";A.useEffect(()=>{b&&$S(async()=>{const{fetchUsers:P}=await Promise.resolve().then(()=>B_);return{fetchUsers:P}},void 0).then(({fetchUsers:P})=>{P().then(m).catch(console.error)}),S();const M=localStorage.getItem(`accountedFor_${_==null?void 0:_.id}`);if(M)try{s(JSON.parse(M))}catch(P){console.error("Failed to parse accountedFor",P)}},[y]);async function S(){try{if(_){const M=b&&y?y:_.id,P=await Am(M);n(P)}}catch(M){console.error("Failed to load inventory:",M)}finally{u(!1)}}function C(M){p(!1),L(M)}function T(M){M==null||M.preventDefault(),c.trim()&&L(c.trim())}function L(M){var Z;const P=r.find(D=>{var F;return((F=D.product)==null?void 0:F.barcode)===M});if(P){const D=i[P.product_id]||0;D<P.quantity?(I(P.product_id,D+1),d("")):(alert(`Already returning all available quantity for ${(Z=P.product)==null?void 0:Z.name}`),d(""))}else alert("Product not found in your inventory"),d("")}function I(M,P){const Z=Math.max(0,parseInt(P)||0);a(D=>({...D,[M]:Z}))}async function R(M,P){var H;if(!P)return;const Z=r.find(ee=>ee.product_id===M);if(!Z)return;const D=i[M]||0,F=Z.quantity-D;if(!(F<=0)&&window.confirm(`Mark ${F} ${(H=Z.product)==null?void 0:H.name} as USED/INSTALLED? This will remove them from your inventory.`))try{await createUsedTransaction({items:[{productId:M,qty:F}]}),s(ee=>{const ve={...ee};return delete ve[M],localStorage.setItem(`accountedFor_${_==null?void 0:_.id}`,JSON.stringify(ve)),ve}),S(),alert("Items marked as used.")}catch(ee){alert("Failed: "+ee.message)}}async function B(){var P,Z,D;const M=Object.entries(i).filter(([F,H])=>H>0).map(([F,H])=>({productId:parseInt(F),qty:H}));if(M.length===0)return alert("Enter quantities to return");for(const F of M){const H=r.find(ee=>ee.product_id===F.productId);if(F.qty>H.quantity)return alert(`Cannot return more than you have for ${(P=H.product)==null?void 0:P.name}`)}try{await Cm({items:M});const F={...o};M.forEach(H=>{F[H.productId]=!0}),s(F),localStorage.setItem(`accountedFor_${_==null?void 0:_.id}`,JSON.stringify(F)),alert(" Return successful! Remaining stock marked as used."),a({}),S()}catch(F){alert(" Return failed: "+(((D=(Z=F.response)==null?void 0:Z.data)==null?void 0:D.message)||F.message))}}const j=Object.values(i).reduce((M,P)=>M+(P||0),0),X=r.filter(M=>{var D,F,H,ee,ve,br;if(o[M.product_id])return!1;const P=i[M.product_id]||0;return M.quantity-P<=0?!1:v.trim()?((F=(D=M.product)==null?void 0:D.name)==null?void 0:F.toLowerCase().includes(v.toLowerCase()))||((ee=(H=M.product)==null?void 0:H.barcode)==null?void 0:ee.toLowerCase().includes(v.toLowerCase()))||((br=(ve=M.product)==null?void 0:ve.category)==null?void 0:br.toLowerCase().includes(v.toLowerCase())):!0});return f.createElement("div",{className:"flex min-h-screen bg-zinc-50 dark:bg-[#1c1a16]"},h&&f.createElement(yl,{onScan:C,onClose:()=>p(!1)}),(_==null?void 0:_.role)==="ADMIN"?f.createElement(Xi,{className:`${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>e(!1),isOpen:t}):f.createElement(Ki,{className:`${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>e(!1),isOpen:t}),f.createElement("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64"},f.createElement(zr,{onMenuClick:()=>e(!0),title:"Return Stock"}),f.createElement("main",{className:"flex-1 p-4 lg:p-8 pb-24"},f.createElement("div",{className:"max-w-7xl mx-auto"},f.createElement("div",{className:"mb-6"},f.createElement("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-white mb-2"},"Return Stock"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400"},"Scan barcodes or enter quantities to return items to the warehouse.")),f.createElement("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 dark:from-primary/20 dark:to-primary/10 rounded-xl border border-primary/20 dark:border-primary/30 p-6 mb-6"},f.createElement("div",{className:"flex items-center gap-2 mb-3"},f.createElement("span",{className:"material-symbols-outlined text-primary text-2xl"},"qr_code_scanner"),f.createElement("h2",{className:"text-lg font-bold text-zinc-900 dark:text-white"},"Quick Barcode Scan")),f.createElement("form",{onSubmit:T,className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3"},f.createElement("button",{type:"button",onClick:()=>p(!0),className:"px-6 py-3 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white rounded-lg font-medium hover:bg-zinc-100 dark:hover:bg-zinc-700 flex items-center justify-center gap-2"},f.createElement("span",{className:"material-symbols-outlined"},"photo_camera"),"Scan"),f.createElement("div",{className:"flex-1 relative"},f.createElement("input",{type:"text",placeholder:"Or enter barcode manually...",value:c,onChange:M=>d(M.target.value),className:"w-full px-4 py-3 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"})),f.createElement("button",{type:"submit",className:"px-6 py-3 bg-primary text-white rounded-lg font-bold hover:bg-primary/90 transition-all active:scale-[0.98]"},"Add to Return")),f.createElement("p",{className:"text-xs text-zinc-600 dark:text-zinc-400 mt-2"}," Tip: Each scan adds 1 unit to the return quantity for that product")),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden"},f.createElement("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"flex items-center justify-between mb-4"},f.createElement("h2",{className:"text-lg font-bold text-zinc-900 dark:text-white"},"Your Inventory"),j>0&&f.createElement("span",{className:"text-sm text-primary font-medium"},"Returning ",j," item",j!==1?"s":"")),f.createElement("div",{className:"mb-6 flex gap-4"},f.createElement("div",{className:"relative flex-1"},f.createElement("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400"},"search"),f.createElement("input",{type:"text",placeholder:"Search products...",value:v,onChange:M=>g(M.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl focus:ring-2 focus:ring-primary/50 outline-none"})),b&&f.createElement("select",{value:y,onChange:M=>x(M.target.value),className:"px-4 py-3 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl focus:ring-2 focus:ring-primary/50 outline-none min-w-[200px]"},f.createElement("option",{value:""},"All Users"),w.map(M=>f.createElement("option",{key:M.id,value:M.id},M.name," (",M.email,")"))),f.createElement("button",{onClick:()=>p(!0),className:"px-6 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 flex items-center gap-2"},f.createElement("span",{className:"material-symbols-outlined"},"qr_code_scanner"),"Scan")),l?f.createElement("div",{className:"text-center py-12 text-zinc-500 dark:text-zinc-400"},"Loading inventory..."):X.length>0?f.createElement("div",null,f.createElement("div",{className:"md:hidden space-y-4 p-4"},X.map(M=>{var P,Z,D;return f.createElement("div",{key:M.product_id,className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4"},f.createElement("div",{className:"flex justify-between items-start mb-3"},f.createElement("div",null,f.createElement("div",{className:"font-medium text-zinc-900 dark:text-white"},((P=M.product)==null?void 0:P.name)||"Unknown"),f.createElement("div",{className:"text-xs text-zinc-500"},(Z=M.product)==null?void 0:Z.barcode),f.createElement("div",{className:"text-xs text-zinc-500 mt-1"},(D=M.product)==null?void 0:D.category)),f.createElement("div",{className:"text-right"},f.createElement("div",{className:"text-xs text-zinc-500"},"Owned"),f.createElement("div",{className:"font-bold text-zinc-900 dark:text-white"},M.quantity," units"))),f.createElement("div",{className:"flex items-center justify-between bg-white dark:bg-zinc-800 p-3 rounded border border-zinc-200 dark:border-zinc-700 mb-3"},f.createElement("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300"},"Return Qty:"),f.createElement("div",{className:"flex items-center gap-3"},f.createElement("button",{onClick:()=>I(M.product_id,(i[M.product_id]||0)-1),className:"w-8 h-8 flex items-center justify-center bg-zinc-100 dark:bg-zinc-700 rounded hover:bg-zinc-200 dark:hover:bg-zinc-600"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"remove")),f.createElement("input",{type:"number",min:"0",max:M.quantity,value:i[M.product_id]||0,onChange:F=>I(M.product_id,F.target.value),className:"w-16 text-center font-bold bg-transparent outline-none"}),f.createElement("button",{onClick:()=>I(M.product_id,(i[M.product_id]||0)+1),disabled:i[M.product_id]>=M.quantity,className:"w-8 h-8 flex items-center justify-center bg-zinc-100 dark:bg-zinc-700 rounded hover:bg-zinc-200 dark:hover:bg-zinc-600 disabled:opacity-50"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"add")))),f.createElement("div",{className:"flex items-center justify-between"},f.createElement("div",{className:"text-sm text-zinc-600 dark:text-zinc-400"},"Mark remaining as ",f.createElement("span",{className:"font-bold text-primary"},"USED"),"?"),f.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},f.createElement("input",{type:"checkbox",checked:o[M.product_id]||!1,onChange:F=>R(M.product_id,F.target.checked),className:"sr-only peer"}),f.createElement("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none rounded-full peer dark:bg-zinc-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"}))))})),f.createElement("div",{className:"hidden md:block overflow-x-auto"},f.createElement("table",{className:"w-full"},f.createElement("thead",null,f.createElement("tr",{className:"border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50"},f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Product"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Category"),f.createElement("th",{className:"text-center text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"You Have"),f.createElement("th",{className:"text-center text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Return Qty"),f.createElement("th",{className:"text-center text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"All Used"))),f.createElement("tbody",null,X.map(M=>{var P,Z,D;return f.createElement("tr",{key:M.product_id,className:"border-b border-zinc-100 dark:border-zinc-800/50 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 transition-colors"},f.createElement("td",{className:"px-6 py-4"},f.createElement("div",{className:"flex items-center gap-3"},f.createElement("div",null,f.createElement("div",{className:"font-medium text-sm text-zinc-900 dark:text-white whitespace-nowrap"},((P=M.product)==null?void 0:P.name)||"Unknown"),f.createElement("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 whitespace-nowrap"},"SKU: ",(Z=M.product)==null?void 0:Z.barcode)))),f.createElement("td",{className:"px-6 py-4 text-sm text-zinc-500 dark:text-zinc-400 whitespace-nowrap"},(D=M.product)==null?void 0:D.category),f.createElement("td",{className:"px-6 py-4 text-center text-sm font-medium text-zinc-900 dark:text-white whitespace-nowrap"},M.quantity),f.createElement("td",{className:"px-6 py-4"},f.createElement("div",{className:"flex items-center justify-center gap-2"},f.createElement("button",{onClick:()=>I(M.product_id,(i[M.product_id]||0)-1),className:"w-8 h-8 flex items-center justify-center bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded hover:bg-zinc-100 dark:hover:bg-zinc-700"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"remove")),f.createElement("input",{type:"number",min:"0",max:M.quantity,value:i[M.product_id]||0,onChange:F=>I(M.product_id,F.target.value),className:"w-20 text-center font-medium text-zinc-900 dark:text-white bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded px-2 py-1 outline-none focus:ring-2 focus:ring-primary/20"}),f.createElement("button",{onClick:()=>I(M.product_id,(i[M.product_id]||0)+1),disabled:i[M.product_id]>=M.quantity,className:"w-8 h-8 flex items-center justify-center bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded hover:bg-zinc-100 dark:hover:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"add")))),f.createElement("td",{className:"px-6 py-4"},f.createElement("div",{className:"flex items-center justify-center"},f.createElement("label",{className:"flex items-center cursor-pointer",title:"Check to hide this product (rest is sold/used)"},f.createElement("input",{type:"checkbox",checked:o[M.product_id]||!1,onChange:F=>R(M.product_id,F.target.checked),className:"w-5 h-5 text-primary bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600 rounded focus:ring-2 focus:ring-primary/20"})))))})))),f.createElement("div",{className:"p-6 border-t border-zinc-200 dark:border-zinc-800"},f.createElement("div",{className:"flex flex-col sm:flex-row gap-3"},f.createElement("button",{onClick:()=>a({}),className:"flex-1 px-4 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white rounded-lg font-medium hover:bg-zinc-200 dark:hover:bg-zinc-700"},"Clear All"),f.createElement("button",{onClick:B,disabled:j===0,className:`flex-1 px-4 py-3 rounded-lg font-bold text-white transition-all active:scale-[0.98] ${j===0?"bg-zinc-300 dark:bg-zinc-700 cursor-not-allowed":"bg-primary hover:bg-primary/90"}`},"Submit Return")))):f.createElement("div",{className:"text-center py-12 text-zinc-500 dark:text-zinc-400"},"No items in your inventory to return")))))))}function WS(){try{const t=localStorage.getItem("tsm_user");return t?JSON.parse(t):null}catch{return null}}function GS(){var a,o;const t=hr(),e=WS(),[r,n]=A.useState(!1);function i(){no(),t("/login")}return e?(e==null||e.role,f.createElement("div",{className:"flex min-h-screen bg-zinc-50 dark:bg-[#1c1a16]"},(e==null?void 0:e.role)==="ADMIN"?f.createElement(Xi,{className:`${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>n(!1),isOpen:r}):f.createElement(Ki,{className:`${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>n(!1),isOpen:r}),f.createElement("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64"},f.createElement(zr,{onMenuClick:()=>n(!0),title:"My Profile"}),f.createElement("main",{className:"flex-1 p-4 lg:p-8 pb-24 flex items-center justify-center"},f.createElement("div",{className:"w-full max-w-2xl"},f.createElement("h1",{className:"text-3xl lg:text-4xl font-bold text-zinc-900 dark:text-white mb-8 lg:mb-12 text-center"},"My Profile"),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 lg:p-12 shadow-sm"},f.createElement("div",{className:"flex flex-col items-center mb-8"},f.createElement("div",{className:"w-24 h-24 lg:w-32 lg:h-32 rounded-full bg-gradient-to-br from-[#D4A574] to-[#C89968] flex items-center justify-center text-white text-4xl lg:text-5xl font-bold mb-4 shadow-lg"},((o=(a=e.name)==null?void 0:a.charAt(0))==null?void 0:o.toUpperCase())||"U"),f.createElement("h2",{className:"text-xl lg:text-2xl font-bold text-zinc-900 dark:text-white mb-1"},e.name||"User"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400"},e.role==="ADMIN"?"Administrator":"Sales Staff")),f.createElement("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-xl p-6 mb-8 space-y-4"},f.createElement("div",{className:"flex justify-between items-center py-3 border-b border-zinc-200 dark:border-zinc-800"},f.createElement("span",{className:"text-zinc-500 dark:text-zinc-400 text-sm lg:text-base"},"Full Name"),f.createElement("span",{className:"font-medium text-zinc-900 dark:text-white text-sm lg:text-base"},e.name||"N/A")),f.createElement("div",{className:"flex justify-between items-center py-3 border-b border-zinc-200 dark:border-zinc-800"},f.createElement("span",{className:"text-zinc-500 dark:text-zinc-400 text-sm lg:text-base"},"Role"),f.createElement("span",{className:"font-medium text-zinc-900 dark:text-white text-sm lg:text-base"},e.role==="ADMIN"?"Administrator":"Sales Staff")),f.createElement("div",{className:"flex justify-between items-center py-3"},f.createElement("span",{className:"text-zinc-500 dark:text-zinc-400 text-sm lg:text-base"},"User ID"),f.createElement("span",{className:"font-medium text-zinc-900 dark:text-white font-mono text-sm lg:text-base"},"SF-",String(e.id).padStart(7,"0")))),f.createElement("button",{onClick:i,className:"w-full py-4 bg-[#C89968] hover:bg-[#B88858] text-white rounded-xl font-bold text-lg transition-colors shadow-md"},"Logout"))))))):(t("/login"),null)}function qS(){const[t,e]=A.useState(""),[r,n]=A.useState(!1),a=[{id:"stock",icon:"inventory_2",title:"Stock Report",description:"View current inventory levels, locations, and status.",color:"bg-amber-500"},{id:"transfer",icon:"sync_alt",title:"Staff-wise Transfer Report",description:"Track stock transfers initiated by each staff member.",color:"bg-blue-500"},{id:"return",icon:"keyboard_return",title:"Staff-wise Return Report",description:"Monitor stock returns processed by each staff member.",color:"bg-purple-500"},{id:"daily",icon:"today",title:"Daily Summary",description:"An overview of all stock movements for a selected day.",color:"bg-green-500"},{id:"monthly",icon:"calendar_month",title:"Monthly Summary",description:"A high-level report on all stock movements for a selected month.",color:"bg-indigo-500"},{id:"low-stock",icon:"warning",title:"Low Stock Report",description:"A list of items that have fallen below a predefined threshold.",color:"bg-red-500"}].filter(o=>o.title.toLowerCase().includes(t.toLowerCase())||o.description.toLowerCase().includes(t.toLowerCase()));return f.createElement("div",{className:"flex min-h-screen bg-zinc-50 dark:bg-[#1c1a16]"},f.createElement(Xi,{className:`${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>n(!1),isOpen:r}),f.createElement("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64"},f.createElement(zr,{onMenuClick:()=>n(!0),title:"Reports"}),f.createElement("main",{className:"flex-1 p-4 lg:p-8 pb-24"},f.createElement("div",{className:"max-w-7xl mx-auto"},f.createElement("div",{className:"mb-8"},f.createElement("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-white mb-2"},"Reports"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400"},"Generate and view stock, transfer, and summary reports.")),f.createElement("div",{className:"mb-8"},f.createElement("div",{className:"relative"},f.createElement("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400"},"search"),f.createElement("input",{type:"text",placeholder:"Search for a report",value:t,onChange:o=>e(o.target.value),className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-[#191714] border border-zinc-200 dark:border-zinc-800 rounded-xl text-sm text-zinc-900 dark:text-white placeholder-zinc-400 outline-none focus:ring-2 focus:ring-primary/20"}))),f.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},a.map(o=>f.createElement("button",{key:o.id,className:"text-left p-6 bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-700 transition-all hover:shadow-lg group"},f.createElement("div",{className:`w-12 h-12 ${o.color} rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`},f.createElement("span",{className:"material-symbols-outlined text-white text-2xl"},o.icon)),f.createElement("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2"},o.title),f.createElement("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 leading-relaxed"},o.description)))),a.length===0&&f.createElement("div",{className:"text-center py-12"},f.createElement("span",{className:"material-symbols-outlined text-6xl text-zinc-300 dark:text-zinc-700 mb-4"},"search_off"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400"},'No reports found matching "',t,'"'))))))}function XS(){hr(),Br();const[t,e]=A.useState(!1),[r,n]=A.useState([]),[i,a]=A.useState(!0),[o,s]=A.useState(""),[l,u]=A.useState("today"),[c,d]=A.useState(""),[h,p]=A.useState("");A.useEffect(()=>{const{start:m,end:y}=g();v(m,y)},[l,c,h]);async function v(m,y){if(!(l==="custom"&&(!m||!y)))try{a(!0);const x=m?m.toISOString():null,_=y?y.toISOString():null,b=await Hd(x,_);n(b)}catch(x){console.error("Failed to load transactions:",x)}finally{a(!1)}}function g(){const m=new Date;m.setHours(0,0,0,0);const y=new Date(m);switch(y.setHours(23,59,59,999),l){case"today":return{start:m,end:y};case"yesterday":const x=new Date(m);x.setDate(x.getDate()-1);const _=new Date(x);return _.setHours(23,59,59,999),{start:x,end:_};case"last7days":const b=new Date(m);return b.setDate(b.getDate()-7),{start:b,end:y};case"last30days":const S=new Date(m);return S.setDate(S.getDate()-30),{start:S,end:y};case"custom":return!c||!h?{start:null,end:null}:{start:new Date(c),end:new Date(new Date(h).setHours(23,59,59,999))};case"all":default:return{start:null,end:null}}}const w=r.filter(m=>{var y,x;return((y=m.product_name)==null?void 0:y.toLowerCase().includes(o.toLowerCase()))||((x=m.product_barcode)==null?void 0:x.toLowerCase().includes(o.toLowerCase()))});return f.createElement("div",{className:"flex min-h-screen bg-zinc-50 dark:bg-[#1c1a16]"},f.createElement(Ki,{className:`${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>e(!1),isOpen:t}),f.createElement("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64"},f.createElement(zr,{onMenuClick:()=>e(!0),title:"Transactions"}),f.createElement("main",{className:"flex-1 p-4 lg:p-8 pb-24"},f.createElement("div",{className:"max-w-7xl mx-auto"},f.createElement("div",{className:"mb-8"},f.createElement("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-white mb-2"},"Transaction History"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400"},"View all your transfers and returns")),f.createElement("div",{className:"mb-6 space-y-4"},f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-lg border border-zinc-200 dark:border-zinc-800 p-4"},f.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-4"},f.createElement("div",{className:"flex items-center gap-4 w-full md:w-auto"},f.createElement("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300"},"Period:"),f.createElement("select",{value:l,onChange:m=>u(m.target.value),className:"flex-1 md:flex-none px-4 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20 min-w-[200px]"},f.createElement("option",{value:"today"},"Today"),f.createElement("option",{value:"yesterday"},"Yesterday"),f.createElement("option",{value:"last7days"},"Last 7 Days"),f.createElement("option",{value:"last30days"},"Last 30 Days"),f.createElement("option",{value:"all"},"All Time"),f.createElement("option",{value:"custom"},"Custom Range"))),l==="custom"&&f.createElement("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto"},f.createElement("div",{className:"flex items-center gap-2"},f.createElement("label",{className:"text-sm text-zinc-600 dark:text-zinc-400"},"From:"),f.createElement("input",{type:"date",value:c,onChange:m=>d(m.target.value),className:"w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"})),f.createElement("div",{className:"flex items-center gap-2"},f.createElement("label",{className:"text-sm text-zinc-600 dark:text-zinc-400"},"To:"),f.createElement("input",{type:"date",value:h,onChange:m=>p(m.target.value),className:"w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"}))))),f.createElement("div",{className:"relative"},f.createElement("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400"},"search"),f.createElement("input",{type:"text",placeholder:"Search transactions...",value:o,onChange:m=>s(m.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-[#191714] border border-zinc-200 dark:border-zinc-800 rounded-xl text-sm text-zinc-900 dark:text-white placeholder-zinc-400 outline-none focus:ring-2 focus:ring-primary/20"}))),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden"},f.createElement("div",{className:"overflow-x-auto"},i?f.createElement("div",{className:"text-center py-12 text-zinc-500 dark:text-zinc-400"},"Loading transactions..."):w.length>0?f.createElement(f.Fragment,null,f.createElement("div",{className:"md:hidden space-y-4 p-4"},w.map(m=>f.createElement("div",{key:m.id,className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4"},f.createElement("div",{className:"flex justify-between items-start mb-2"},f.createElement("div",null,f.createElement("div",{className:"font-bold text-zinc-900 dark:text-white"},m.product_name||"Unknown"),f.createElement("div",{className:"text-xs text-zinc-500"},m.product_barcode||"N/A")),f.createElement("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-bold whitespace-nowrap ${m.type==="TRANSFER"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":m.type==="RETURN"?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}`},m.type==="TRANSFER"?" Out":m.type==="RETURN"?" In":" Rec")),f.createElement("div",{className:"flex justify-between items-center text-sm mt-3"},f.createElement("div",{className:"text-zinc-500 dark:text-zinc-400"},f.createElement("div",null,new Date(m.created_at).toLocaleDateString()),f.createElement("div",{className:"text-xs"},new Date(m.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),f.createElement("div",{className:"text-right"},f.createElement("div",{className:"font-bold text-lg text-zinc-900 dark:text-white"},m.quantity," qty"),m.customer_name&&f.createElement("div",{className:"text-xs text-zinc-500"},m.customer_name)))))),f.createElement("div",{className:"hidden md:block"},f.createElement("table",{className:"w-full"},f.createElement("thead",null,f.createElement("tr",{className:"border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50"},f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Date & Time"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Product"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Type"),f.createElement("th",{className:"text-center text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Quantity"),f.createElement("th",{className:"text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase px-6 py-4 whitespace-nowrap"},"Customer"))),f.createElement("tbody",null,w.map(m=>f.createElement("tr",{key:m.id,className:"border-b border-zinc-100 dark:border-zinc-800/50 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 transition-colors"},f.createElement("td",{className:"px-6 py-4 text-sm text-zinc-900 dark:text-white whitespace-nowrap"},new Date(m.created_at).toLocaleString()),f.createElement("td",{className:"px-6 py-4"},f.createElement("div",null,f.createElement("div",{className:"text-sm font-medium text-zinc-900 dark:text-white"},m.product_name||"Unknown"),f.createElement("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 whitespace-nowrap"},m.product_barcode||"N/A"))),f.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},f.createElement("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${m.type==="TRANSFER"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":m.type==="RETURN"?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}`},m.type==="TRANSFER"?" To Customer":m.type==="RETURN"?" Return":" Received")),f.createElement("td",{className:"px-6 py-4 text-center text-sm font-medium text-zinc-900 dark:text-white whitespace-nowrap"},m.quantity),f.createElement("td",{className:"px-6 py-4 text-sm text-zinc-500 dark:text-zinc-400 whitespace-nowrap"},m.customer_name||"-"))))))):f.createElement("div",{className:"text-center py-12 text-zinc-500 dark:text-zinc-400"},o?`No transactions found for "${o}"`:"No transactions yet")))))))}function KS(){const t=hr();Br();const[e,r]=A.useState(!1),[n,i]=A.useState([]),[a,o]=A.useState(!0),[s,l]=A.useState(""),[u,c]=A.useState("all"),[d,h]=A.useState([]);A.useEffect(()=>{p()},[]);async function p(){try{const[g,w]=await Promise.all([Bn(),pi()]);i(g),h(["all",...w.map(m=>m.name)])}catch(g){console.error("Failed to load data:",g)}finally{o(!1)}}const v=n.filter(g=>{var y,x;const w=((y=g.name)==null?void 0:y.toLowerCase().includes(s.toLowerCase()))||((x=g.barcode)==null?void 0:x.toLowerCase().includes(s.toLowerCase())),m=u==="all"||g.category===u;return w&&m});return f.createElement("div",{className:"flex min-h-screen bg-zinc-50 dark:bg-[#1c1a16]"},f.createElement(Ki,{className:`${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,onClose:()=>r(!1),isOpen:e}),f.createElement("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64"},f.createElement(zr,{onMenuClick:()=>r(!0),title:"Catalog"}),f.createElement("main",{className:"flex-1 p-4 lg:p-8 pb-24"},f.createElement("div",{className:"max-w-7xl mx-auto"},f.createElement("div",{className:"mb-6"},f.createElement("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-white mb-2"},"Product Catalog"),f.createElement("p",{className:"text-zinc-500 dark:text-zinc-400"},"Browse all available products in the warehouse")),f.createElement("div",{className:"bg-white dark:bg-[#191714] rounded-lg border border-zinc-200 dark:border-zinc-800 p-4 mb-6"},f.createElement("div",{className:"flex flex-col md:flex-row gap-4"},f.createElement("div",{className:"flex-1 relative"},f.createElement("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400"},"search"),f.createElement("input",{type:"text",placeholder:"Search products...",value:s,onChange:g=>l(g.target.value),className:"w-full pl-10 pr-4 py-2 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm text-zinc-900 dark:text-white placeholder-zinc-400 outline-none focus:ring-2 focus:ring-primary/20"})),f.createElement("select",{value:u,onChange:g=>c(g.target.value),className:"px-4 py-2 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-primary/20"},d.map(g=>f.createElement("option",{key:g,value:g},g==="all"?"All Categories":g))))),a?f.createElement("div",{className:"text-center py-12 text-zinc-500 dark:text-zinc-400"},"Loading products..."):v.length>0?f.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},v.map(g=>f.createElement("div",{key:g.id,className:"bg-white dark:bg-[#191714] rounded-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden hover:shadow-lg transition-shadow"},f.createElement("div",{className:"p-4"},f.createElement("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-1"},g.name),f.createElement("div",{className:"flex items-center justify-between mb-3"},f.createElement("span",{className:"text-sm text-zinc-500 dark:text-zinc-400"},g.category||"Uncategorized"),f.createElement("span",{className:`text-sm font-medium ${g.stock_qty>10?"text-green-600 dark:text-green-400":g.stock_qty>0?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`},g.stock_qty>0?`${g.stock_qty} in stock`:"Out of stock")),f.createElement("div",{className:"space-y-3 mt-4"},g.size&&f.createElement("div",{className:"flex justify-between text-sm"},f.createElement("span",{className:"text-zinc-500 dark:text-zinc-400"},"Size:"),f.createElement("span",{className:"text-zinc-900 dark:text-white font-medium"},g.size)),f.createElement("div",{className:"flex justify-between text-sm"},f.createElement("span",{className:"text-zinc-500 dark:text-zinc-400"},"SKU:"),f.createElement("span",{className:"text-zinc-900 dark:text-white font-mono text-xs"},g.barcode)),f.createElement("button",{onClick:()=>t("/transfer",{state:{selectedProductId:g.id}}),className:"w-full mt-2 flex items-center justify-center gap-2 py-2 px-4 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-900 dark:text-white rounded-lg font-medium transition-colors text-sm"},f.createElement("span",{className:"material-symbols-outlined text-sm"},"add_shopping_cart"),"Take Stock")))))):f.createElement("div",{className:"text-center py-12 text-zinc-500 dark:text-zinc-400"},s||u!=="all"?"No products found matching your filters":"No products available")))))}function YS(){const t=Br(),e=hr();function r(){no(),e("/login")}function n(){(t==null?void 0:t.role)==="ADMIN"?e("/admin"):t!=null&&t.role?e("/user"):e("/login")}return f.createElement("div",{className:"topbar"},f.createElement("div",{className:"logo",style:{cursor:"pointer"},onClick:n},f.createElement("img",{src:"/smart-florring-logo-main.png",alt:"Smart Floor",style:{width:32,height:32,objectFit:"contain"}}),f.createElement("div",null,f.createElement("div",{className:"app-name"},"SMART FLOOR"),f.createElement("div",{style:{fontSize:"0.75rem",fontWeight:400,color:"var(--text-muted)"}},(t==null?void 0:t.role)||"Guest"))),f.createElement("div",{style:{display:"flex",gap:10,alignItems:"center"}},(t==null?void 0:t.role)&&f.createElement("button",{className:"btn",onClick:r},"Logout")))}function ZS(){try{const t=localStorage.getItem("tsm_user");return t?JSON.parse(t):null}catch{return null}}function QS(){const t=Er();if(t.pathname==="/login"||t.pathname==="/signup")return null;const r=ZS(),o=((r==null?void 0:r.role)||"GUEST")==="ADMIN"?[{to:"/admin",label:"Home"},{to:"/products",label:"Products"},{to:"/transfer",label:"Transfer"},{to:"/return",label:"Return"},{to:"/reports",label:"Reports"}]:[{to:"/user",label:"Home"},{to:"/transfer",label:"Transfer"},{to:"/return",label:"Return"},{to:"/user",label:"Scan"},{to:"/profile",label:"Profile"}];return f.createElement("div",{className:"bottom-nav"},f.createElement("div",{className:"nav"},o.map(s=>f.createElement(Mt,{key:s.label,to:s.to},s.label))))}function Wm(){try{const t=localStorage.getItem("tsm_user");return t?JSON.parse(t):null}catch{return null}}function Cr({children:t,roles:e}){const r=Wm();return r!=null&&r.token?e&&!e.includes(r.role)?f.createElement(Na,{to:"/",replace:!0}):t:f.createElement(Na,{to:"/login",replace:!0})}function JS(){const t=Wm();return t!=null&&t.token?t.role==="ADMIN"?f.createElement(Na,{to:"/admin",replace:!0}):f.createElement(Na,{to:"/user",replace:!0}):f.createElement(Na,{to:"/login",replace:!0})}function eC(){const t=Er(),[e,r]=A.useState(!1);if(A.useEffect(()=>{async function s(){try{await Br()}catch(l){console.error("Session check failed",l)}finally{r(!0)}}s()},[]),!e)return f.createElement("div",{className:"flex h-screen w-full items-center justify-center bg-zinc-50 dark:bg-[#1c1a16]"},f.createElement("div",{className:"text-zinc-500"},"Verifying session..."));const n=["/login","/signup"].includes(t.pathname),a=(s=>s.endsWith("/")&&s.length>1?s.slice(0,-1):s)(t.pathname),o=["/admin","/user","/products","/transfer","/return","/reports","/transactions","/catalog","/profile"].includes(a);return f.createElement("div",{className:"app"},!o&&!n&&f.createElement(YS,null),f.createElement("main",{className:o?"":"main-content"},f.createElement(sw,null,f.createElement(Pt,{path:"/login",element:f.createElement(z_,null)}),f.createElement(Pt,{path:"/signup",element:f.createElement(F_,null)}),f.createElement(Pt,{path:"/admin",element:f.createElement(Cr,{roles:["ADMIN"]},f.createElement(RS,null))}),f.createElement(Pt,{path:"/user",element:f.createElement(Cr,{roles:["USER","SALES","USER"]},f.createElement(MS,null))}),f.createElement(Pt,{path:"/catalog",element:f.createElement(Cr,{roles:["USER","SALES"]},f.createElement(KS,null))}),f.createElement(Pt,{path:"/products",element:f.createElement(Cr,{roles:["ADMIN"]},f.createElement(BS,null))}),f.createElement(Pt,{path:"/transfer",element:f.createElement(Cr,{roles:["ADMIN","USER","SALES"]},f.createElement(FS,null))}),f.createElement(Pt,{path:"/return",element:f.createElement(Cr,{roles:["ADMIN","USER","SALES"]},f.createElement(HS,null))}),f.createElement(Pt,{path:"/profile",element:f.createElement(Cr,{roles:["ADMIN","USER","SALES"]},f.createElement(GS,null))}),f.createElement(Pt,{path:"/reports",element:f.createElement(Cr,{roles:["ADMIN"]},f.createElement(qS,null))}),f.createElement(Pt,{path:"/transactions",element:f.createElement(Cr,{roles:["USER","SALES"]},f.createElement(XS,null))}),f.createElement(Pt,{path:"/",element:f.createElement(JS,null)}))),!o&&!n&&f.createElement(QS,null))}Bp(document.getElementById("root")).render(f.createElement(f.StrictMode,null,f.createElement(pw,null,f.createElement(eC,null))));
